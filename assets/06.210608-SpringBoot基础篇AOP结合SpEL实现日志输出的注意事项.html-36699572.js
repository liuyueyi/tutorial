import{_ as p,V as e,W as o,a1 as c,X as n,Y as s,Z as t,a0 as l,F as i}from"./framework-23f3cf9b.js";const u="/tutorial/imgs/210608/00.jpg",k="/tutorial/imgs/210608/01.jpg",r={},d=n("p",null,"ä½¿ç”¨AOPæ¥æ‰“å°æ—¥å¿—å¤§å®¶ä¸€æŠŠéƒ½å¾ˆç†Ÿæ‚‰äº†ï¼Œæœ€è¿‘åœ¨ä½¿ç”¨çš„è¿‡ç¨‹ä¸­ï¼Œå‘ç°äº†å‡ ä¸ªæœ‰æ„æ€çš„é—®é¢˜ï¼Œä¸€ä¸ªæ˜¯SpELçš„è§£æï¼Œä¸€ä¸ªæ˜¯å‚æ•°çš„JSONæ ¼å¼è¾“å‡º",-1),v=l(`<h2 id="i-é¡¹ç›®ç¯å¢ƒ" tabindex="-1"><a class="header-anchor" href="#i-é¡¹ç›®ç¯å¢ƒ" aria-hidden="true">#</a> I. é¡¹ç›®ç¯å¢ƒ</h2><h3 id="_1-é¡¹ç›®ä¾èµ–" tabindex="-1"><a class="header-anchor" href="#_1-é¡¹ç›®ä¾èµ–" aria-hidden="true">#</a> 1. é¡¹ç›®ä¾èµ–</h3><p>æœ¬é¡¹ç›®å€ŸåŠ©<code>SpringBoot 2.2.1.RELEASE</code> + <code>maven 3.5.3</code> + <code>IDEA</code>è¿›è¡Œå¼€å‘</p><p>å¼€ä¸€ä¸ªwebæœåŠ¡ç”¨äºæµ‹è¯•</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-web<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="ii-aop-spel" tabindex="-1"><a class="header-anchor" href="#ii-aop-spel" aria-hidden="true">#</a> II. AOP &amp; SpEL</h2><p>å…³äºAOPä¸SpELçš„çŸ¥è¯†ç‚¹ï¼Œä¹‹å‰éƒ½æœ‰è¿‡ä¸“é—¨çš„ä»‹ç»ï¼Œè¿™é‡Œåšä¸€ä¸ªèšåˆï¼Œä¸€ä¸ªéå¸¸ç®€å•çš„æ—¥å¿—è¾“å‡ºåˆ‡é¢ï¼Œåœ¨éœ€è¦æ‰“å°æ—¥å¿—çš„æ–¹æ³•ä¸Šï¼Œæ·»åŠ æ³¨è§£<code>@Log</code>ï¼Œè¿™ä¸ªæ³¨è§£ä¸­å®šä¹‰ä¸€ä¸ª<code>key</code>ï¼Œä½œä¸ºæ—¥å¿—è¾“å‡ºçš„æ ‡è®°ï¼›keyæ”¯æŒSpELè¡¨è¾¾å¼</p><h3 id="_1-aopåˆ‡é¢" tabindex="-1"><a class="header-anchor" href="#_1-aopåˆ‡é¢" aria-hidden="true">#</a> 1. AOPåˆ‡é¢</h3><p>æ³¨è§£å®šä¹‰</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Target</span><span class="token punctuation">(</span><span class="token class-name">ElementType</span><span class="token punctuation">.</span><span class="token constant">METHOD</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@Retention</span><span class="token punctuation">(</span><span class="token class-name">RetentionPolicy</span><span class="token punctuation">.</span><span class="token constant">RUNTIME</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token annotation punctuation">@interface</span> <span class="token class-name">Log</span> <span class="token punctuation">{</span>
    <span class="token class-name">String</span> <span class="token function">key</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åˆ‡é¢é€»è¾‘</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Slf4j</span>
<span class="token annotation punctuation">@Aspect</span>
<span class="token annotation punctuation">@Component</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AopAspect</span> <span class="token keyword">implements</span> <span class="token class-name">ApplicationContextAware</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">ExpressionParser</span> parser <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SpelExpressionParser</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">ParameterNameDiscoverer</span> parameterNameDiscoverer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DefaultParameterNameDiscoverer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Around</span><span class="token punctuation">(</span><span class="token string">&quot;@annotation(logAno)&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">Object</span> <span class="token function">around</span><span class="token punctuation">(</span><span class="token class-name">ProceedingJoinPoint</span> joinPoint<span class="token punctuation">,</span> <span class="token class-name">Log</span> logAno<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Throwable</span> <span class="token punctuation">{</span>
        <span class="token keyword">long</span> start <span class="token operator">=</span> <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> key <span class="token operator">=</span> <span class="token function">loadKey</span><span class="token punctuation">(</span>logAno<span class="token punctuation">.</span><span class="token function">key</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> joinPoint<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> joinPoint<span class="token punctuation">.</span><span class="token function">proceed</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>
            log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;key: {}, args: {}, cost: {}&quot;</span><span class="token punctuation">,</span> key<span class="token punctuation">,</span>
                    <span class="token class-name">JSONObject</span><span class="token punctuation">.</span><span class="token function">toJSONString</span><span class="token punctuation">(</span>joinPoint<span class="token punctuation">.</span><span class="token function">getArgs</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                    <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">currentTimeMillis</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> start<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token class-name">String</span> <span class="token function">loadKey</span><span class="token punctuation">(</span><span class="token class-name">String</span> key<span class="token punctuation">,</span> <span class="token class-name">ProceedingJoinPoint</span> joinPoint<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>key <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> key<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token class-name">StandardEvaluationContext</span> context <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">StandardEvaluationContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        context<span class="token punctuation">.</span><span class="token function">setBeanResolver</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">BeanFactoryResolver</span><span class="token punctuation">(</span>applicationContext<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> params <span class="token operator">=</span> parameterNameDiscoverer<span class="token punctuation">.</span><span class="token function">getParameterNames</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">MethodSignature</span><span class="token punctuation">)</span> joinPoint<span class="token punctuation">.</span><span class="token function">getSignature</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getMethod</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args <span class="token operator">=</span> joinPoint<span class="token punctuation">.</span><span class="token function">getArgs</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> args<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            context<span class="token punctuation">.</span><span class="token function">setVariable</span><span class="token punctuation">(</span>params<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> args<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">return</span> parser<span class="token punctuation">.</span><span class="token function">parseExpression</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getValue</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token class-name">ApplicationContext</span> applicationContext<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">setApplicationContext</span><span class="token punctuation">(</span><span class="token class-name">ApplicationContext</span> applicationContext<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">BeansException</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>applicationContext <span class="token operator">=</span> applicationContext<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¸Šé¢è¿™ä¸ªé€»è¾‘æ¯”è¾ƒç®€å•ï¼Œå’Œå¤§å®¶ç†ŸçŸ¥çš„ä½¿ç”¨å§¿åŠ¿æ²¡æœ‰å¤ªå¤§çš„åŒºåˆ«</p><h3 id="_2-standardevaluationcontextå®‰å…¨é—®é¢˜" tabindex="-1"><a class="header-anchor" href="#_2-standardevaluationcontextå®‰å…¨é—®é¢˜" aria-hidden="true">#</a> 2. StandardEvaluationContextå®‰å…¨é—®é¢˜</h3><p>å…³äº<code>StandardEvaluationContext</code>çš„æ³¨å…¥é—®é¢˜ï¼Œæœ‰å…´è¶£çš„å¯ä»¥æŸ¥è¯¢ä¸€ä¸‹ç›¸å…³æ–‡ç« ï¼›å¯¹äºå®‰å…¨æ ¡éªŒè¾ƒé«˜çš„ï¼Œè¦æ±‚åªèƒ½ä½¿ç”¨<code>SimpleEvaluationContext</code>ï¼Œä½¿ç”¨å®ƒçš„è¯ï¼ŒSpELçš„èƒ½åŠ›å°±è¢«é™åˆ¶äº†</p><p>å¦‚åŠ ä¸€ä¸ªæµ‹è¯•</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Data</span>
<span class="token annotation punctuation">@Accessors</span><span class="token punctuation">(</span>chain <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">DemoDo</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>

    <span class="token keyword">private</span> <span class="token class-name">Integer</span> age<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æœåŠ¡ç±»</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Service</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">HelloService</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Log</span><span class="token punctuation">(</span>key <span class="token operator">=</span> <span class="token string">&quot;#demo.getName()&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">say</span><span class="token punctuation">(</span><span class="token class-name">DemoDo</span> demo<span class="token punctuation">,</span> <span class="token class-name">String</span> prefix<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> prefix <span class="token operator">+</span> <span class="token string">&quot;:&quot;</span> <span class="token operator">+</span> demo<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¸ºäº†éªŒè¯<code>SimpleEvaluationContext</code>ï¼Œæˆ‘ä»¬ä¿®æ”¹ä¸€ä¸‹ä¸Šé¢çš„<code>loadKeys</code>æ–¹æ³•</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">private</span> <span class="token class-name">String</span> <span class="token function">loadKey</span><span class="token punctuation">(</span><span class="token class-name">String</span> key<span class="token punctuation">,</span> <span class="token class-name">ProceedingJoinPoint</span> joinPoint<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>key <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> key<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token class-name">SimpleEvaluationContext</span> context <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SimpleEvaluationContext<span class="token punctuation">.</span>Builder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> params <span class="token operator">=</span> parameterNameDiscoverer<span class="token punctuation">.</span><span class="token function">getParameterNames</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">MethodSignature</span><span class="token punctuation">)</span> joinPoint<span class="token punctuation">.</span><span class="token function">getSignature</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getMethod</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Object</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args <span class="token operator">=</span> joinPoint<span class="token punctuation">.</span><span class="token function">getArgs</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> args<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        context<span class="token punctuation">.</span><span class="token function">setVariable</span><span class="token punctuation">(</span>params<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">,</span> args<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">return</span> parser<span class="token punctuation">.</span><span class="token function">parseExpression</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getValue</span><span class="token punctuation">(</span>context<span class="token punctuation">,</span> <span class="token class-name">String</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¯åŠ¨æµ‹è¯•</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@SpringBootApplication</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Application</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token class-name">Application</span><span class="token punctuation">(</span><span class="token class-name">HelloService</span> helloService<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        helloService<span class="token punctuation">.</span><span class="token function">say</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">DemoDo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">&quot;ä¸€ç°ç°blog&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setAge</span><span class="token punctuation">(</span><span class="token number">18</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">&quot;welcome&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">SpringApplication</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">Application</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="`+u+`" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>ç›´æ¥æç¤ºæ–¹æ³•æ‰¾ä¸åˆ°ï¼ï¼ï¼</p><h3 id="_3-gsonåºåˆ—åŒ–é—®é¢˜" tabindex="-1"><a class="header-anchor" href="#_3-gsonåºåˆ—åŒ–é—®é¢˜" aria-hidden="true">#</a> 3. gsonåºåˆ—åŒ–é—®é¢˜</h3><p>ä¸Šé¢çš„caseä¸­ï¼Œä½¿ç”¨çš„FastJsonå¯¹ä¼ å‚è¿›è¡Œåºåˆ—åŒ–ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬é‡‡ç”¨Gsonæ¥åšåºåˆ—åŒ–</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.google.code.gson<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>gson<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç„¶åæ–°å¢ä¸€ä¸ªç‰¹æ®Šçš„æ–¹æ³•</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Service</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">HelloService</span> <span class="token punctuation">{</span>
    <span class="token doc-comment comment">/**
     * å­—é¢é‡ï¼Œæ³¨æ„ç”¨å•å¼•å·åŒ…è£¹èµ·æ¥
     * <span class="token keyword">@param</span> <span class="token parameter">key</span>
     * <span class="token keyword">@return</span>
     */</span>
    <span class="token annotation punctuation">@Log</span><span class="token punctuation">(</span>key <span class="token operator">=</span> <span class="token string">&quot;&#39;yihuihuiblog&#39;&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">hello</span><span class="token punctuation">(</span><span class="token class-name">String</span> key<span class="token punctuation">,</span> <span class="token class-name">HelloService</span> helloService<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> key <span class="token operator">+</span> <span class="token string">&quot;_&quot;</span> <span class="token operator">+</span> helloService<span class="token punctuation">.</span><span class="token function">say</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">DemoDo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setAge</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">&quot;prefix&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ³¨æ„ä¸Šé¢æ–¹æ³•çš„ç¬¬äºŒä¸ªå‚æ•°ï¼Œéå¸¸æœ‰æ„æ€çš„æ˜¯ï¼Œä¼ å‚æ˜¯è‡ªå·±çš„å®ä¾‹ï¼›å†æ¬¡æ‰§è¡Œ</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token class-name">Application</span><span class="token punctuation">(</span><span class="token class-name">HelloService</span> helloService<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    helloService<span class="token punctuation">.</span><span class="token function">say</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">DemoDo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">&quot;ä¸€ç°ç°blog&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setAge</span><span class="token punctuation">(</span><span class="token number">18</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">&quot;welcome&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token class-name">String</span> ans <span class="token operator">=</span> helloService<span class="token punctuation">.</span><span class="token function">hello</span><span class="token punctuation">(</span><span class="token string">&quot;ä¸€ç°ç°&quot;</span><span class="token punctuation">,</span> helloService<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>ans<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç›´æ¥æŠ›äº†å¼‚å¸¸</p><figure><img src="`+k+'" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>è¿™å°±å¾ˆå°´å°¬äº†ï¼Œä¸€ä¸ªè¾“å‡ºæ—¥å¿—çš„è¾…åŠ©å·¥å…·ï¼Œå› ä¸ºåºåˆ—åŒ–ç›´æ¥å¯¼è‡´æ¥å£ä¸å¯ç”¨ï¼Œè¿™å°±ä¸ä¼˜é›…äº†ï¼›è€Œæˆ‘ä»¬ä½œä¸ºæ—¥å¿—è¾“å‡ºçš„åˆ‡é¢ï¼Œåˆæ˜¯æ²¡æœ‰åŠæ³•æ§åˆ¶è¿™ä¸ªä¼ å‚çš„ï¼Œæ²¡åŠæ³•è¦æ±‚ä½¿ç”¨çš„å‚æ•°ï¼Œä¸€å®šèƒ½åºåˆ—åŒ–ï¼Œè¿™é‡Œéœ€è¦é¢å¤–æ³¨æ„ ï¼ˆæ¯”è¾ƒå¥½çš„æ–¹å¼å°±æ˜¯ç®€å•å¯¹è±¡éƒ½å®ç°toString,ç„¶åè¾“å‡ºtoStringçš„ç»“æœï¼›è€Œä¸æ˜¯jsonä¸²ï¼‰</p><h3 id="_4-å°ç»“" tabindex="-1"><a class="header-anchor" href="#_4-å°ç»“" aria-hidden="true">#</a> 4. å°ç»“</h3><p>è™½ç„¶ä¸Šé¢ä¸€å¤§ä¸²çš„å†…å®¹ï¼Œæ€»ç»“ä¸‹æ¥ï¼Œä¹Ÿå°±ä¸¤ç‚¹</p><ul><li>SpELè‹¥é‡‡ç”¨çš„æ˜¯<code>SimpleEvaluationContext</code>ï¼Œé‚£ä¹ˆæ³¨æ„spelçš„åŠŸèƒ½æ˜¯å‡å¼±çš„ï¼Œä¸€äº›ç‰¹æ€§ä¸æ”¯æŒ</li><li>è‹¥å°†æ–¹æ³•å‚æ•°jsonåºåˆ—åŒ–è¾“å‡ºï¼Œé‚£ä¹ˆéœ€è¦æ³¨æ„æŸäº›ç±»åœ¨åºåˆ—åŒ–çš„è¿‡ç¨‹ä¸­ï¼Œå¯èƒ½ä¼šæŠ›å¼‚å¸¸</li></ul><p>ï¼ˆçœ‹åˆ°è¿™é‡Œçš„å°ä¼™ä¼´ï¼Œä¸å¦¨ç‚¹ä¸ªèµï¼Œé¡ºæ‰‹å…³æ³¨ä¸‹å¾®ä¿¡å…¬ä¼—å·â€ä¸€ç°ç°blogâ€œï¼Œæˆ‘çš„å…¬ä¼—å·å·²ç»å¯‚å¯çš„é•¿è‰äº†ğŸ˜­ï¼‰</p><h2 id="iii-ä¸èƒ½é”™è¿‡çš„æºç å’Œç›¸å…³çŸ¥è¯†ç‚¹" tabindex="-1"><a class="header-anchor" href="#iii-ä¸èƒ½é”™è¿‡çš„æºç å’Œç›¸å…³çŸ¥è¯†ç‚¹" aria-hidden="true">#</a> III. ä¸èƒ½é”™è¿‡çš„æºç å’Œç›¸å…³çŸ¥è¯†ç‚¹</h2><h3 id="_0-é¡¹ç›®" tabindex="-1"><a class="header-anchor" href="#_0-é¡¹ç›®" aria-hidden="true">#</a> 0. é¡¹ç›®</h3>',41),m={href:"https://github.com/liuyueyi/spring-boot-demo",target:"_blank",rel:"noopener noreferrer"},b={href:"https://github.com/liuyueyi/spring-boot-demo/tree/master/spring-boot/014-spel-aop",target:"_blank",rel:"noopener noreferrer"},g=n("p",null,[n("strong",null,"AOPç³»åˆ—åšæ–‡")],-1),f={href:"http://mp.weixin.qq.com/s?__biz=MzU3MTAzNTMzMQ==&mid=2247486254&idx=1&sn=d33ed6b90880fe518f587225a4550283&chksm=fce71082cb90999461d262d4ad41683ebea96d1a0eb6c8e48dcc8613922841b3c1dcd2c8f5fb&token=798393379&lang=zh_CN#rd",target:"_blank",rel:"noopener noreferrer"},h={href:"http://mp.weixin.qq.com/s?__biz=MzU3MTAzNTMzMQ==&mid=2247484621&idx=1&sn=fd24ef403c138292aff808daedcc87dd&chksm=fce71f61cb9096779257b53aab53cd985e35d5ed17fdd53be6aa953a2d97c3734aa0ba49a309&token=798393379&lang=zh_CN#rd",target:"_blank",rel:"noopener noreferrer"},y={href:"https://mp.weixin.qq.com/s?__biz=MzU3MTAzNTMzMQ==&mid=2247484170&idx=1&sn=56ae689c23d75649009d59dd2a9b97c2&chksm=fce718a6cb9091b071a8f8c71c096fcd91bf3b764f96f02e09e6e345df455b25573124874a92&token=798393379&lang=zh_CN#rd",target:"_blank",rel:"noopener noreferrer"},_={href:"http://mp.weixin.qq.com/s?__biz=MzU3MTAzNTMzMQ==&mid=2247484181&idx=1&sn=4518fb3d9c60bdb04428f044cc75af85&chksm=fce718b9cb9091af543634b338cbc998bf3014f5a230244e7340d92169a58c150ae07211d713&token=798393379&lang=zh_CN#rd",target:"_blank",rel:"noopener noreferrer"},w={href:"http://mp.weixin.qq.com/s?__biz=MzU3MTAzNTMzMQ==&mid=2247484155&idx=1&sn=9ae1870f6ed9bd69a2c0745fbfddcb2a&chksm=fce71957cb909041b418ae24ae9dca5f64c8546f8db230c9b5a1d8d21828f2b8e8171568f12a&token=798393379&lang=zh_CN#rd",target:"_blank",rel:"noopener noreferrer"},x={href:"http://mp.weixin.qq.com/s?__biz=MzU3MTAzNTMzMQ==&mid=2247484151&idx=1&sn=96394bfb6cd4d009ab32d5605fc96d25&chksm=fce7195bcb90904d31a2f6a4f3367455c81715944ec0c89b4dc2f4502e27fecbbf37a780bef6&token=798393379&lang=zh_CN#rd",target:"_blank",rel:"noopener noreferrer"};function S(A,j){const a=i("ExternalLinkIcon");return e(),o("div",null,[d,c(" more "),v,n("ul",null,[n("li",null,[s("å·¥ç¨‹ï¼š"),n("a",m,[s("https://github.com/liuyueyi/spring-boot-demo"),t(a)])]),n("li",null,[s("æºç : "),n("a",b,[s("https://github.com/liuyueyi/spring-boot-demo/tree/master/spring-boot/014-spel-aop"),t(a)])])]),g,n("ul",null,[n("li",null,[n("a",f,[s("SpringBootåŸºç¡€ç³»åˆ—AOPæ— æ³•æ‹¦æˆªæ¥å£ä¸Šæ³¨è§£åœºæ™¯å…¼å®¹"),t(a)])]),n("li",null,[n("a",h,[s("SpringBootåŸºç¡€ç³»åˆ—å®ç°ä¸€ä¸ªç®€å•çš„åˆ†å¸ƒå¼å®šæ—¶ä»»åŠ¡(åº”ç”¨ç¯‡)"),t(a)])]),n("li",null,[n("a",y,[s("SpringBootåŸºç¡€ç¯‡AOPä¹‹æ‹¦æˆªä¼˜å…ˆçº§è¯¦è§£"),t(a)])]),n("li",null,[n("a",_,[s("SpringBootåº”ç”¨ç¯‡ä¹‹AOPå®ç°æ—¥å¿—åŠŸèƒ½"),t(a)])]),n("li",null,[n("a",w,[s("SpringBootåŸºç¡€ç¯‡AOPä¹‹é«˜çº§ä½¿ç”¨æŠ€èƒ½"),t(a)])]),n("li",null,[n("a",x,[s("SpringBootåŸºç¡€ç¯‡AOPä¹‹åŸºæœ¬ä½¿ç”¨å§¿åŠ¿å°ç»“"),t(a)])])])])}const P=p(r,[["render",S],["__file","06.210608-SpringBootåŸºç¡€ç¯‡AOPç»“åˆSpELå®ç°æ—¥å¿—è¾“å‡ºçš„æ³¨æ„äº‹é¡¹.html.vue"]]);export{P as default};
