import{_ as p,V as e,W as o,a1 as c,X as n,Y as s,Z as t,a0 as l,F as i}from"./framework-23f3cf9b.js";const u="/tutorial/imgs/191223/00.gif",r="/tutorial/imgs/191223/01.jpg",k="/tutorial/imgs/191223/02.jpg",d="/tutorial/imgs/191223/03.jpg",g={},v=n("p",null,"æœ¬ç¯‡ä¸ºSpringSecurityçš„ç¬¬ä¸€ç¯‡ï¼Œä¸»è¦æ¥ä»‹ç»ä¸‹ä»€ä¹ˆæ˜¯SpringSecurityï¼Œä»¥åŠåœ¨springbootä¸­å¦‚ä½•ä½¿ç”¨å®ƒ",-1),m=n("h2",{id:"i-åŸºæœ¬çŸ¥è¯†ç‚¹",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#i-åŸºæœ¬çŸ¥è¯†ç‚¹","aria-hidden":"true"},"#"),s(" I. åŸºæœ¬çŸ¥è¯†ç‚¹")],-1),b={href:"https://docs.spring.io/spring-security/site/docs/5.2.2.BUILD-SNAPSHOT/reference/htmlsingle/#community-help",target:"_blank",rel:"noopener noreferrer"},h=l(`<p>ä¸‹é¢æ˜¯å®˜æ–¹ä»‹ç»</p><blockquote><p>Spring Security is a powerful and highly customizable authentication and access-control framework. It is the de-facto standard for securing Spring-based applications.</p></blockquote><blockquote><p>Spring Security is a framework that focuses on providing both authentication and authorization to Java applications. Like all Spring projects, the real power of Spring Security is found in how easily it can be extended to meet custom requirements</p></blockquote><p>ç”¨å›½è¯­ï¼Œç®€å•æŠ½è±¡çš„è¯´ä¸€ä¸‹å®ƒçš„å®šä¹‰</p><ul><li>å¾ˆğŸ‚çš„è®¤è¯å’Œè®¿é—®æƒé™æ ¡éªŒæ¡†æ¶</li></ul><p>é‚£ä¹ˆå…·ä½“èƒ½å¹²å˜›ï¼Ÿ</p><ul><li>ç”¨æˆ·ç™»å½•è®¤è¯ï¼šç”¨æˆ·å+å¯†ç ç™»å½•ï¼Œç¡®å®šç”¨æˆ·èº«ä»½</li><li>ç”¨æˆ·è®¿é—®é‰´æƒï¼ˆå¸¸è§çš„ACLè®¿é—®æ§åˆ¶åˆ—è¡¨ï¼ŒRBACè§’è‰²è®¿é—®æ§åˆ¶ï¼‰ï¼šåˆ¤å®šæ˜¯å¦æœ‰æƒé™è®¿é—®æŸä¸ªèµ„æº</li><li>å®‰å…¨ä¿æŠ¤ï¼ˆCSRFè·¨ç«™ç‚¹æ”»å‡»,Session Fixationä¼šè¯å›ºå®šæ”»å‡»...ï¼‰</li></ul><h2 id="ii-åˆä½“éªŒ" tabindex="-1"><a class="header-anchor" href="#ii-åˆä½“éªŒ" aria-hidden="true">#</a> II. åˆä½“éªŒ</h2><p>æ¥ä¸‹æ¥æˆ‘ä»¬çœ‹ä¸€ä¸‹å†springbootä¸­å¦‚ä½•ä½¿ç”¨springsecurity</p><h3 id="_1-é…ç½®" tabindex="-1"><a class="header-anchor" href="#_1-é…ç½®" aria-hidden="true">#</a> 1. é…ç½®</h3><p>é¦–å…ˆå¾—æ˜¯spring booté¡¹ç›®ï¼Œç„¶åæ·»åŠ ä¸Šsecurityçš„ä¾èµ–å³å¯ï¼Œç›¸å¯¹å®Œæ•´çš„pomé…ç½®å¦‚ä¸‹ï¼ˆæ³¨æ„æˆ‘ä»¬ä½¿ç”¨çš„springbootç‰ˆæœ¬ä¸º2.2.1.RELEASEï¼‰</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>parent</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-parent<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.2.1.RELEASE<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>relativePath</span><span class="token punctuation">/&gt;</span></span> <span class="token comment">&lt;!-- lookup parent from repository --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>parent</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>properties</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>project.build.sourceEncoding</span><span class="token punctuation">&gt;</span></span>UTF-8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>project.build.sourceEncoding</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>project.reporting.outputEncoding</span><span class="token punctuation">&gt;</span></span>UTF-8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>project.reporting.outputEncoding</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>java.version</span><span class="token punctuation">&gt;</span></span>1.8<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>java.version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>properties</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-security<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-web<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>build</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>pluginManagement</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>plugins</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>plugin</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
                <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-maven-plugin<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>plugin</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>plugins</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>pluginManagement</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>build</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>repositories</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>repository</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span><span class="token punctuation">&gt;</span></span>spring-snapshots<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>id</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>Spring Snapshots<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>url</span><span class="token punctuation">&gt;</span></span>https://repo.spring.io/libs-snapshot-local<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>url</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>snapshots</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>enabled</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>enabled</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>snapshots</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>repository</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>repository</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span><span class="token punctuation">&gt;</span></span>spring-milestones<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>id</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>Spring Milestones<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>url</span><span class="token punctuation">&gt;</span></span>https://repo.spring.io/libs-milestone-local<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>url</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>snapshots</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>enabled</span><span class="token punctuation">&gt;</span></span>false<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>enabled</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>snapshots</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>repository</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>repository</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>id</span><span class="token punctuation">&gt;</span></span>spring-releases<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>id</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>Spring Releases<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>url</span><span class="token punctuation">&gt;</span></span>https://repo.spring.io/libs-release-local<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>url</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>snapshots</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>enabled</span><span class="token punctuation">&gt;</span></span>false<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>enabled</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>snapshots</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>repository</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>repositories</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2-å®ä¾‹demo" tabindex="-1"><a class="header-anchor" href="#_2-å®ä¾‹demo" aria-hidden="true">#</a> 2. å®ä¾‹demo</h3><p>ä¸Šé¢é…ç½®å®Œä¹‹åï¼Œå•¥éƒ½ä¸éœ€è¦å¹²ï¼Œé¡¹ç›®å·²ç»æ¥å…¥äº†spring securityï¼›é¡¹ç›®ä¸­çš„æœåŠ¡éƒ½éœ€è¦ç™»å½•ä¹‹åæ‰èƒ½è®¿é—®</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token comment">// ç¨‹åºå¯åŠ¨ç±»</span>
<span class="token annotation punctuation">@SpringBootApplication</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Application</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">SpringApplication</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">Application</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// rest æœåŠ¡</span>
<span class="token annotation punctuation">@RestController</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">IndexRest</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span>path <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">&quot;/&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;/index&quot;</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">index</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">&quot;hello this is index!&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span>path <span class="token operator">=</span> <span class="token string">&quot;hello&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">hello</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">&quot;welcome &quot;</span> <span class="token operator">+</span> name<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å½“æˆ‘ä»¬éœ€è¦è®¿é—®é¦–é¡µæ—¶ï¼Œä¼šå‘ç°ç›´æ¥302é‡å®šå‘åˆ°ç™»å½•é¡µé¢äº†ï¼Œå¦‚ä¸‹å›¾</p><figure><img src="`+u+'" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>spring securityé»˜è®¤ç»™æˆ‘ä»¬ç”Ÿæˆäº†ä¸€ä¸ªç”¨æˆ·åä¸ºuserï¼Œå¯†ç ä¸ºæ§åˆ¶å°ä¸­è¾“å‡ºçš„ä¸€è¡Œæ—¥å¿—å¦‚<code>Using generated security password: aa410186-5c04-4282-b217-507ffb1f61eb</code></p><p>ç™»å½•ä¹‹åä¼šé‡å®šå‘å›æˆ‘ä»¬ä¹‹å‰è®¿é—®çš„urlï¼Œé€šè¿‡æŠ“åŒ…å¯ä»¥çœ‹åˆ°ï¼Œç™»å½•æˆåŠŸä¹‹åï¼Œä¼šè®¾ç½®è¯·æ±‚æ–¹çš„cookieï¼Œåç»­çš„è¯·æ±‚æºå¸¦cookieæ¥è¡¨æ˜ç”¨æˆ·èº«ä»½</p><figure><img src="'+r+'" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><h3 id="_3-åŸºæœ¬é…ç½®" tabindex="-1"><a class="header-anchor" href="#_3-åŸºæœ¬é…ç½®" aria-hidden="true">#</a> 3. åŸºæœ¬é…ç½®</h3><p>ä¸Šé¢è™½ç„¶æ¼”ç¤ºäº†ä¸€ä¸ªhello worldçš„åˆä½“éªŒé¡¹ç›®ï¼Œä½†æ˜¯è¿™ä¸ªé»˜è®¤çš„ç”¨æˆ·å/å¯†ç æœ‰ç‚¹é¬¼ç•œï¼Œé»˜è®¤çš„é…ç½®ä¸»è¦æ¥è‡ªäº<code>org.springframework.boot.autoconfigure.security.SecurityProperties.User</code>ï¼Œä¸‹é¢æ˜¯æˆªå›¾ï¼ˆæ‰€ä»¥å‰é¢çš„ç”¨æˆ·åä¸ºuserï¼‰</p><figure><img src="'+k+`" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>æ¥ä¸‹æ¥æˆ‘ä»¬éœ€è¦é…ç½®ä¸ºå¯¹äººç±»å‹å¥½çš„æ–¹å¼ï¼Œåœ¨é¡¹ç›®çš„é…ç½®æ–‡ä»¶<code>application.yml</code>ä¸­ï¼ŒæŒ‡å®šç™»å½•çš„ç”¨æˆ·å/å¯†ç </p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">security</span><span class="token punctuation">:</span>
    <span class="token key atrule">user</span><span class="token punctuation">:</span>
      <span class="token key atrule">name</span><span class="token punctuation">:</span> yihuihui
      <span class="token key atrule">password</span><span class="token punctuation">:</span> <span class="token number">123456</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>é‡å¯æµ‹è¯•é¡¹ç›®ï¼Œä½¿ç”¨æ–°çš„ç”¨æˆ·å/å¯†ç ï¼ˆyihuihui/123456)å°±å¯ä»¥ç™»å½•æˆåŠŸäº†;</p><h3 id="_4-ç”¨æˆ·èº«ä»½è·å–" tabindex="-1"><a class="header-anchor" href="#_4-ç”¨æˆ·èº«ä»½è·å–" aria-hidden="true">#</a> 4. ç”¨æˆ·èº«ä»½è·å–</h3><p>ä¸Šé¢è™½ç„¶æ˜¯ä¸€ä¸ªç®€å•çš„caseï¼Œä½†è¿˜æœ‰ä¸€ç‚¹ä¸å¾—ä¸æä¸€ä¸‹ï¼Œåœ¨æˆ‘çš„æ¥å£ä¸­ï¼Œè™½ç„¶çŸ¥é“ä½ ç™»å½•äº†ï¼Œä½†æ€ä¹ˆçŸ¥é“ä½ æ˜¯è°å‘¢ï¼Ÿ</p><p>æˆ‘ä»¬å¯ä»¥ç›´æ¥é€šè¿‡<code>HttpServletRequest#getRemoteUser()</code>çš„æ–¹æ³•æ¥è·å–ç™»å½•ç”¨æˆ·ï¼› æˆ–è€…é€šè¿‡<code>SecurityContextHolder.getContext().getAuthentication().getPrincipal()</code>æ¥è·å–æˆæƒä¿¡æ¯</p><p>æˆ‘ä»¬æ¥å†™ä¸€ä¸ªé€šç”¨æ–¹æ³•</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">ServletRequestAttributes</span><span class="token punctuation">)</span> <span class="token class-name">RequestContextHolder</span><span class="token punctuation">.</span><span class="token function">getRequestAttributes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getRemoteUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// or</span>
<span class="token keyword">public</span> <span class="token class-name">Object</span> <span class="token function">getUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">SecurityContextHolder</span><span class="token punctuation">.</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getAuthentication</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getPrincipal</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç„¶åç¨å¾®æ”¹ä¸€ä¸‹æˆ‘ä»¬çš„æœåŠ¡æ¥å£</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span>path <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">&quot;/&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;/index&quot;</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">index</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token string">&quot;hello this is index! welcome &quot;</span> <span class="token operator">+</span> <span class="token function">getUser</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å†æ¬¡è®¿é—®ä¹‹åï¼Œç»“æœå¦‚ä¸‹</p><figure><img src="`+d+'" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><h3 id="_5-å°ç»“" tabindex="-1"><a class="header-anchor" href="#_5-å°ç»“" aria-hidden="true">#</a> 5. å°ç»“</h3><p>æœ¬æ–‡ä¸»è¦æ˜¯spring securityç³»åˆ—çš„èµ·æºç¯‡ï¼Œç¬¬ä¸€èŠ‚ä»‹ç»äº†ä¸‹ä»€ä¹ˆæ˜¯SpringSecurityï¼Œæœ‰ä»€ä¹ˆç‰¹ç‚¹</p><ul><li>spring securityæ˜¯ä¸€ä¸ªå¾ˆğŸ‚ğŸºçš„è®¤è¯ï¼ˆå¯ä»¥ç®€å•ç†è§£ä¸ºç™»å½•éªŒè¯ï¼‰å’Œé‰´æƒï¼ˆå¯ç®€å•ç†è§£ä¸ºè®¿é—®æ§åˆ¶ï¼‰æ¡†æ¶</li><li>ä¸‰å¤§ç‰¹ç‚¹ï¼šç™»å½• + é‰´æƒ + å®‰å…¨é˜²æŠ¤</li></ul><p>ç¬¬äºŒèŠ‚ä»‹ç»äº†ä¸€ä¸ªç®€å•å…¥é—¨çš„HelloWorldå®ä¾‹</p><ul><li>springbooté¡¹ç›®ï¼Œæ·»åŠ ä¾èµ– <code>spring-boot-starter-security</code>ï¼› æ‰€æœ‰çš„httpæ¥å£è®¿é—®éƒ½éœ€è¦ç™»å½•ï¼Œé»˜è®¤æä¾›ä¸€ä¸ªç”¨æˆ·åä¸ºuserï¼Œå¯†ç ä¸ºæ§åˆ¶å°è¾“å‡ºçš„UUIDå­—ç¬¦ä¸²</li><li>é€šè¿‡<code>spring.security.user.name</code>å’Œ<code>spring.security.user.password</code>æ¥æŒ‡å®šç”¨æˆ·åå¯†ç </li><li>é€šè¿‡<code>HttpServletRequest#getRemoteUser()</code>è·å–ç™»å½•ç”¨æˆ·</li></ul><p>é‚£ä¹ˆé—®é¢˜æ¥äº†ï¼Œä»€ä¹ˆç³»ç»Ÿå¯èƒ½åªæœ‰ä¸€ä¸ªç”¨æˆ·å‘¢ï¼Ÿè¦å¤šç”¨æˆ·æ€ä¹ˆåŠï¼Ÿä¸åŒçš„ç”¨æˆ·ä¸åŒçš„æƒé™æ€ä¹ˆåŠï¼ŸæŸäº›æ¥å£æ‰€æœ‰äººéƒ½å¯ä»¥è®¿é—®åˆæ€ä¹ˆåŠï¼Ÿ</p><h2 id="ii-å…¶ä»–" tabindex="-1"><a class="header-anchor" href="#ii-å…¶ä»–" aria-hidden="true">#</a> II. å…¶ä»–</h2><h3 id="_0-é¡¹ç›®" tabindex="-1"><a class="header-anchor" href="#_0-é¡¹ç›®" aria-hidden="true">#</a> 0. é¡¹ç›®</h3>',43),f={href:"https://github.com/liuyueyi/spring-boot-demo",target:"_blank",rel:"noopener noreferrer"},y={href:"https://github.com/liuyueyi/spring-boot-demo/tree/master/spring-security/000-basic-demo",target:"_blank",rel:"noopener noreferrer"};function _(S,x){const a=i("ExternalLinkIcon");return e(),o("div",null,[v,c(" more "),m,n("blockquote",null,[n("p",null,[s("å®˜æ–¹æ–‡æ¡£: "),n("a",b,[s("https://docs.spring.io/spring-security/site/docs/5.2.2.BUILD-SNAPSHOT/reference/htmlsingle/#community-help"),t(a)])])]),h,n("ul",null,[n("li",null,[s("å·¥ç¨‹ï¼š"),n("a",f,[s("https://github.com/liuyueyi/spring-boot-demo"),t(a)])]),n("li",null,[s("ä»£ç : "),n("a",y,[s("https://github.com/liuyueyi/spring-boot-demo/tree/master/spring-security/000-basic-demo"),t(a)])])])])}const q=p(g,[["render",_],["__file","191223-SpringBoot-æ•´åˆ-SpringSecurity-ä¹‹èµ·æºç¯‡ï¼ˆé›¶ï¼‰.html.vue"]]);export{q as default};
