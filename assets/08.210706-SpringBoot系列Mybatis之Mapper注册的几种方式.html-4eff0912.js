import{_ as p,V as e,W as o,a1 as c,X as n,Y as s,Z as t,a0 as i,F as l}from"./framework-23f3cf9b.js";const u={},r=n("p",null,"SpringBooté¡¹ç›®ä¸­å€ŸåŠ©Mybatisæ¥æ“ä½œæ•°æ®åº“ï¼Œå¯¹å¤§éƒ¨åˆ†javaæŠ€æœ¯æ ˆçš„å°ä¼™ä¼´æ¥è¯´ï¼Œå¹¶ä¸ä¼šé™Œç”Ÿï¼›æˆ‘ä»¬çŸ¥é“ï¼Œä½¿ç”¨mybatisï¼Œä¸€èˆ¬ä¼šæœ‰ä¸‹é¢å‡ ä¸ª",-1),k=n("ul",null,[n("li",null,"Entity: æ•°æ®åº“å®ä½“ç±»"),n("li",null,"Mapper: dbæ“ä½œæ¥å£"),n("li",null,"Service: æœåŠ¡ç±»")],-1),d=n("p",null,'æœ¬ç‰‡åšæ–‡ä¸­çš„æ³¨è§£ï¼Œæ”¾åœ¨Mapperä¸Šï¼Œä½ çŸ¥é“æ³¨å†ŒMapperæœ‰å‡ ç§æ–¹å¼ä¹ˆï¼ˆè¿™ä¸ªé—®é¢˜åƒä¸åƒ"èŒ´"å­—æœ‰å‡ ä¸ªå†™æ³•ğŸ˜¬ï¼‰',-1),v=i(`<h2 id="i-ç¯å¢ƒå‡†å¤‡" tabindex="-1"><a class="header-anchor" href="#i-ç¯å¢ƒå‡†å¤‡" aria-hidden="true">#</a> I. ç¯å¢ƒå‡†å¤‡</h2><h3 id="_1-æ•°æ®åº“å‡†å¤‡" tabindex="-1"><a class="header-anchor" href="#_1-æ•°æ®åº“å‡†å¤‡" aria-hidden="true">#</a> 1. æ•°æ®åº“å‡†å¤‡</h3><p>ä½¿ç”¨mysqlä½œä¸ºæœ¬æ–‡çš„å®ä¾‹æ•°æ®åº“ï¼Œæ–°å¢ä¸€å¼ è¡¨</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> <span class="token identifier"><span class="token punctuation">\`</span>money<span class="token punctuation">\`</span></span> <span class="token punctuation">(</span>
  <span class="token identifier"><span class="token punctuation">\`</span>id<span class="token punctuation">\`</span></span> <span class="token keyword">int</span><span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">)</span> <span class="token keyword">unsigned</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">AUTO_INCREMENT</span><span class="token punctuation">,</span>
  <span class="token identifier"><span class="token punctuation">\`</span>name<span class="token punctuation">\`</span></span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">DEFAULT</span> <span class="token string">&#39;&#39;</span> <span class="token keyword">COMMENT</span> <span class="token string">&#39;ç”¨æˆ·å&#39;</span><span class="token punctuation">,</span>
  <span class="token identifier"><span class="token punctuation">\`</span>money<span class="token punctuation">\`</span></span> <span class="token keyword">int</span><span class="token punctuation">(</span><span class="token number">26</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">DEFAULT</span> <span class="token string">&#39;0&#39;</span> <span class="token keyword">COMMENT</span> <span class="token string">&#39;é’±&#39;</span><span class="token punctuation">,</span>
  <span class="token identifier"><span class="token punctuation">\`</span>is_deleted<span class="token punctuation">\`</span></span> <span class="token keyword">tinyint</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">DEFAULT</span> <span class="token string">&#39;0&#39;</span><span class="token punctuation">,</span>
  <span class="token identifier"><span class="token punctuation">\`</span>create_at<span class="token punctuation">\`</span></span> <span class="token keyword">timestamp</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">DEFAULT</span> <span class="token keyword">CURRENT_TIMESTAMP</span> <span class="token keyword">COMMENT</span> <span class="token string">&#39;åˆ›å»ºæ—¶é—´&#39;</span><span class="token punctuation">,</span>
  <span class="token identifier"><span class="token punctuation">\`</span>update_at<span class="token punctuation">\`</span></span> <span class="token keyword">timestamp</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">DEFAULT</span> <span class="token keyword">CURRENT_TIMESTAMP</span> <span class="token keyword">ON</span> <span class="token keyword">UPDATE</span> <span class="token keyword">CURRENT_TIMESTAMP</span> <span class="token keyword">COMMENT</span> <span class="token string">&#39;æ›´æ–°æ—¶é—´&#39;</span><span class="token punctuation">,</span>
  <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span> <span class="token punctuation">(</span><span class="token identifier"><span class="token punctuation">\`</span>id<span class="token punctuation">\`</span></span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token keyword">KEY</span> <span class="token identifier"><span class="token punctuation">\`</span>name<span class="token punctuation">\`</span></span> <span class="token punctuation">(</span><span class="token identifier"><span class="token punctuation">\`</span>name<span class="token punctuation">\`</span></span><span class="token punctuation">)</span>
<span class="token punctuation">)</span> <span class="token keyword">ENGINE</span><span class="token operator">=</span><span class="token keyword">InnoDB</span> <span class="token keyword">AUTO_INCREMENT</span><span class="token operator">=</span><span class="token number">1</span> <span class="token keyword">DEFAULT</span> <span class="token keyword">CHARSET</span><span class="token operator">=</span>utf8mb4<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2-é¡¹ç›®ç¯å¢ƒ" tabindex="-1"><a class="header-anchor" href="#_2-é¡¹ç›®ç¯å¢ƒ" aria-hidden="true">#</a> 2. é¡¹ç›®ç¯å¢ƒ</h3><p>æœ¬æ–‡å€ŸåŠ© <code>SpringBoot 2.2.1.RELEASE</code> + <code>maven 3.5.3</code> + <code>IDEA</code>è¿›è¡Œå¼€å‘</p><p>pomä¾èµ–å¦‚ä¸‹</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.mybatis.spring.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>mybatis-spring-boot-starter<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.2.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>mysql<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>mysql-connector-java<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>dbé…ç½®ä¿¡æ¯ <code>application.yml</code></p><div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">datasource</span><span class="token punctuation">:</span>
    <span class="token key atrule">url</span><span class="token punctuation">:</span> jdbc<span class="token punctuation">:</span>mysql<span class="token punctuation">:</span>//127.0.0.1<span class="token punctuation">:</span>3306/story<span class="token punctuation">?</span>useUnicode=true<span class="token important">&amp;characterEncoding=UTF-8&amp;useSSL=false&amp;serverTimezone=Asia/Shanghai</span>
    <span class="token key atrule">username</span><span class="token punctuation">:</span> root
    <span class="token key atrule">password</span><span class="token punctuation">:</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="ii-å®ä¾‹æ¼”ç¤º" tabindex="-1"><a class="header-anchor" href="#ii-å®ä¾‹æ¼”ç¤º" aria-hidden="true">#</a> II. å®ä¾‹æ¼”ç¤º</h2><p>å‰é¢åŸºç¡€ç¯å¢ƒæ­å»ºå®Œæˆï¼Œæ¥ä¸‹æ¥å‡†å¤‡ä¸‹Mybatisçš„Entity,Mapperç­‰åŸºç¡€ç±»</p><h3 id="_1-å®ä½“ç±»-mapperç±»" tabindex="-1"><a class="header-anchor" href="#_1-å®ä½“ç±»-mapperç±»" aria-hidden="true">#</a> 1. å®ä½“ç±»,Mapperç±»</h3><p>æ•°æ®åº“å®ä½“ç±»<code>MoneyPo</code></p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Data</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MoneyPo</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">Integer</span> id<span class="token punctuation">;</span>

    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>

    <span class="token keyword">private</span> <span class="token class-name">Long</span> money<span class="token punctuation">;</span>

    <span class="token keyword">private</span> <span class="token class-name">Integer</span> isDeleted<span class="token punctuation">;</span>

    <span class="token keyword">private</span> <span class="token class-name">Timestamp</span> createAt<span class="token punctuation">;</span>

    <span class="token keyword">private</span> <span class="token class-name">Timestamp</span> updateAt<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¯¹åº”çš„Mapperæ¥å£ï¼ˆè¿™é‡Œç›´æ¥ä½¿ç”¨æ³¨è§£çš„æ–¹å¼æ¥å®ç°CURDï¼‰</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">MoneyMapper</span> <span class="token punctuation">{</span>

    <span class="token doc-comment comment">/**
     * ä¿å­˜æ•°æ®ï¼Œå¹¶ä¿å­˜ä¸»é”®id
     *
     * <span class="token keyword">@param</span> <span class="token parameter">po</span>
     * <span class="token keyword">@return</span> int
     */</span>
    <span class="token annotation punctuation">@Options</span><span class="token punctuation">(</span>useGeneratedKeys <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">,</span> keyProperty <span class="token operator">=</span> <span class="token string">&quot;po.id&quot;</span><span class="token punctuation">,</span> keyColumn <span class="token operator">=</span> <span class="token string">&quot;id&quot;</span><span class="token punctuation">)</span>
    <span class="token annotation punctuation">@Insert</span><span class="token punctuation">(</span><span class="token string">&quot;insert into money (name, money, is_deleted) values (#{po.name}, #{po.money}, #{po.isDeleted})&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">int</span> <span class="token function">save</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Param</span><span class="token punctuation">(</span><span class="token string">&quot;po&quot;</span><span class="token punctuation">)</span> <span class="token class-name">MoneyPo</span> po<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token doc-comment comment">/**
     * æ›´æ–°
     *
     * <span class="token keyword">@param</span> <span class="token parameter">id</span>    id
     * <span class="token keyword">@param</span> <span class="token parameter">money</span> é’±
     * <span class="token keyword">@return</span> int
     */</span>
    <span class="token annotation punctuation">@Update</span><span class="token punctuation">(</span><span class="token string">&quot;update money set \`money\`=#{money} where id = #{id}&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">int</span> <span class="token function">update</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Param</span><span class="token punctuation">(</span><span class="token string">&quot;id&quot;</span><span class="token punctuation">)</span> <span class="token keyword">int</span> id<span class="token punctuation">,</span> <span class="token annotation punctuation">@Param</span><span class="token punctuation">(</span><span class="token string">&quot;money&quot;</span><span class="token punctuation">)</span> <span class="token keyword">long</span> money<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token doc-comment comment">/**
     * åˆ é™¤æ•°æ®
     *
     * <span class="token keyword">@param</span> <span class="token parameter">id</span> id
     * <span class="token keyword">@return</span> int
     */</span>
    <span class="token annotation punctuation">@Delete</span><span class="token punctuation">(</span><span class="token string">&quot;delete from money where id = #{id}&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">int</span> <span class="token function">delete</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Param</span><span class="token punctuation">(</span><span class="token string">&quot;id&quot;</span><span class="token punctuation">)</span> <span class="token keyword">int</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token doc-comment comment">/**
     * ä¸»é”®æŸ¥è¯¢
     *
     * <span class="token keyword">@param</span> <span class="token parameter">id</span> id
     * <span class="token keyword">@return</span> <span class="token punctuation">{</span><span class="token keyword">@link</span> <span class="token reference"><span class="token class-name">MoneyPo</span></span><span class="token punctuation">}</span>
     */</span>
    <span class="token annotation punctuation">@Select</span><span class="token punctuation">(</span><span class="token string">&quot;select * from money where id = #{id}&quot;</span><span class="token punctuation">)</span>
    <span class="token annotation punctuation">@Results</span><span class="token punctuation">(</span>id <span class="token operator">=</span> <span class="token string">&quot;moneyResultMap&quot;</span><span class="token punctuation">,</span> value <span class="token operator">=</span> <span class="token punctuation">{</span>
            <span class="token annotation punctuation">@Result</span><span class="token punctuation">(</span>property <span class="token operator">=</span> <span class="token string">&quot;id&quot;</span><span class="token punctuation">,</span> column <span class="token operator">=</span> <span class="token string">&quot;id&quot;</span><span class="token punctuation">,</span> id <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">,</span> jdbcType <span class="token operator">=</span> <span class="token class-name">JdbcType</span><span class="token punctuation">.</span><span class="token constant">INTEGER</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token annotation punctuation">@Result</span><span class="token punctuation">(</span>property <span class="token operator">=</span> <span class="token string">&quot;name&quot;</span><span class="token punctuation">,</span> column <span class="token operator">=</span> <span class="token string">&quot;name&quot;</span><span class="token punctuation">,</span> jdbcType <span class="token operator">=</span> <span class="token class-name">JdbcType</span><span class="token punctuation">.</span><span class="token constant">VARCHAR</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token annotation punctuation">@Result</span><span class="token punctuation">(</span>property <span class="token operator">=</span> <span class="token string">&quot;money&quot;</span><span class="token punctuation">,</span> column <span class="token operator">=</span> <span class="token string">&quot;money&quot;</span><span class="token punctuation">,</span> jdbcType <span class="token operator">=</span> <span class="token class-name">JdbcType</span><span class="token punctuation">.</span><span class="token constant">INTEGER</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token annotation punctuation">@Result</span><span class="token punctuation">(</span>property <span class="token operator">=</span> <span class="token string">&quot;isDeleted&quot;</span><span class="token punctuation">,</span> column <span class="token operator">=</span> <span class="token string">&quot;is_deleted&quot;</span><span class="token punctuation">,</span> jdbcType <span class="token operator">=</span> <span class="token class-name">JdbcType</span><span class="token punctuation">.</span><span class="token constant">TINYINT</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token annotation punctuation">@Result</span><span class="token punctuation">(</span>property <span class="token operator">=</span> <span class="token string">&quot;createAt&quot;</span><span class="token punctuation">,</span> column <span class="token operator">=</span> <span class="token string">&quot;create_at&quot;</span><span class="token punctuation">,</span> jdbcType <span class="token operator">=</span> <span class="token class-name">JdbcType</span><span class="token punctuation">.</span><span class="token constant">TIMESTAMP</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token annotation punctuation">@Result</span><span class="token punctuation">(</span>property <span class="token operator">=</span> <span class="token string">&quot;updateAt&quot;</span><span class="token punctuation">,</span> column <span class="token operator">=</span> <span class="token string">&quot;update_at&quot;</span><span class="token punctuation">,</span> jdbcType <span class="token operator">=</span> <span class="token class-name">JdbcType</span><span class="token punctuation">.</span><span class="token constant">TIMESTAMP</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token class-name">MoneyPo</span> <span class="token function">getById</span><span class="token punctuation">(</span><span class="token annotation punctuation">@Param</span><span class="token punctuation">(</span><span class="token string">&quot;id&quot;</span><span class="token punctuation">)</span> <span class="token keyword">int</span> id<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¯¹åº”çš„Serviceç±»</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Slf4j</span>
<span class="token annotation punctuation">@Service</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MoneyService</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">private</span> <span class="token class-name">MoneyMapper</span> moneyMapper<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">basicTest</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">int</span> id <span class="token operator">=</span> <span class="token function">save</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;save {}&quot;</span><span class="token punctuation">,</span> <span class="token function">getById</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">boolean</span> update <span class="token operator">=</span> <span class="token function">update</span><span class="token punctuation">(</span>id<span class="token punctuation">,</span> <span class="token number">202L</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;update {}, {}&quot;</span><span class="token punctuation">,</span> update<span class="token punctuation">,</span> <span class="token function">getById</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">boolean</span> delete <span class="token operator">=</span> <span class="token function">delete</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
        log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">&quot;delete {}, {}&quot;</span><span class="token punctuation">,</span> delete<span class="token punctuation">,</span> <span class="token function">getById</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token keyword">int</span> <span class="token function">save</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">MoneyPo</span> po <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MoneyPo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        po<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">&quot;ä¸€ç°ç°blog&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        po<span class="token punctuation">.</span><span class="token function">setMoney</span><span class="token punctuation">(</span><span class="token number">101L</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        po<span class="token punctuation">.</span><span class="token function">setIsDeleted</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        moneyMapper<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span>po<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> po<span class="token punctuation">.</span><span class="token function">getId</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token keyword">boolean</span> <span class="token function">update</span><span class="token punctuation">(</span><span class="token keyword">int</span> id<span class="token punctuation">,</span> <span class="token keyword">long</span> newMoney<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">int</span> ans <span class="token operator">=</span> moneyMapper<span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span>id<span class="token punctuation">,</span> newMoney<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> ans <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token keyword">boolean</span> <span class="token function">delete</span><span class="token punctuation">(</span><span class="token keyword">int</span> id<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> moneyMapper<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token class-name">MoneyPo</span> <span class="token function">getById</span><span class="token punctuation">(</span><span class="token keyword">int</span> id<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> moneyMapper<span class="token punctuation">.</span><span class="token function">getById</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2-æ³¨å†Œæ–¹å¼" tabindex="-1"><a class="header-anchor" href="#_2-æ³¨å†Œæ–¹å¼" aria-hidden="true">#</a> 2. æ³¨å†Œæ–¹å¼</h3><p>æ³¨æ„ï¼Œä¸Šé¢å†™å®Œä¹‹åï¼Œè‹¥ä¸é€šè¿‡ä¸‹é¢çš„å‡ ç§æ–¹å¼æ³¨å†ŒMapperæ¥å£ï¼Œé¡¹ç›®å¯åŠ¨ä¼šå¤±è´¥ï¼Œæç¤ºæ‰¾ä¸åˆ°MoneyMapperå¯¹åº”çš„bean</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>Field moneyMapper in com.git.hui.boot.mybatis.service.MoneyService required a bean of type &#39;com.git.hui.boot.mybatis.mapper.MoneyMapper&#39; that could not be found.
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h4 id="_2-1-mapperscanæ³¨å†Œæ–¹å¼" tabindex="-1"><a class="header-anchor" href="#_2-1-mapperscanæ³¨å†Œæ–¹å¼" aria-hidden="true">#</a> 2.1 @MapperScanæ³¨å†Œæ–¹å¼</h4><p>åœ¨é…ç½®ç±»orå¯åŠ¨ç±»ä¸Šï¼Œæ·»åŠ <code>@MapperScan</code>æ³¨è§£æ¥æŒ‡å®šMapperæ¥å£çš„åŒ…è·¯å¾„ï¼Œä»è€Œå®ç°Mapperæ¥å£çš„æ³¨å†Œ</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@MapperScan</span><span class="token punctuation">(</span>basePackages <span class="token operator">=</span> <span class="token string">&quot;com.git.hui.boot.mybatis.mapper&quot;</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@SpringBootApplication</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Application</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> <span class="token class-name">Application</span><span class="token punctuation">(</span><span class="token class-name">MoneyService</span> moneyService<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        moneyService<span class="token punctuation">.</span><span class="token function">basicTest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">SpringApplication</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">Application</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ‰§è¡Œä¹‹åè¾“å‡ºç»“æœå¦‚ä¸‹</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>2021-07-06 19:12:57.984  INFO 1876 --- [           main] c.g.h.boot.mybatis.service.MoneyService  : save MoneyPo(id=557, name=ä¸€ç°ç°blog, money=101, isDeleted=0, createAt=2021-07-06 19:12:57.0, updateAt=2021-07-06 19:12:57.0)
2021-07-06 19:12:58.011  INFO 1876 --- [           main] c.g.h.boot.mybatis.service.MoneyService  : update true, MoneyPo(id=557, name=ä¸€ç°ç°blog, money=202, isDeleted=0, createAt=2021-07-06 19:12:57.0, updateAt=2021-07-06 19:12:57.0)
2021-07-06 19:12:58.039  INFO 1876 --- [           main] c.g.h.boot.mybatis.service.MoneyService  : delete true, null
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ³¨æ„ï¼š</p><ul><li>basePackages: ä¼ å…¥Mapperçš„åŒ…è·¯å¾„ï¼Œæ•°ç»„ï¼Œå¯ä»¥ä¼ å…¥å¤šä¸ª</li><li>åŒ…è·¯å¾„æ”¯æŒæ­£åˆ™ï¼Œå¦‚<code>com.git.hui.boot.*.mapper</code><ul><li>ä¸Šé¢è¿™ç§æ–¹å¼ï¼Œå¯ä»¥é¿å…è®©æˆ‘ä»¬æ‰€æœ‰çš„mapperéƒ½æ”¾åœ¨ä¸€ä¸ªåŒ…è·¯å¾„ä¸‹ï¼Œä»è€Œå¯¼è‡´é˜…è¯»ä¸å‹å¥½</li></ul></li></ul><h4 id="_2-2-mapper-æ³¨å†Œæ–¹å¼" tabindex="-1"><a class="header-anchor" href="#_2-2-mapper-æ³¨å†Œæ–¹å¼" aria-hidden="true">#</a> 2.2 @Mapper æ³¨å†Œæ–¹å¼</h4><p>å‰é¢çš„<code>@MapperScan</code>æŒ‡å®šmapperçš„åŒ…è·¯å¾„ï¼Œè¿™ä¸ªæ³¨è§£åˆ™ç›´æ¥æ”¾åœ¨Mapperæ¥å£ä¸Š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Mapper</span>
<span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">MoneyMapper</span> <span class="token punctuation">{</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æµ‹è¯•è¾“å‡ºçœç•¥...</p><h4 id="_2-3-mapperscannerconfigureræ³¨å†Œæ–¹å¼" tabindex="-1"><a class="header-anchor" href="#_2-3-mapperscannerconfigureræ³¨å†Œæ–¹å¼" aria-hidden="true">#</a> 2.3 MapperScannerConfigureræ³¨å†Œæ–¹å¼</h4><p>ä½¿ç”¨<code>MapperScannerConfigurer</code>æ¥å®ç°mapperæ¥å£æ³¨å†Œï¼Œåœ¨å¾ˆä¹…ä»¥å‰ï¼Œè¿˜æ˜¯ä½¿ç”¨Springçš„xmlè¿›è¡Œbeançš„å£°æ˜çš„æ—¶å€™ï¼Œmybatisçš„mapperå°±æ˜¯è¿™ä¹ˆç©çš„</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>org.mybatis.spring.mapper.MapperScannerConfigurer<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>basePackage<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>xxx<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>sqlSessionFactoryBeanName<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>sqlSessionFactory<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å¯¹åº”çš„javaä»£ç å¦‚ä¸‹ï¼š</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Configuration</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AutoConfig</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Bean</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">&quot;sqlSessionFactory&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">SqlSessionFactory</span> <span class="token function">sqlSessionFactory</span><span class="token punctuation">(</span><span class="token class-name">DataSource</span> dataSource<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        <span class="token class-name">SqlSessionFactoryBean</span> bean <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SqlSessionFactoryBean</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        bean<span class="token punctuation">.</span><span class="token function">setDataSource</span><span class="token punctuation">(</span>dataSource<span class="token punctuation">)</span><span class="token punctuation">;</span>
        bean<span class="token punctuation">.</span><span class="token function">setMapperLocations</span><span class="token punctuation">(</span>
                <span class="token comment">// è®¾ç½®mybatisçš„xmlæ‰€åœ¨ä½ç½®ï¼Œè¿™é‡Œä½¿ç”¨mybatisæ³¨è§£æ–¹å¼ï¼Œæ²¡æœ‰é…ç½®xmlæ–‡ä»¶</span>
                <span class="token keyword">new</span> <span class="token class-name">PathMatchingResourcePatternResolver</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getResources</span><span class="token punctuation">(</span><span class="token string">&quot;classpath*:mapping/*.xml&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> bean<span class="token punctuation">.</span><span class="token function">getObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Bean</span><span class="token punctuation">(</span><span class="token string">&quot;sqlSessionTemplate&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">SqlSessionTemplate</span> <span class="token function">sqlSessionTemplate</span><span class="token punctuation">(</span><span class="token class-name">SqlSessionFactory</span> storySqlSessionFactory<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">SqlSessionTemplate</span><span class="token punctuation">(</span>storySqlSessionFactory<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Bean</span>
    <span class="token keyword">public</span> <span class="token class-name">MapperScannerConfigurer</span> <span class="token function">mapperScannerConfigurer</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">MapperScannerConfigurer</span> mapperScannerConfigurer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MapperScannerConfigurer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        mapperScannerConfigurer<span class="token punctuation">.</span><span class="token function">setBasePackage</span><span class="token punctuation">(</span><span class="token string">&quot;com.git.hui.boot.mybatis.mapper&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        mapperScannerConfigurer<span class="token punctuation">.</span><span class="token function">setSqlSessionFactoryBeanName</span><span class="token punctuation">(</span><span class="token string">&quot;sqlSessionFactory&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        mapperScannerConfigurer<span class="token punctuation">.</span><span class="token function">setSqlSessionTemplateBeanName</span><span class="token punctuation">(</span><span class="token string">&quot;sqlSessionTemplate&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> mapperScannerConfigurer<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æµ‹è¯•è¾“å‡ºçœç•¥</p><h3 id="_3-å°ç»“" tabindex="-1"><a class="header-anchor" href="#_3-å°ç»“" aria-hidden="true">#</a> 3. å°ç»“</h3><p>æœ¬æ–‡ä¸»è¦ä»‹ç»Mybatisä¸­Mapperæ¥å£çš„ä¸‰ç§æ³¨å†Œæ–¹å¼ï¼Œå…¶ä¸­å¸¸è§çš„ä¸¤ç§æ³¨è§£æ–¹å¼</p><ul><li><code>@MapperScan</code>: æŒ‡å®šMapperæ¥å£çš„åŒ…è·¯å¾„</li><li><code>@Mapper</code>: æ”¾åœ¨mapperæ¥å£ä¸Š</li><li><code>MapperScannerConfigurer</code>: ç¼–ç¨‹æ–¹å¼æ³¨å†Œ</li></ul><p>é‚£ä¹ˆç–‘é—®æ¥äº†ï¼Œä¸ºå•¥è¦ä»‹ç»è¿™ä¸‰ç§æ–¹å¼ï¼Œæˆ‘ä»¬å®é™…çš„ä¸šåŠ¡å¼€å‘ä¸­ï¼Œå‰é¢ä¸¤ä¸ªåŸºæœ¬ä¸Šå°±æ»¡è¶³äº†ï¼›ä»€ä¹ˆåœºæ™¯ä¼šç”¨åˆ°ç¬¬ä¸‰ç§æ–¹å¼ï¼Ÿ</p><ul><li>å¦‚å†™é€šç”¨çš„Mapperï¼ˆç±»ä¼¼Mybatis-Plusä¸­çš„BaseMapperï¼‰</li><li>å¦‚ä¸€ä¸ªMapperï¼Œå¤šæ•°æ®æºçš„åœºæ™¯ï¼ˆå¦‚ä¸»ä»åº“ï¼Œå†·çƒ­åº“ï¼Œdbçš„æ“ä½œmapperä¸€è‡´ï¼Œä½†æ˜¯åº•å±‚çš„æ•°æ®æºä¸åŒï¼‰</li></ul><p>æœ¬æ–‡åˆ°æ­¤ç»“æŸï¼Œå…³äºä¸Šé¢ä¸¤ä¸ªåœºæ™¯çš„å®ä¾‹caseï¼Œåé¢æœ‰ç©ºå†è¡¥ä¸Šï¼Œæˆ‘æ˜¯ä¸€ç°ç°ï¼Œæœ‰ç¼˜å†è§ï¼ˆæ¬¢è¿å…³æ³¨é•¿è‰çš„å…¬ä¼—å·<code>ä¸€ç°ç°blog</code>ï¼‰</p><h2 id="iii-ä¸èƒ½é”™è¿‡çš„æºç å’Œç›¸å…³çŸ¥è¯†ç‚¹" tabindex="-1"><a class="header-anchor" href="#iii-ä¸èƒ½é”™è¿‡çš„æºç å’Œç›¸å…³çŸ¥è¯†ç‚¹" aria-hidden="true">#</a> III. ä¸èƒ½é”™è¿‡çš„æºç å’Œç›¸å…³çŸ¥è¯†ç‚¹</h2><h3 id="_0-é¡¹ç›®" tabindex="-1"><a class="header-anchor" href="#_0-é¡¹ç›®" aria-hidden="true">#</a> 0. é¡¹ç›®</h3>`,47),m={href:"https://github.com/liuyueyi/spring-boot-demo",target:"_blank",rel:"noopener noreferrer"},b={href:"https://github.com/liuyueyi/spring-boot-demo/tree/master/spring-boot/104-mybatis-ano",target:"_blank",rel:"noopener noreferrer"};function y(g,h){const a=l("ExternalLinkIcon");return e(),o("div",null,[r,k,d,c(" more "),v,n("ul",null,[n("li",null,[s("å·¥ç¨‹ï¼š"),n("a",m,[s("https://github.com/liuyueyi/spring-boot-demo"),t(a)])]),n("li",null,[s("æºç ï¼š"),n("a",b,[s("https://github.com/liuyueyi/spring-boot-demo/tree/master/spring-boot/104-mybatis-ano"),t(a)])])])])}const q=p(u,[["render",y],["__file","08.210706-SpringBootç³»åˆ—Mybatisä¹‹Mapperæ³¨å†Œçš„å‡ ç§æ–¹å¼.html.vue"]]);export{q as default};
