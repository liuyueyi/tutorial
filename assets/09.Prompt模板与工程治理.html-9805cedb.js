import{_ as e,V as t,W as o,$ as l,Y as i,F as n}from"./framework-b1bd8911.js";const p="/tutorial/imgs/column/llm/09-1.webp",a="/tutorial/imgs/column/llm/09-2.webp",s={},d=i(`<p>当我们开发的系统被真实用户使用时，很快就会发现：</p><ul><li>Prompt 不是一次性工作（初期设计总会有遗漏，比如没考虑 “资料重复” 的处理）</li><li>Prompt 会不断演进（新的业务场景出现，需要新增约束；模型升级后，可能需要调整规则）</li><li>而且每一次修改，都可能悄悄改变系统行为</li></ul><p>这意味着，单纯的硬编码提示词会存在很多的工程性问题</p><blockquote><p><strong>Prompt 必须进入工程治理体系。</strong></p></blockquote><hr><h3 id="_5-1-prompt-是-软代码-而不是文案" tabindex="-1"><a class="header-anchor" href="#_5-1-prompt-是-软代码-而不是文案" aria-hidden="true">#</a> 5.1 Prompt 是“软代码”，而不是文案</h3><p>在很多早期项目中，Prompt 往往以这样的形式存在：</p><ul><li>写在代码里的一段字符串</li><li>存在 Notion / 文档中的一段描述</li><li>甚至只存在于某个同事的“经验里”</li></ul><p>这在 Demo 阶段或许还能接受，但在企业知识库助手这样的系统中，这是<strong>极其危险的</strong>。</p><p>如在企业知识库助手中：</p><ul><li>Prompt 的一次微调（比如删掉 “禁止推断”）</li><li>可能直接影响业务决策（员工根据错误推断的内容执行操作）</li></ul><p>这种不可控性，很容易产生不可预知的后果，而产生这些问题的原因也很简单：</p><ul><li><p>Prompt 决定模型的<strong>行为边界</strong></p></li><li><p>Prompt 的一次微调，可能直接影响：</p><ul><li>回答是否合规</li><li>是否产生幻觉</li><li>是否越权推断</li></ul></li></ul><p>从工程视角看，你必须接受一个事实：</p><blockquote><p><strong>Prompt 是一种“软代码（Soft Code）”。</strong></p></blockquote><p>它和代码的区别只在于：</p><ul><li>不是由编译器执行</li><li>而是由模型“解释执行”</li></ul><p>因此你需要像对待代码一样对待 Prompt：</p><ul><li>版本管理：记录每一次修改的时间、修改人、修改原因（例如 “v1.2 新增‘资料冲突处理规则’，解决财务制度矛盾问题”）</li><li>可回滚：当某次修改导致错误率上升时，能快速切回上一个稳定版本</li><li>可审计：在出现问题时，能追溯到某版 Prompt 的设计逻辑，分析漏洞来源</li></ul><hr><h3 id="_5-2-什么是-prompt-模板-不是字符串复用" tabindex="-1"><a class="header-anchor" href="#_5-2-什么是-prompt-模板-不是字符串复用" aria-hidden="true">#</a> 5.2 什么是 Prompt 模板？（不是字符串复用）</h3><p>很多人第一次听到“Prompt 模板”时，会误以为：</p><blockquote><p><em>不就是把 Prompt 抽成一个格式化字符串吗？</em></p></blockquote><p>这只是最表层的理解。</p><p>更准确地说：</p><blockquote><p><strong>Prompt 模板是一种“设计决策的结构化表达”。</strong></p></blockquote><p>它的核心目标不是复用文本，而是<strong>固定认知结构</strong>。</p><h4 id="一个最小但正确的-prompt-模板结构" tabindex="-1"><a class="header-anchor" href="#一个最小但正确的-prompt-模板结构" aria-hidden="true">#</a> 一个最小但正确的 Prompt 模板结构</h4><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code>PROMPT_TEMPLATE <span class="token operator">=</span> <span class="token triple-quoted-string string">&quot;&quot;&quot;
【Role】
{role}

【Task】
{task}

【Constraints】
{constraints}

【Output Schema】
{output_schema}


【参考资料】
{reference_materials}
&quot;&quot;&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>请注意： 这里的每一块，并不是为了“好看”，而是为了<strong>工程可控性</strong>。</p><p>在工程实践中，这意味着：</p><ul><li>Prompt 可以被 review：团队成员能清晰看到 “Role/Task/Constraints” 等模块的设计，针对性提出意见（比如 “Constraints 漏了‘禁止修改数字’”）</li><li>Prompt 可以被测试：通过填充不同变量（如不同的 reference_materials），编写自动化用例验证 “是否符合约束”（例如用例 1：输入无相关资料的问题，检查是否输出 “不知道”）</li><li>Prompt 变化是可追踪的：当需要调整时，只需修改对应模块的变量（如更新 constraints 列表），而不是改写整个 Prompt，确保改动可预期</li></ul><p>例如，针对不同部门的知识库（如 “人力资源”“财务”），可以通过填充不同的 role 变量（“你是人力资源知识库助手，专注于考勤、福利等制度”），实现 “一套模板，多场景复用”，同时保持核心约束的一致性。</p><hr><h3 id="_5-3-prompt-模板解决的-其实是-无意识漂移" tabindex="-1"><a class="header-anchor" href="#_5-3-prompt-模板解决的-其实是-无意识漂移" aria-hidden="true">#</a> 5.3 Prompt 模板解决的，其实是“无意识漂移”</h3><p>Prompt 最危险的地方在于：<strong>它可以在不被察觉的情况下改变系统行为。</strong></p><p>例如：</p><ul><li>新增一句“请尽量详细说明”</li><li>删除一句“不确定时请说明不知道”</li><li>调整一下角色描述语气</li></ul><p>这些修改往往是：</p><ul><li>出于好意</li><li>为了解决一个局部问题</li></ul><p>但它们可能导致：</p><blockquote><p><strong>整个系统的行为分布发生变化。</strong></p></blockquote><p>Prompt 模板的真正价值就在于：</p><blockquote><p><strong>把“为什么要这么写”固化成结构，而不是留在人的记忆里。</strong></p></blockquote><hr><h3 id="_5-4-prompt-模板在系统中的位置-结构图" tabindex="-1"><a class="header-anchor" href="#_5-4-prompt-模板在系统中的位置-结构图" aria-hidden="true">#</a> 5.4 Prompt 模板在系统中的位置（结构图）</h3><p>下面这张图非常关键，它说明了 Prompt 在整个 LLM 系统中的真实位置：</p><figure><img src="`+p+'" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure>',48),u=i('<p>这意味着：</p><ul><li>Prompt <strong>不是直接对着模型写的</strong></li><li>而是： <ul><li>介于「业务意图」与「模型行为」之间的<strong>中间层</strong></li></ul></li></ul><p>它是<strong>第一道、也是最脆弱的一道约束机制</strong>。</p><hr><h3 id="_5-5-prompt-工程-prompt-治理" tabindex="-1"><a class="header-anchor" href="#_5-5-prompt-工程-prompt-治理" aria-hidden="true">#</a> 5.5 Prompt 工程 ≠ Prompt 治理</h3><p>到这里，很多读者会产生一个误解：</p><blockquote><p><em>“那我只要设计一个好模板就行了？”</em></p></blockquote><p>答案是：<strong>远远不够。</strong></p><p>Prompt 工程解决的是：</p><ul><li><strong>如何设计一次合理的约束</strong></li></ul><p>而 Prompt 治理要解决的是：</p><ul><li><strong>这些约束如何在时间维度上不被破坏</strong></li></ul><hr><h4 id="一个典型的-prompt-失控路径" tabindex="-1"><a class="header-anchor" href="#一个典型的-prompt-失控路径" aria-hidden="true">#</a> 一个典型的 Prompt 失控路径</h4>',14),m=i('<figure><img src="'+a+`" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>注意： 这条路径中，<strong>没有任何一步是“错误操作”</strong>。</p><p>但最终结果却是：</p><ul><li>行为不可预测</li><li>无法解释为什么“最近变差了”</li></ul><hr><h3 id="_5-6-工程治理中的-prompt-最佳实践" tabindex="-1"><a class="header-anchor" href="#_5-6-工程治理中的-prompt-最佳实践" aria-hidden="true">#</a> 5.6 工程治理中的 Prompt 最佳实践</h3><p>在企业级 LLM 应用中，Prompt 至少应当具备以下治理能力：</p><h4 id="_1️-prompt-必须版本化" tabindex="-1"><a class="header-anchor" href="#_1️-prompt-必须版本化" aria-hidden="true">#</a> 1️. Prompt 必须版本化</h4><ul><li><p>每一次修改都有版本号</p></li><li><p>可以明确回答：</p><blockquote><p>“这个行为是从哪个版本开始变化的？”</p></blockquote></li></ul><h4 id="_2-prompt-必须可审计" tabindex="-1"><a class="header-anchor" href="#_2-prompt-必须可审计" aria-hidden="true">#</a> 2. Prompt 必须可审计</h4><ul><li><p>你要能回答：</p><ul><li>谁改的？</li><li>为什么改？</li><li>解决什么问题？</li></ul></li></ul><h4 id="_3️-prompt-必须可测试" tabindex="-1"><a class="header-anchor" href="#_3️-prompt-必须可测试" aria-hidden="true">#</a> 3️. Prompt 必须可测试</h4><ul><li><p>至少要能在一组固定输入上：</p><ul><li>对比修改前 / 后输出差异</li></ul></li></ul><h4 id="_4-prompt-只负责-静态约束" tabindex="-1"><a class="header-anchor" href="#_4-prompt-只负责-静态约束" aria-hidden="true">#</a> 4. Prompt 只负责“静态约束”</h4><ul><li><p>不要试图在 Prompt 中：</p><ul><li>记忆历史</li><li>管理状态</li><li>承载大量知识</li></ul></li></ul><blockquote><p><strong>Prompt 的职责边界越清晰，系统就越稳定。</strong></p></blockquote><hr><h3 id="_5-7-prompt-模板示例-工程化" tabindex="-1"><a class="header-anchor" href="#_5-7-prompt-模板示例-工程化" aria-hidden="true">#</a> 5.7 Prompt 模板示例（工程化）</h3><div class="language-python line-numbers-mode" data-ext="py"><pre class="language-python"><code>PROMPT_TEMPLATE <span class="token operator">=</span> <span class="token triple-quoted-string string">&quot;&quot;&quot;
【Role】
你是企业知识库助手，只能基于已提供的企业文档回答问题。

【Task】
回答用户关于公司制度的问题。

【Constraints】
- 不允许编造不存在的制度
- 不确定时必须明确说明“不知道”
- 不得基于个人经验推断

【Output Format】
- 结论
- 依据的文档片段
- 不确定性说明（如有）
&quot;&quot;&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>这个模板的价值不在于“写得好不好”，而在于：</p><ul><li>行为边界清晰</li><li>失败路径明确</li><li>可被团队理解与维护</li></ul><h3 id="_5-3-本部分总结-prompt-是约束-不是智能来源" tabindex="-1"><a class="header-anchor" href="#_5-3-本部分总结-prompt-是约束-不是智能来源" aria-hidden="true">#</a> 5.3 本部分总结：Prompt 是约束，不是智能来源</h3><p>通过这一部分，你应该已经建立起这样一种认知：</p><ul><li>Prompt 不是魔法</li><li>Prompt 也不是文案</li><li>Prompt 更不是“越复杂越好”</li></ul><p>而是：</p><blockquote><p><strong>LLM 系统中的第一层行为约束机制。</strong></p></blockquote><p>但你也应该已经隐约意识到一个事实：</p><blockquote><p>即使 Prompt 再稳定， 只要对话持续、信息累积， 系统仍然会开始失控。</p></blockquote><p>这并不是 Prompt 设计的问题，而是<strong>上下文与记忆无法靠 Prompt 解决</strong>的问题。</p><hr><blockquote><p><strong>下一部分，我们将进入 Context 与 Memory： 为什么“对话一变长，系统就一定会出问题”？</strong></p></blockquote>`,31);function c(h,v){const r=n("Mermaid");return t(),o("div",null,[d,l(r,{id:"mermaid-269",code:"eJyVVN1u2kgYvd+nGKnqFckSwrJlrVWlTdhKK3V/tNs7tKqMGQdrwfbapk2kXhBaEkJI6IpsusqGJiilpZVK0iRtCCbkZTxjc5U+Qj8P2EDVi9ZzNZ6Zc86c78y3oPFqCt2JfYXgu34d0f0z0q2Q1o51vnbV3aHHl/ZW0z4xSfFJv7DhrB1bF1WYXnXLVvc/Ut52Snk7f07KHVJcYRhCmtf1GBaRJKtZ4xcliZEopdPcNRwSIyKe0g1N+Qtz12Zmo9FkaDidvi8ljRQ3qy5OaUpWTuIkF5pRFycBBUXDY3iigL/Bgo8nzIaikcQkXvgjvClRkY3p+1haSBlcQkknJwnSyoIkjDOEcUSM+AzfCbM3EjNfopgXDEmRxxFFwPQgYBq5Icx8EaKSNT5yNSpGcNRHDEejOOyZ8lmIsmJMuMq7w8dLJN3h4SV5PcVrGr/EhVHYx4wC5Cg+bXL5kL5dtpvrEB/L3Ozv5uibPCkeOb0qWe2wjT/ErfYOKdUHa98ntODNuawuyVjX0e/476yk4QyWDbZw1S2S53k3iv8e0Y2Wbe45rXqQrBRI69ze2qPFx1fdtT85jhvlbXr6JpqL/6YpGdVAtFmntUun1YNjDHD4/w7OqGnewCiGdWlB9rn+70D4bbNKnz4KkFKT5pZJJQ/cQxYvhOwe3q2t9uv+k1P6utF/9cy9dbtktdfp9ipgELODAuj27Z+Rc/QQnhI7MsckzsfnIY54ETSyfUyCf9Y2HzkHBV/W5gqpHJPDc+ewFrA7z2ltj9bqlvku4NpaaAzMGWr0c8zI5hlZLD7SwEDd6U/yPUXg3Yz6POyu8NLti1aAbjZI5cA5PIMiDaFHiZ4wgO7mbLM4VuEYI/0xDq3CrVi9bLU7g2XG9MeSbuAMmsMp/p6kaOhXFmtfRHWDdLZYDXaDdO0FHIdKWBe7QxGjR+Dnzqk3SKFAT5rOiwM3KyyAgzBa5hnJddlGN+vx93vV8jCn/Zzp9P5x9++vktUVaGdoIjVQOfu4BytoslLQ/ZzWy0FV2aWc01PyuDgealen97S8mn8Nlrj/kC+bVA77OdZnz0xS2h93nxROnOUtcMNZbwCk/WoZeAYbwAmoIpjhWQ3AD6xezXm7/QDdio+jeJaC2yrWeCOr4aChqHfVYIZfvGvAo5b1T6ZGN5bSGN3yugL0wbFO+G3IHZNdJgRd4APc9eHm"}),u,l(r,{id:"mermaid-334",code:"eJytlMlO21AUhvc8xZUQO9KSRFBkVUhMlSpVqELtKmLhxNdgYezINgUqFswQAgktKAwCmjA0FDVhKENCEvMule+1vcor9NqOMyAWldp4E9vn/N+55/w+LC9OhEZoSQHvBpsA+bW0AJy8R8U4yu5p+Ui5uIcWi2ZK1XIzxvINnklruZh5HDN3fxiZ7/rJg50U4mlZ7oMs4ITwuDIgMhCwHM9TzdDLtrOwVVYkcRRSzW2+zk7GW7n1THCMMkL5wpOtkjguMJChvG3hyUZBWYHhOj2WZf2wrarHtr8Ktbm3f6UncfJogx4Mwlp9jN/H+thGPf8TvVZWFBTPBOSGRxQqKPJMI0AQFVgPoK2rCggy1uUCGFomrZfoKcoP/FVIJ2GERF6UqOaOjo6m2lRy6HEe387qZ1EyFfPgUC9s4sMFtJYwHjNa4VjfW8Czd2RCSD3XYxd2XncArRygdBS8l8SxsPI6KL3seitwCkfz9Y/KxRW8ndQL38iUHdVyMTJEUVRtnh5PF+gJaLkH7TELesaHAVKzxuW8nf4BjoVFiZam7BdvuElXVMvd4O07koG38uXiGmEY6QW08rWi7g7XLrXHRvRaCJy4NPdn8NUcWnUSdm3BboYBA3ACDI7zUHYRznsUT5JYgjBnCob6BS1ta6Xd5yi9NqWPtCVp7p6gpWv9fNa4yKD4qS3YB3moQNArCizPhZQqBUeiaPXMSbIOsrOJi3FNPTBuE89R+mxKf8BIrVkdy62j+IV5tIBvo7bgRyEsQYbo00Eegh44Qn/iRMllOUfA9/da/oqwDHUTLT+gkyscS1dYromr3jBSp2hxEf86M9LHxBv6XB7vxBzDmNtZ82jHDrSsGfi9lyzn4hU3OR+ylVF80PLxmqGyqpFNEbjjEeAYDG3EnNr0o5geWSZxVjGu4as+tavQSut6KUuU8ZaK9s8c22q5KE5YRrA6kr/GkUsjvWSkI3ZqP/C8IE2z5Gqez5ya5ydOlTi5TKRJf9BlnPzXMyoqHZE9RXri+ofkT1ePZBk6soL3f+rZlL6xNA14Ogh5bwAMuUZoCK/4yDZEJdbnxpJxNsQ6g8eJjHE8V4n1u7GyMkVm6rCcHaBItCCHaQkKirsH6h/Z60TmPkPKa62uypfvbKKnir7/ruj/d8U/kiboUQ=="}),m])}const g=e(s,[["render",c],["__file","09.Prompt模板与工程治理.html.vue"]]);export{g as default};
