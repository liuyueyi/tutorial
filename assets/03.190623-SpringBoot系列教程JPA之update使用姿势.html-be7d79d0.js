import{_ as p,V as o,W as c,a1 as i,Y as n,Z as s,$ as t,X as e,F as l}from"./framework-eef79181.js";const u="/tutorial/imgs/190623/00.jpg",r="/tutorial/imgs/190623/01.jpg",d="/tutorial/imgs/190623/02.jpg",k="/tutorial/imgs/190623/03.jpg",m="/tutorial/imgs/190623/04.jpg",v="/tutorial/imgs/190623/05.jpg",b="/tutorial/imgs/190623/06.jpg",g="/tutorial/imgs/190623/07.jpg",y={},h=n("p",null,"ä¸Šé¢ä¸¤ç¯‡åšæ–‡æ‹‰å¼€äº†jpaä½¿ç”¨å§¿åŠ¿çš„é¢çº±ä¸€è§’ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬ç»§ç»­å¾€ä¸‹æ‰¯ï¼Œæ•°æ®æ’å…¥dbä¹‹åï¼Œå¹¶ä¸æ˜¯è¯´å°±ä¸€å±‚ä¸å˜äº†ï¼Œå°±å¥½æ¯”æˆ‘åœ¨é“¶è¡Œå¼€äº†æˆ·ï¼Œå½“ç„¶æ˜¯å‡†å¤‡å¾€é‡Œé¢å­˜é’±äº†ï¼Œæœ‰å­˜å°±æœ‰å–ï¼ˆç‰¹åˆ«æ˜¯å½“ä¸‹é“¶è¡Œåˆ©ç‡è¿™ä¹ˆä½è¿˜ä¸å¦‚ä¹°æ¯”ç‰¹å¸å±¯ç€ï¼Œæˆªæ­¢19å¹´6æœˆ22æ—¥ï¼Œbtcå·²ç»çªç ´1.1w$ï¼Œå¯æƒœæ²¡é’±ä¹°ğŸ˜­ï¼‰è¿™å°±æ˜¯æˆ‘ä»¬ä»Šå¤©çš„ä¸»é¢˜ï¼Œæ•°æ®æ›´æ–°--updateçš„ä½¿ç”¨å§¿åŠ¿",-1),E=e('<p>é€šè¿‡æœ¬ç¯‡åšæ–‡ï¼Œæ‚¨è‡³å°‘å¯ä»¥é€‰åˆ°</p><ul><li><code>save()</code> ç›´æ¥æ ¹æ®idæ¥ä¿®æ”¹è®°å½•</li><li>åˆ©ç”¨<code>jpl</code> å®ç°æŸ¥è¯¢ä¿®æ”¹çš„ä½¿ç”¨å§¿åŠ¿</li><li>åˆè¯†äº‹ç‰©çš„ç¥ç§˜é¢çº±</li></ul><h2 id="i-ç¯å¢ƒå‡†å¤‡" tabindex="-1"><a class="header-anchor" href="#i-ç¯å¢ƒå‡†å¤‡" aria-hidden="true">#</a> I. ç¯å¢ƒå‡†å¤‡</h2><p>åœ¨å¼€å§‹ä¹‹å‰ï¼Œå½“ç„¶å¾—å…ˆå‡†å¤‡å¥½åŸºç¡€ç¯å¢ƒï¼Œå¦‚å®‰è£…æµ‹è¯•ä½¿ç”¨mysqlï¼Œåˆ›å»ºSpringBooté¡¹ç›®å·¥ç¨‹ï¼Œè®¾ç½®å¥½é…ç½®ä¿¡æ¯ç­‰ï¼Œå…³äºæ­å»ºé¡¹ç›®çš„è¯¦æƒ…å¯ä»¥å‚è€ƒå‰ä¸€ç¯‡æ–‡ç« </p>',4),f={href:"http://spring.hhui.top/spring-blog/2019/06/12/190612-SpringBoot%E7%B3%BB%E5%88%97%E6%95%99%E7%A8%8BJPA%E4%B9%8B%E5%9F%BA%E7%A1%80%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/",target:"_blank",rel:"noopener noreferrer"},B={href:"http://spring.hhui.top/spring-blog/2019/06/14/190614-SpringBoot%E7%B3%BB%E5%88%97%E6%95%99%E7%A8%8BJPA%E4%B9%8B%E6%96%B0%E5%A2%9E%E8%AE%B0%E5%BD%95%E4%BD%BF%E7%94%A8%E5%A7%BF%E5%8A%BF/",target:"_blank",rel:"noopener noreferrer"},_=e('<p>ä¸‹é¢ç®€å•çš„çœ‹ä¸€ä¸‹æ¼”ç¤ºæ·»åŠ è®°å½•çš„è¿‡ç¨‹ä¸­ï¼Œéœ€è¦çš„é…ç½®</p><h3 id="_1-è¡¨å‡†å¤‡" tabindex="-1"><a class="header-anchor" href="#_1-è¡¨å‡†å¤‡" aria-hidden="true">#</a> 1. è¡¨å‡†å¤‡</h3><p>æ²¿ç”¨å‰ä¸€ç¯‡çš„è¡¨ï¼Œç»“æ„å¦‚ä¸‹</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> <span class="token identifier"><span class="token punctuation">`</span>money<span class="token punctuation">`</span></span> <span class="token punctuation">(</span>\n  <span class="token identifier"><span class="token punctuation">`</span>id<span class="token punctuation">`</span></span> <span class="token keyword">int</span><span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">)</span> <span class="token keyword">unsigned</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">AUTO_INCREMENT</span><span class="token punctuation">,</span>\n  <span class="token identifier"><span class="token punctuation">`</span>name<span class="token punctuation">`</span></span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">DEFAULT</span> <span class="token string">&#39;&#39;</span> <span class="token keyword">COMMENT</span> <span class="token string">&#39;ç”¨æˆ·å&#39;</span><span class="token punctuation">,</span>\n  <span class="token identifier"><span class="token punctuation">`</span>money<span class="token punctuation">`</span></span> <span class="token keyword">int</span><span class="token punctuation">(</span><span class="token number">26</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">DEFAULT</span> <span class="token string">&#39;0&#39;</span> <span class="token keyword">COMMENT</span> <span class="token string">&#39;é’±&#39;</span><span class="token punctuation">,</span>\n  <span class="token identifier"><span class="token punctuation">`</span>is_deleted<span class="token punctuation">`</span></span> <span class="token keyword">tinyint</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">DEFAULT</span> <span class="token string">&#39;0&#39;</span><span class="token punctuation">,</span>\n  <span class="token identifier"><span class="token punctuation">`</span>create_at<span class="token punctuation">`</span></span> <span class="token keyword">timestamp</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">DEFAULT</span> <span class="token keyword">CURRENT_TIMESTAMP</span> <span class="token keyword">COMMENT</span> <span class="token string">&#39;åˆ›å»ºæ—¶é—´&#39;</span><span class="token punctuation">,</span>\n  <span class="token identifier"><span class="token punctuation">`</span>update_at<span class="token punctuation">`</span></span> <span class="token keyword">timestamp</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">DEFAULT</span> <span class="token keyword">CURRENT_TIMESTAMP</span> <span class="token keyword">ON</span> <span class="token keyword">UPDATE</span> <span class="token keyword">CURRENT_TIMESTAMP</span> <span class="token keyword">COMMENT</span> <span class="token string">&#39;æ›´æ–°æ—¶é—´&#39;</span><span class="token punctuation">,</span>\n  <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span> <span class="token punctuation">(</span><span class="token identifier"><span class="token punctuation">`</span>id<span class="token punctuation">`</span></span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n  <span class="token keyword">KEY</span> <span class="token identifier"><span class="token punctuation">`</span>name<span class="token punctuation">`</span></span> <span class="token punctuation">(</span><span class="token identifier"><span class="token punctuation">`</span>name<span class="token punctuation">`</span></span><span class="token punctuation">)</span>\n<span class="token punctuation">)</span> <span class="token keyword">ENGINE</span><span class="token operator">=</span><span class="token keyword">InnoDB</span> <span class="token keyword">AUTO_INCREMENT</span><span class="token operator">=</span><span class="token number">1</span> <span class="token keyword">DEFAULT</span> <span class="token keyword">CHARSET</span><span class="token operator">=</span>utf8mb4<span class="token punctuation">;</span>\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2-é¡¹ç›®é…ç½®" tabindex="-1"><a class="header-anchor" href="#_2-é¡¹ç›®é…ç½®" aria-hidden="true">#</a> 2. é¡¹ç›®é…ç½®</h3><p>é…ç½®ä¿¡æ¯ï¼Œä¸ä¹‹å‰æœ‰ä¸€ç‚¹ç‚¹åŒºåˆ«ï¼Œæˆ‘ä»¬æ–°å¢äº†æ›´è¯¦ç»†çš„æ—¥å¿—æ‰“å°ï¼›æœ¬ç¯‡ä¸»è¦ç›®æ ‡é›†ä¸­åœ¨æ·»åŠ è®°å½•çš„ä½¿ç”¨å§¿åŠ¿ï¼Œå¯¹äºé…ç½®è¯´æ˜ï¼Œåé¢å•ç‹¬è¿›è¡Œè¯´æ˜</p><div class="language-properties line-numbers-mode" data-ext="properties"><pre class="language-properties"><code><span class="token comment">## DataSource</span>\n<span class="token key attr-name">spring.datasource.url</span><span class="token punctuation">=</span><span class="token value attr-value">jdbc:mysql://127.0.0.1:3306/story?useUnicode=true&amp;characterEncoding=UTF-8&amp;useSSL=false</span>\n<span class="token key attr-name">spring.datasource.driver-class-name</span><span class="token punctuation">=</span><span class="token value attr-value">com.mysql.jdbc.Driver</span>\n<span class="token key attr-name">spring.datasource.username</span><span class="token punctuation">=</span><span class="token value attr-value">root</span>\n<span class="token key attr-name">spring.datasource.password</span><span class="token punctuation">=</span>\n<span class="token comment">## jpaç›¸å…³é…ç½®</span>\n<span class="token key attr-name">spring.jpa.database</span><span class="token punctuation">=</span><span class="token value attr-value">MYSQL</span>\n<span class="token key attr-name">spring.jpa.hibernate.ddl-auto</span><span class="token punctuation">=</span><span class="token value attr-value">none</span>\n<span class="token key attr-name">spring.jpa.show-sql</span><span class="token punctuation">=</span><span class="token value attr-value">true</span>\n<span class="token key attr-name">spring.jackson.serialization.indent_output</span><span class="token punctuation">=</span><span class="token value attr-value">true</span>\n<span class="token key attr-name">spring.jpa.hibernate.naming.physical-strategy</span><span class="token punctuation">=</span><span class="token value attr-value">org.hibernate.boot.model.naming.PhysicalNamingStrategyStandardImpl</span>\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-æ•°æ®å‡†å¤‡" tabindex="-1"><a class="header-anchor" href="#_3-æ•°æ®å‡†å¤‡" aria-hidden="true">#</a> 3. æ•°æ®å‡†å¤‡</h3><p>æ•°æ®ä¿®æ”¹å˜›ï¼Œæ‰€ä»¥æˆ‘ä»¬å…ˆå‘è¡¨é‡Œé¢æ’å…¥ä¸¤æ¡æ•°æ®ï¼Œç”¨äºåé¢çš„æ“ä½œ</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">INSERT</span> <span class="token keyword">INTO</span> <span class="token identifier"><span class="token punctuation">`</span>money<span class="token punctuation">`</span></span> <span class="token punctuation">(</span><span class="token identifier"><span class="token punctuation">`</span>id<span class="token punctuation">`</span></span><span class="token punctuation">,</span> <span class="token identifier"><span class="token punctuation">`</span>name<span class="token punctuation">`</span></span><span class="token punctuation">,</span> <span class="token identifier"><span class="token punctuation">`</span>money<span class="token punctuation">`</span></span><span class="token punctuation">,</span> <span class="token identifier"><span class="token punctuation">`</span>is_deleted<span class="token punctuation">`</span></span><span class="token punctuation">,</span> <span class="token identifier"><span class="token punctuation">`</span>create_at<span class="token punctuation">`</span></span><span class="token punctuation">,</span> <span class="token identifier"><span class="token punctuation">`</span>update_at<span class="token punctuation">`</span></span><span class="token punctuation">)</span>\n<span class="token keyword">VALUES</span>\n	<span class="token punctuation">(</span><span class="token number">21</span><span class="token punctuation">,</span> <span class="token string">&#39;jpa ä¿®æ”¹-&gt;ä¸€ç°ç°&#39;</span><span class="token punctuation">,</span> <span class="token number">1212</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&#39;2019-06-22 21:41:13&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;2019-06-22 21:41:13&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n	<span class="token punctuation">(</span><span class="token number">22</span><span class="token punctuation">,</span> <span class="token string">&#39;jpa ä¿®æ”¹-&gt;ä¸€ç°ç°&#39;</span><span class="token punctuation">,</span> <span class="token number">6666</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&#39;2019-06-22 21:41:13&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;2019-06-22 21:41:13&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>\n</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="'+u+`" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><h2 id="ii-updateä½¿ç”¨æ•™ç¨‹" tabindex="-1"><a class="header-anchor" href="#ii-updateä½¿ç”¨æ•™ç¨‹" aria-hidden="true">#</a> II. Updateä½¿ç”¨æ•™ç¨‹</h2><p>ä¸‹é¢å¼€å§‹è¿›å…¥æ­£é¢˜ï¼Œä¸ºæ–¹ä¾¿åˆçœ‹çš„åŒå­¦ï¼ˆæ²¡ç©ºæˆ–è€…æ²¡å…´è¶£ç…å‰é¢å‡ ä¸ªåšæ–‡çš„åŒå­¦ï¼‰ä¼šæœ‰éƒ¨åˆ†å†…å®¹å’Œå‰é¢çš„åšæ–‡ç›¸åŒï¼Œçœ‹è¿‡çš„è¯·æ— è§†</p><h3 id="_1-è¡¨å…³è”pojo" tabindex="-1"><a class="header-anchor" href="#_1-è¡¨å…³è”pojo" aria-hidden="true">#</a> 1. è¡¨å…³è”POJO</h3><p>å‰é¢æ’å…¥ç¯‡å·²ç»ä»‹ç»äº†POJOçš„é€æ­¥åˆ›å»ºè¿‡ç¨‹ï¼Œå·²ç»å¯¹åº”çš„æ³¨è§£å«ä¹‰ï¼Œä¸‹é¢ç›´æ¥è´´å‡ºæˆæœ</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Data</span>
<span class="token annotation punctuation">@DynamicInsert</span>
<span class="token annotation punctuation">@Entity</span>
<span class="token annotation punctuation">@Table</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">&quot;money&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MoneyPO</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Id</span>
    <span class="token annotation punctuation">@GeneratedValue</span><span class="token punctuation">(</span>strategy <span class="token operator">=</span> <span class="token class-name">GenerationType</span><span class="token punctuation">.</span><span class="token constant">IDENTITY</span><span class="token punctuation">)</span>
    <span class="token annotation punctuation">@Column</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">&quot;id&quot;</span><span class="token punctuation">)</span>

    <span class="token keyword">private</span> <span class="token class-name">Integer</span> id<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Column</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">&quot;name&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Column</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">&quot;money&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">Long</span> money<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Column</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">&quot;is_deleted&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">Byte</span> isDeleted<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Column</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">&quot;create_at&quot;</span><span class="token punctuation">)</span>
    <span class="token annotation punctuation">@CreatedDate</span>
    <span class="token keyword">private</span> <span class="token class-name">Timestamp</span> createAt<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Column</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">&quot;update_at&quot;</span><span class="token punctuation">)</span>
    <span class="token annotation punctuation">@CreatedDate</span>
    <span class="token keyword">private</span> <span class="token class-name">Timestamp</span> updateAt<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¸Šé¢ç±»ä¸­çš„å‡ ä¸ªæ³¨è§£ï¼Œè¯´æ˜å¦‚ä¸‹</p><ul><li><code>@Data</code> å±äºlombokæ³¨è§£ï¼Œä¸jpaæ— å…³ï¼Œè‡ªåŠ¨ç”Ÿæˆ<code>getter/setter/equals/hashcode/tostring</code>ç­‰æ–¹æ³•</li><li><code>@Entity</code>, <code>@Table</code> jpaæ³¨è§£ï¼Œè¡¨ç¤ºè¿™ä¸ªç±»ä¸dbçš„è¡¨å…³è”ï¼Œå…·ä½“åŒ¹é…çš„æ˜¯è¡¨ <code>money</code></li><li><code>@Id</code> <code>@GeneratedValue</code> ä½œç”¨ä¸è‡ªå¢ä¸»é”®</li><li><code>@Column</code>è¡¨æ˜è¿™ä¸ªå±æ€§ä¸è¡¨ä¸­çš„æŸåˆ—å¯¹åº”</li><li><code>@CreateDate</code>æ ¹æ®å½“å‰æ—¶é—´æ¥ç”Ÿæˆé»˜è®¤çš„æ—¶é—´æˆ³</li></ul><h3 id="_2-repository-apiå£°æ˜" tabindex="-1"><a class="header-anchor" href="#_2-repository-apiå£°æ˜" aria-hidden="true">#</a> 2. Repository APIå£°æ˜</h3><p>æ¥ä¸‹æ¥æˆ‘ä»¬æ–°å»ºä¸€ä¸ªapiç»§æ‰¿è‡ª<code>CurdRepository</code>ï¼Œç„¶åé€šè¿‡è¿™ä¸ªapiæ¥ä¸æ•°æ®åº“æ‰“äº¤é“</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">MoneyUpdateRepository</span> <span class="token keyword">extends</span> <span class="token class-name">CrudRepository</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">MoneyPO</span><span class="token punctuation">,</span> <span class="token class-name">Integer</span><span class="token punctuation">&gt;</span></span> <span class="token punctuation">{</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-ä½¿ç”¨å§¿åŠ¿" tabindex="-1"><a class="header-anchor" href="#_3-ä½¿ç”¨å§¿åŠ¿" aria-hidden="true">#</a> 3. ä½¿ç”¨å§¿åŠ¿</h3><h4 id="a-save" tabindex="-1"><a class="header-anchor" href="#a-save" aria-hidden="true">#</a> a. save</h4><p>åœ¨å‰é¢ä¸€ç¯‡æ’å…¥åšæ–‡ä¸­ï¼Œæˆ‘ä»¬çŸ¥é“å½“POJOçš„idå­˜åœ¨æ—¶ï¼Œè°ƒç”¨saveæ–¹æ³•å¯èƒ½æœ‰ä¸¤ç§æƒ…å†µ</p><ul><li>è‹¥dbä¸­è¿™ä¸ªidå¯¹åº”çš„å­—æ®µä¸å­˜åœ¨ï¼Œåˆ™æ’å…¥</li><li>è‹¥dbä¸­è¿™ä¸ªidå¯¹åº”çš„å­—æ®µå­˜åœ¨ï¼Œåˆ™æ›´æ–°</li></ul><p>æˆ‘ä»¬æ¥è¯•ä¸€ä¸‹æ›´æ–°çš„æ•ˆæœï¼Œä¸‹é¢çš„ä»£ç æ¼”ç¤ºäº†ä¸¤å—ï¼Œä¸€ä¸ªæ˜¯å½“poä¸­çš„æ‰€æœ‰æˆå‘˜å€¼æœ‰æ•ˆï¼Œæ›´æ–°å…¶ä¸­çš„ä¸€ä¸ªæ—¶ï¼Œä¼šæ€æ ·ï¼›å¦å¤–ä¸€ä¸ªæ¼”ç¤ºçš„æ˜¯éƒ¨åˆ†æ›´æ–°æ—¶ä¼šæ€æ ·ï¼ˆnameä¸ºç©ºï¼Œè¡¨ç¤ºæˆ‘ä¸å¸Œæœ›æ›´æ–°nameï¼‰</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">simpleUpdateById</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">MoneyPO</span> record <span class="token operator">=</span> moneyUpdateRepository<span class="token punctuation">.</span><span class="token function">findById</span><span class="token punctuation">(</span><span class="token number">21</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// ç›´æ¥ä¿®æ”¹è¿™ä¸ªrecordçš„å†…å®¹</span>
    record<span class="token punctuation">.</span><span class="token function">setMoney</span><span class="token punctuation">(</span><span class="token number">3333L</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    moneyUpdateRepository<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span>record<span class="token punctuation">)</span><span class="token punctuation">;</span>

    record <span class="token operator">=</span> moneyUpdateRepository<span class="token punctuation">.</span><span class="token function">findById</span><span class="token punctuation">(</span><span class="token number">21</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;after updateMoney record: &quot;</span> <span class="token operator">+</span> record<span class="token punctuation">)</span><span class="token punctuation">;</span>


    record<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    record<span class="token punctuation">.</span><span class="token function">setMoney</span><span class="token punctuation">(</span><span class="token number">6666L</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    moneyUpdateRepository<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span>record<span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    record <span class="token operator">=</span> moneyUpdateRepository<span class="token punctuation">.</span><span class="token function">findById</span><span class="token punctuation">(</span><span class="token number">21</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;after updateMoney record: &quot;</span> <span class="token operator">+</span> record<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¾“å‡ºç»“æœå‘ç°ï¼Œå‰é¢æ‰§è¡ŒæˆåŠŸï¼Œåé¢æ‰§è¡Œå¤±è´¥</p><figure><img src="`+r+'" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>ä¸Šé¢ä¸ºç¬¬ä¸€ä¸ªæ‰§è¡Œç»“æœï¼Œä»æ‹¼æ¥çš„sqlå¯ä»¥çŸ¥é“ï¼Œæ˜¯å…¨é‡çš„ä¿®æ”¹ï¼›è¾“å‡ºç»“æœä¹Ÿå¦‚æˆ‘ä»¬é¢„æœŸ</p><p>åé¢å°†nameè®¾ç½®ä¸ºç©ºä¹‹åï¼Œå†æ¬¡æ›´æ–°ï¼Œå‘ç°æŠ›å‡ºå¼‚å¸¸ï¼Œå¦‚ä¸‹ï¼Œè¿™ä¸ªæ˜¯å› ä¸ºæˆ‘ä»¬çš„dbé™åˆ¶ï¼Œå­—æ®µä¸å…è®¸æœ‰nullçš„å­˜åœ¨</p><figure><img src="'+d+`" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>ä»æ‹¼æ¥çš„sqlä¸Šçœ‹ï¼Œæˆ‘ä»¬çŸ¥é“æ˜¯å› ä¸ºæ¯ä¸ªæˆå‘˜éƒ½ä½œä¸ºäº†<code>update sql</code>å®¶æ—çš„ä¸€å‘˜ï¼Œåœ¨insertè¿™ä¸€ç¯‡ä¸­æˆ‘ä»¬ä¹Ÿé‡åˆ°äº†ç±»ä¼¼çš„é—®é¢˜ï¼Œå½“æ—¶æ˜¯åœ¨POJOä¸Šæ·»åŠ æ³¨è§£<code>@DynamicInsert</code>ï¼Œæ ¹æ®å®é™…éœ€è¦é€‰æ‹©æ’å…¥ï¼Œé‚£ä¹ˆåœ¨æ›´æ–°è¿™é‡Œæ˜¯ä¸æ˜¯ä¹Ÿæœ‰ç±»ä¼¼çš„æ³¨è§£å‘¢</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Data</span>
<span class="token annotation punctuation">@DynamicUpdate</span>
<span class="token annotation punctuation">@DynamicInsert</span>
<span class="token annotation punctuation">@Entity</span>
<span class="token annotation punctuation">@Table</span><span class="token punctuation">(</span>name <span class="token operator">=</span> <span class="token string">&quot;money&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MoneyPO</span> <span class="token punctuation">{</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>åœ¨pojoä¸Šæ·»åŠ æ³¨è§£<code>@DynamicUpdate</code>ä¹‹åï¼Œå†æ¬¡è¿›è¡Œå°è¯•ï¼Œç»“æœå¦‚ä¸‹</p><figure><img src="`+k+`" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>å±…ç„¶è¿˜æ˜¯å¤±è´¥äº†ï¼Œä»è¾“å‡ºçš„sqlæ¥çœ‹ï¼Œå±…ç„¶æŠŠ<code>name</code>å’Œ<code>money</code>éƒ½å½“æˆäº†sqlçš„ä¸€éƒ¨åˆ†ï¼Œéš¾é“æ˜¯å› ä¸ºæˆ‘ä»¬è°ƒç”¨äº†setteræ–¹æ³•çš„åŸå› ä¹ˆã€‚å¾…ç€çŒœæµ‹ï¼Œå†æ¥ä¸€æ¬¡</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token class-name">MoneyPO</span> toUpdate <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MoneyPO</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
toUpdate<span class="token punctuation">.</span><span class="token function">setId</span><span class="token punctuation">(</span><span class="token number">21</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
toUpdate<span class="token punctuation">.</span><span class="token function">setMoney</span><span class="token punctuation">(</span><span class="token number">6666L</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
moneyUpdateRepository<span class="token punctuation">.</span><span class="token function">save</span><span class="token punctuation">(</span>toUpdate<span class="token punctuation">)</span><span class="token punctuation">;</span>
record <span class="token operator">=</span> moneyUpdateRepository<span class="token punctuation">.</span><span class="token function">findById</span><span class="token punctuation">(</span><span class="token number">21</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;after updateMoney record: &quot;</span> <span class="token operator">+</span> record<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è¾“å‡ºç»“æœå¦‚ä¸‹ï¼Œçœ‹æ¥æˆ‘ä»¬ä¸Šé¢çš„çŒœæµ‹å¹¶ä¸å¯¹ï¼Œæ‹¼æ¥sqlåº”è¯¥æ˜¯æ ¹æ®å“ªä¸ªå­—æ®µå‘ç”Ÿäº†å˜åŒ–ï¼Œå°±æŠŠå“ªä¸ªåšä¸ºsqlçš„ä¸€éƒ¨åˆ†æ¥åšçš„</p><figure><img src="`+m+`" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>ä¸Šé¢è¿™ä¸ªä½¿ç”¨å§¿åŠ¿çœ‹å®Œä¹‹åï¼Œä¼šæœ‰ä¸€ä¸ªæ˜æ˜¾çš„æ„Ÿè§‰ï¼Œè¿™ä¸ªæ›´æ–°çš„æ”¯æŒï¼Œå¿…é¡»å…ˆè·å–ç›®æ ‡å¯¹è±¡å†è¿›è¡Œä¿®æ”¹ï¼Œå¾ˆéš¾æ»¡è¶³æˆ‘ä»¬çš„æ—¥å¸¸ä¸šåŠ¡åœºæ™¯ï¼›</p><h4 id="b-æŸ¥è¯¢æ›´æ–°" tabindex="-1"><a class="header-anchor" href="#b-æŸ¥è¯¢æ›´æ–°" aria-hidden="true">#</a> b. æŸ¥è¯¢æ›´æ–°</h4><p>æ ¹æ®æŸä¸ªæ¡ä»¶æ¥æ›´æ–°å¯¹åº”çš„æ•°æ®ï¼Œè¿™ä¸ªå°±æ¯”è¾ƒå¸¸è§äº†ï¼Œåœ¨jpaä¸­ï¼Œæ²¡æœ‰æ‰¾åˆ°æ ¹æ®æ–¹æ³•åæ¥æ”¯æ’‘è¿™ç§åœºæ™¯çš„æ–¹å¼ï¼Œä½†æ˜¯å‘ç°äº†å¦å¤–ä¸€ä¸ªæœ‰æ„æ€çš„ä¸œè¥¿--<code>jql</code></p><p>ç›´æ¥åœ¨æ–¹æ³•æ–¹é¢ï¼Œæ·»åŠ æ³¨è§£ï¼Œæ³¨è§£å†…éƒ¨å†™sql</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token doc-comment comment">/**
 * æ ¹æ®é‡‘é’±æ¥ä¿®æ”¹çŠ¶æ€
 *
 * <span class="token keyword">@param</span> <span class="token parameter">money</span>
 * <span class="token keyword">@param</span> <span class="token parameter">state</span>
 */</span>
<span class="token annotation punctuation">@Modifying</span>
<span class="token annotation punctuation">@Query</span><span class="token punctuation">(</span><span class="token string">&quot;update MoneyPO m set m.isDeleted=?2 where  m.money=?1&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">void</span> <span class="token function">updateStateByMoney</span><span class="token punctuation">(</span><span class="token class-name">Long</span> money<span class="token punctuation">,</span> <span class="token class-name">Byte</span> state<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token doc-comment comment">/**
 * è¡¨è¾¾å¼è®¡ç®—
 *
 * <span class="token keyword">@param</span> <span class="token parameter">id</span>
 * <span class="token keyword">@param</span> <span class="token parameter">money</span>
 */</span>
<span class="token annotation punctuation">@Modifying</span>
<span class="token annotation punctuation">@Query</span><span class="token punctuation">(</span><span class="token string">&quot;update MoneyPO m set m.money=m.money + ?2 where m.id=?1&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">void</span> <span class="token function">addMoneyById</span><span class="token punctuation">(</span><span class="token class-name">Integer</span> id<span class="token punctuation">,</span> <span class="token class-name">Long</span> money<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¸Šé¢å°±æ˜¯ä¸€ä¸ªæŸ¥è¯¢æ›´æ–°çš„caseï¼Œæ³¨æ„ä¸¤ä¸ªæ³¨è§£</p><ul><li><code>@Modifying</code> è¿™ä¸ªå¿…é¡»æœ‰ï¼Œå‘Šè¯‰æ¡†æ¶æˆ‘ä»¬æ‰§è¡Œçš„æ˜¯æ›´æ–°/åˆ é™¤æ“ä½œ</li><li><code>@Query</code> å†…éƒ¨æ˜¯æ­£å¸¸çš„sqlè¯­å¥ï¼Œä½†æ˜¯éœ€è¦æ³¨æ„çš„æ˜¯è¡¨åï¼Œä¸æ˜¯å®é™…çš„è¡¨ï¼Œè€Œæ˜¯æˆ‘ä»¬å‰é¢å®šä¹‰çš„POJO</li></ul><p>ç„¶åæ¥æµ‹è¯•ä¸€ä¸‹ä½¿ç”¨</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">updateByQuery</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// é€šè¿‡æŸ¥è¯¢ä¿®æ”¹</span>
    moneyUpdateRepository<span class="token punctuation">.</span><span class="token function">updateStateByMoney</span><span class="token punctuation">(</span><span class="token number">6666L</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token keyword">byte</span><span class="token punctuation">)</span> <span class="token number">0x01</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token class-name">MoneyPO</span> record <span class="token operator">=</span> moneyUpdateRepository<span class="token punctuation">.</span><span class="token function">findById</span><span class="token punctuation">(</span><span class="token number">21</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;after update record: &quot;</span> <span class="token operator">+</span> record<span class="token punctuation">)</span><span class="token punctuation">;</span>


    moneyUpdateRepository<span class="token punctuation">.</span><span class="token function">addMoneyById</span><span class="token punctuation">(</span><span class="token number">21</span><span class="token punctuation">,</span> <span class="token number">3333L</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    record <span class="token operator">=</span> moneyUpdateRepository<span class="token punctuation">.</span><span class="token function">findById</span><span class="token punctuation">(</span><span class="token number">21</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;after addMoney record: &quot;</span> <span class="token operator">+</span> record<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ‰§è¡Œä¸Šé¢çš„ä»£ç ï¼Œæ‚²å‚¬çš„å‘ç°å±…ç„¶æŠ¥é”™äº† <code>Caused by: javax.persistence.TransactionRequiredException: Executing an update/delete query</code></p><figure><img src="`+v+'" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>ä»å †æ ˆçš„æè¿°ä¸Šæ¥çœ‹ï¼Œæ›´æ–°/åˆ é™¤å¿…é¡»è¦å¼€å¯äº‹åŠ¡ï¼Œé‚£ä¹ˆäº‹åŠ¡æ˜¯ä»€ä¹ˆä¸œè¥¿å‘¢ï¼Ÿä¸‹é¢æ¨èå‡ ç¯‡åšæ–‡</p>',52),A={href:"https://blog.hhui.top/hexblog/2018/03/23/mysql%E4%B9%8B%E9%94%81%E4%B8%8E%E4%BA%8B%E5%8A%A1%E8%AF%A6%E8%A7%A3/",target:"_blank",rel:"noopener noreferrer"},w={href:"https://blog.hhui.top/hexblog/2018/05/12/Spring%E5%AD%A6%E4%B9%A0%E4%B9%8B%E4%BA%8B%E5%8A%A1%E7%9A%84%E4%BD%BF%E7%94%A8%E5%A7%BF%E5%8A%BF/",target:"_blank",rel:"noopener noreferrer"},q={href:"https://blog.hhui.top/hexblog/2018/05/13/Spring%E5%AD%A6%E4%B9%A0%E4%B9%8B%E4%BA%8B%E5%8A%A1%E7%AE%A1%E7%90%86%E4%B8%8E%E4%BC%A0%E6%92%AD%E5%B1%9E%E6%80%A7/",target:"_blank",rel:"noopener noreferrer"},j=e(`<p>å…³äºjpaä¸­æ›´å¤šäº‹åŠ¡ç›¸å…³çš„ï¼Œåé¢å†å¼•å…¥ï¼Œæˆ‘ä»¬å…ˆå›åˆ°æœ¬æ–‡ä¸»é¢˜ï¼Œå¦‚ä½•è§£å†³é—®é¢˜: åœ¨è°ƒç”¨ä¸Šé¢çš„æ–¹æ³•ä¸Šé¢æ·»åŠ äº‹åŠ¡æ³¨è§£å³å¯</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Transactional</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testUpdate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">simpleUpdateById</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">updateByQuery</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å†æ¬¡æ‰§è¡Œä¹‹åï¼Œç»“æœå¦‚ä¸‹</p><figure><img src="`+b+'" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>çœ‹ä¸Šé¢çš„ç»“æœï¼Œå‘ç°money+3333ä¹‹åçš„è¾“å‡ºç»“æœå±…ç„¶è¿˜æ˜¯6666ï¼›ä½†æ˜¯æˆ‘ä»¬å†çœ‹dbçš„ç»“æœï¼Œå·²ç»æ˜¯9999äº†ï¼Œä¸ºä»€ä¹ˆä¼šè¿™æ ·å‘¢ï¼Ÿ</p><figure><img src="'+g+`" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>ä¸Šé¢è¿™ä¸ªé—®é¢˜æ¯”è¾ƒæœ‰æ„æ€äº†ï¼Œåˆæ­¥çŒœæµ‹ä¸äº‹ç‰©å·²ç»jpaçš„å†…éƒ¨ç¼“å­˜æœºåˆ¶æœ‰å…³ç³»ï¼Œè‡³äºå…·ä½“æ˜¯ä¸æ˜¯è¿™æ ·ï¼Œæœ‰å¿…è¦ä¸“é—¨å¼€å‘æ¥éªŒè¯ä¸€äºŒ</p><h3 id="_4-å°ç»“" tabindex="-1"><a class="header-anchor" href="#_4-å°ç»“" aria-hidden="true">#</a> 4. å°ç»“</h3><p>åˆ©ç”¨JPAå®ç°è¡¨æ•°æ®çš„æ›´æ–°ï¼Œä¸Šé¢ä¸»è¦ä»‹ç»äº†ä¸¤ç§æ–¹å¼ï¼Œ save + jql</p><p><strong>save</strong></p><p>é€šè¿‡saveæ›´æ–°æ—¶ï¼Œéœ€è¦æŒ‡å®šidæ¥å®ç°å•æ¡è®°å½•çš„ä¿®æ”¹</p><p><strong>jql</strong></p><p>è¯­æ³•ä¸sqlå·®ä¸å¤šï¼Œé…åˆä¸¤ä¸ªæ³¨è§£ <code>@Modifying</code>, <code>@Query</code>æ¥ä½¿ç”¨ï¼Œä¸‹é¢æ˜¯ä¸€ä¸ªå®ä¾‹ï¼Œä¸¤ç‚¹éœ€è¦æ³¨æ„</p><ul><li>è¡¨åæ˜¯æˆ‘ä»¬å®šä¹‰çš„ä¸dbä¸­è¡¨å…³è”çš„POJO</li><li>å‚æ•°ä¼ é€’æ ¼å¼ä¸º<code>?index</code>ï¼Œ indexä¸ºå‚æ•°ä½ç½®</li></ul><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Modifying</span>
<span class="token annotation punctuation">@Query</span><span class="token punctuation">(</span><span class="token string">&quot;update MoneyPO m set m.isDeleted=?2 where  m.money=?1&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">void</span> <span class="token function">updateStateByMoney</span><span class="token punctuation">(</span><span class="token class-name">Long</span> money<span class="token punctuation">,</span> <span class="token class-name">Byte</span> state<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ•°æ®ä¿®æ”¹å’Œåˆ é™¤ï¼Œéœ€è¦æ˜¾ç¤ºå£°æ˜äº‹åŠ¡ï¼Œå¦åˆ™ä¼šæŠ¥é”™ï¼Œä¸€ä¸ªæ˜¯åœ¨è°ƒç”¨çš„æ–¹æ³•ä¸Šæ·»åŠ æ³¨è§£ <code>@Transactional</code>ï¼Œæˆ–è€…ç›´æ¥åœ¨repository apiçš„æ¥å£ä¸Šæ·»åŠ æ³¨è§£ <code>@Transactional</code></p><h2 id="ii-å…¶ä»–" tabindex="-1"><a class="header-anchor" href="#ii-å…¶ä»–" aria-hidden="true">#</a> II. å…¶ä»–</h2><h3 id="_0-æºç ä¸ç›¸å…³åšæ–‡" tabindex="-1"><a class="header-anchor" href="#_0-æºç ä¸ç›¸å…³åšæ–‡" aria-hidden="true">#</a> 0. æºç ä¸ç›¸å…³åšæ–‡</h3><p><strong>æºç </strong></p>`,19),x={href:"https://github.com/liuyueyi/spring-boot-demo",target:"_blank",rel:"noopener noreferrer"},T={href:"https://github.com/liuyueyi/spring-boot-demo/blob/master/spring-boot/102-jpa",target:"_blank",rel:"noopener noreferrer"},M=n("p",null,[n("strong",null,"ç›¸å…³åšæ–‡")],-1),U={href:"https://blog.hhui.top/hexblog/2018/03/23/mysql%E4%B9%8B%E9%94%81%E4%B8%8E%E4%BA%8B%E5%8A%A1%E8%AF%A6%E8%A7%A3/",target:"_blank",rel:"noopener noreferrer"},S={href:"https://blog.hhui.top/hexblog/2018/05/12/Spring%E5%AD%A6%E4%B9%A0%E4%B9%8B%E4%BA%8B%E5%8A%A1%E7%9A%84%E4%BD%BF%E7%94%A8%E5%A7%BF%E5%8A%BF/",target:"_blank",rel:"noopener noreferrer"},I={href:"https://blog.hhui.top/hexblog/2018/05/13/Spring%E5%AD%A6%E4%B9%A0%E4%B9%8B%E4%BA%8B%E5%8A%A1%E7%AE%A1%E7%90%86%E4%B8%8E%E4%BC%A0%E6%92%AD%E5%B1%9E%E6%80%A7/",target:"_blank",rel:"noopener noreferrer"},D={href:"http://spring.hhui.top/spring-blog/2019/06/12/190612-SpringBoot%E7%B3%BB%E5%88%97%E6%95%99%E7%A8%8BJPA%E4%B9%8B%E5%9F%BA%E7%A1%80%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/",target:"_blank",rel:"noopener noreferrer"},N={href:"http://spring.hhui.top/spring-blog/2019/06/14/190614-SpringBoot%E7%B3%BB%E5%88%97%E6%95%99%E7%A8%8BJPA%E4%B9%8B%E6%96%B0%E5%A2%9E%E8%AE%B0%E5%BD%95%E4%BD%BF%E7%94%A8%E5%A7%BF%E5%8A%BF/",target:"_blank",rel:"noopener noreferrer"};function O(P,L){const a=l("ExternalLinkIcon");return o(),c("div",null,[h,i(" more "),E,n("ul",null,[n("li",null,[n("a",f,[s("190612-SpringBootç³»åˆ—æ•™ç¨‹JPAä¹‹åŸºç¡€ç¯å¢ƒæ­å»º"),t(a)])]),n("li",null,[n("a",B,[s("190614-SpringBootç³»åˆ—æ•™ç¨‹JPAä¹‹æ–°å¢è®°å½•ä½¿ç”¨å§¿åŠ¿"),t(a)])])]),_,n("ul",null,[n("li",null,[n("a",A,[s("mysqlä¹‹é”ä¸äº‹åŠ¡è¯¦è§£"),t(a)])]),n("li",null,[n("a",w,[s("Springå­¦ä¹ ä¹‹äº‹åŠ¡çš„ä½¿ç”¨å§¿åŠ¿"),t(a)])]),n("li",null,[n("a",q,[s("Springå­¦ä¹ ä¹‹äº‹åŠ¡ç®¡ç†ä¸ä¼ æ’­å±æ€§"),t(a)])])]),j,n("ul",null,[n("li",null,[s("å·¥ç¨‹ï¼š"),n("a",x,[s("https://github.com/liuyueyi/spring-boot-demo"),t(a)])]),n("li",null,[s("module: "),n("a",T,[s("https://github.com/liuyueyi/spring-boot-demo/blob/master/spring-boot/102-jpa"),t(a)])])]),M,n("ul",null,[n("li",null,[n("a",U,[s("mysqlä¹‹é”ä¸äº‹åŠ¡è¯¦è§£"),t(a)])]),n("li",null,[n("a",S,[s("Springå­¦ä¹ ä¹‹äº‹åŠ¡çš„ä½¿ç”¨å§¿åŠ¿"),t(a)])]),n("li",null,[n("a",I,[s("Springå­¦ä¹ ä¹‹äº‹åŠ¡ç®¡ç†ä¸ä¼ æ’­å±æ€§"),t(a)])]),n("li",null,[n("a",D,[s("190612-SpringBootç³»åˆ—æ•™ç¨‹JPAä¹‹åŸºç¡€ç¯å¢ƒæ­å»º"),t(a)])]),n("li",null,[n("a",N,[s("190614-SpringBootç³»åˆ—æ•™ç¨‹JPAä¹‹æ–°å¢è®°å½•ä½¿ç”¨å§¿åŠ¿"),t(a)])])])])}const C=p(y,[["render",O],["__file","03.190623-SpringBootç³»åˆ—æ•™ç¨‹JPAä¹‹updateä½¿ç”¨å§¿åŠ¿.html.vue"]]);export{C as default};
