import{_ as i,V as d,W as r,Y as e,Z as a,$ as t,X as l,a1 as s,F as o}from"./framework-094145d2.js";const c="/tutorial/imgs/190717/00.jpg",u="/tutorial/imgs/190717/01.jpg",h="/tutorial/imgs/190717/02.jpg",p="/tutorial/imgs/190717/03.jpg",f="/tutorial/imgs/190717/04.jpg",b={},m={href:"https://docs.influxdata.com/influxdb/v1.7/query_language/",target:"_blank",rel:"noopener noreferrer"},g=e("p",null,"influx已经推出2.0beta版本，并没有使用，后面的所有都是以1.7版本进行说明",-1),x=e("h2",{id:"i-安装",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#i-安装","aria-hidden":"true"},"#"),a(" I. 安装")],-1),_={href:"https://docs.influxdata.com/influxdb/v1.7/introduction/installation/",target:"_blank",rel:"noopener noreferrer"},v=s(`<h3 id="_1-centos" tabindex="-1"><a class="header-anchor" href="#_1-centos" aria-hidden="true">#</a> 1. centos</h3><p>通过yum包管理方式实现安装最新的稳定版, 在终端中输入</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">cat</span> <span class="token operator">&lt;&lt;</span><span class="token string">EOF<span class="token bash punctuation"> <span class="token operator">|</span> <span class="token function">sudo</span> <span class="token function">tee</span> /etc/yum.repos.d/influxdb.repo</span>
[influxdb]
name = InfluxDB Repository - RHEL \\<span class="token variable">$releasever</span>
baseurl = https://repos.influxdata.com/rhel/\\<span class="token variable">$releasever</span>/\\<span class="token variable">$basearch</span>/stable
enabled = 1
gpgcheck = 1
gpgkey = https://repos.influxdata.com/influxdb.key
EOF</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>然后就可以按照常见的yum方式进行安装</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">sudo</span> yum <span class="token function">install</span> influxdb
<span class="token comment"># 启动</span>
<span class="token function">sudo</span> <span class="token function">service</span> influxdb start
<span class="token comment"># 7+ 版本可以使用 systemctl 方式启动</span>
<span class="token function">sudo</span> systemctl start influxdb
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2-macos" tabindex="-1"><a class="header-anchor" href="#_2-macos" aria-hidden="true">#</a> 2. macos</h3><p>mac推荐通过homebrew方式进行安装，命令也比较简单</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>brew update
brew <span class="token function">install</span> influxdb
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-相关配置" tabindex="-1"><a class="header-anchor" href="#_3-相关配置" aria-hidden="true">#</a> 3. 相关配置</h3><p>一般安装完毕之后，如果作为测试的话，直接使用并没有啥问题；但是实际的成产环境中，铁定是需要修改默认配置的</p>`,10),k={href:"https://blog.hhui.top/2019/05/05/190505-InfluxDB%E4%B9%8B%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86/",target:"_blank",rel:"noopener noreferrer"},y={href:"https://blog.hhui.top/2019/05/06/190506-InfluxDB%E4%B9%8B%E9%85%8D%E7%BD%AE%E4%BF%AE%E6%94%B9/",target:"_blank",rel:"noopener noreferrer"},E=e("h2",{id:"ii-influx-cli",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#ii-influx-cli","aria-hidden":"true"},"#"),a(" II. influx-cli")],-1),B=e("p",null,[a("安装完毕之后，influx自带了一个控制台访问操作的工具: "),e("code",null,"influx"),a("，在正式进入后面的"),e("code",null,"influxsql"),a("之前，有必要了解一下这个工具如何使用，因为后面的sql，都是需要在它上面玩耍的")],-1),I={href:"https://docs.influxdata.com/influxdb/v1.7/tools/shell/",target:"_blank",rel:"noopener noreferrer"},D=s('<h3 id="_1-参数" tabindex="-1"><a class="header-anchor" href="#_1-参数" aria-hidden="true">#</a> 1. 参数</h3><p>默认情况下，我们直接在控制台输入 <code>influx</code> 之后就可以进入与influxdb交互的终端界面，如果我们修改了influx的默认配置，比如增加了用户名/密码时，这个时候可能需要使用参数来链接到influxdb了</p><p>下面给出几个常用的参数</p><table><thead><tr><th>参数</th><th>示例</th><th>说明</th></tr></thead><tbody><tr><td><code>-username</code></td><td>admin</td><td>配置访问用户名</td></tr><tr><td><code>-password</code></td><td>admin</td><td>配置访问密码</td></tr><tr><td><code>-format</code></td><td><code>json csv column</code></td><td>格式化输出结果</td></tr><tr><td><code>-host</code></td><td><code>localhost</code></td><td>influxdb提供访问的域名或ip</td></tr><tr><td><code>-port</code></td><td>8086</td><td>influxdb提供访问的端口号</td></tr><tr><td><code>-precisoin</code></td><td><code>rfc3339(h,m,s,ms,u,ns)</code></td><td>指定time时间戳格式化</td></tr></tbody></table><p>一个简单的使用case如下</p><figure><img src="'+c+'" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><h3 id="_2-使用示例" tabindex="-1"><a class="header-anchor" href="#_2-使用示例" aria-hidden="true">#</a> 2. 使用示例</h3><p>上面的参数是在连接的时候直接指定了，这些参数在连接之后，也是可以再指定的，下面给出以下常用的使用姿势</p><h4 id="a-help" tabindex="-1"><a class="header-anchor" href="#a-help" aria-hidden="true">#</a> a. help</h4><p>直接输入help，会给出一些命令提示</p><figure><img src="'+u+'" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><h4 id="b-auth" tabindex="-1"><a class="header-anchor" href="#b-auth" aria-hidden="true">#</a> b. auth</h4><p>因为直接使用前面的方式输入用户名和密码的方式，并不安全，所以推荐的方式是直接influx进去之后，使用auth来权限校验，这种思路和redis-cli的差不多</p><figure><img src="'+h+'" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><h4 id="c-pretty" tabindex="-1"><a class="header-anchor" href="#c-pretty" aria-hidden="true">#</a> c. pretty</h4><p>是输出更加友好的方式，配合<code>-format=json</code>的时候比较合适</p><figure><img src="'+p+'" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p><strong>注意pretty输入一次表示开启，再输入一次表示关闭</strong></p><h4 id="d-precision" tabindex="-1"><a class="header-anchor" href="#d-precision" aria-hidden="true">#</a> d. precision</h4><p>时间戳格式化，对人更友好的显示方式</p><p>直接输入: <code>precision rfc3339</code></p><figure><img src="'+f+`" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><h4 id="e-history" tabindex="-1"><a class="header-anchor" href="#e-history" aria-hidden="true">#</a> e. history</h4><p>influx-cli会保存历史命令（不包括auth），所以可以通过输入这个来查询之前的命令</p><h4 id="f-退出" tabindex="-1"><a class="header-anchor" href="#f-退出" aria-hidden="true">#</a> f. 退出</h4><p>三种方式</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>exit/quit/ctrl+d      quits the influx shell
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div>`,27);function j(q,L){const n=o("ExternalLinkIcon");return d(),r("div",null,[e("p",null,[a("influxdb 时序数据库，因为实际业务中使用到了，然而并没有发现有特别好的文章，完整的介绍influx sql的使用姿势，因此记录下实际开发中学习的体会，主要参考来自于官方文档 "),e("a",m,[a("Influx Query Language (InfluxQL)"),t(n)])]),l(" more "),g,x,e("p",null,[a("安装教程，直接参考官网链接，"),e("a",_,[a("installing-influxdb-oss"),t(n)]),a("，下面只介绍centos/macos两个操作系统的安装姿势")]),v,e("p",null,[a("如果需要开启权限校验，访问时需要用户名密码时，可以参考: "),e("a",k,[a("190505-InfluxDB之权限管理"),t(n)])]),e("p",null,[a("如果需要修改数据的存储位置，访问端口号等，可以参考: "),e("a",y,[a("190506-InfluxDB之配置修改"),t(n)])]),E,B,e("p",null,[a("官方也给出了它的使用文档，有兴趣的可以参考: "),e("a",I,[a("InfluxDB command line interface (CLI/shell)"),t(n)])]),D])}const z=i(b,[["render",j],["__file","01.安装及influx-cli使用姿势介绍.html.vue"]]);export{z as default};
