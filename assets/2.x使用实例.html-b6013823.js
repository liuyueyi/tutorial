import{_ as e,V as c,W as o,Y as n,Z as s,$ as t,X as p,F as i}from"./framework-eef79181.js";const l={},u=n("p",null,"qrcode-plugin 2.0使用教程",-1),k={href:"https://github.com/liuyueyi/quick-media/blob/master/plugins/qrcode-plugin/src/test/java/com/github/hui/quick/plugin/test/QrCodeGenUserGuide.java",target:"_blank",rel:"noopener noreferrer"},d=p('<h2 id="_1-功能介绍" tabindex="-1"><a class="header-anchor" href="#_1-功能介绍" aria-hidden="true">#</a> 1. 功能介绍</h2><p>大的方面主要分为二维码的生成和解析两块，qrcode-plugin生成二维码的功能上，做了深度的开发定制，目前基本上可以覆盖二维码的各种生成场景</p><ul class="task-list-container"><li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" id="task-item-0" checked="checked" disabled="disabled"><label class="task-list-item-label" for="task-item-0"> 个性二维码生成</label><ul><li>支持logo</li><li>支持logo样式 （圆角logo， 边框， 圆形logo）</li><li>支持二维码颜色设置</li><li>支持二维码圆角</li><li>支持探测图形颜色设置</li><li>支持探测图形选用图片</li><li>支持背景图，三种背景样式</li><li>支持背景图圆角设置</li><li>支持base64格式的二维码图片</li><li>支持二维码定制绘制信息样式</li><li>三角形</li><li>矩形</li><li>五边形 （五角星待支持）</li><li>六边形</li><li>八边形</li><li>圆</li><li>自定义图片</li><li>文字二维码</li><li>前置图支持</li></ul></li><li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" id="task-item-1" checked="checked" disabled="disabled"><label class="task-list-item-label" for="task-item-1"> 动态二维码生成支持</label></li></ul><h2 id="_2-使用尝鲜" tabindex="-1"><a class="header-anchor" href="#_2-使用尝鲜" aria-hidden="true">#</a> 2. 使用尝鲜</h2><h3 id="环境配置" tabindex="-1"><a class="header-anchor" href="#环境配置" aria-hidden="true">#</a> - 环境配置</h3><p>请直接使用中央仓库引入最新依赖</p>',6),r={href:"https://mvnrepository.com/artifact/com.github.liuyueyi.media/qrcode-plugin",target:"_blank",rel:"noopener noreferrer"},v=p(`<div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token comment">&lt;!-- https://mvnrepository.com/artifact/com.github.liuyueyi.media/qrcode-plugin --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.github.liuyueyi.media<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>qrcode-plugin<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>2.5.6<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="配置介绍" tabindex="-1"><a class="header-anchor" href="#配置介绍" aria-hidden="true">#</a> - 配置介绍</h3><p>使用<code>qrcode-plugin</code>插件生成二维码是一个非常简单的事情，通过一些基本的参数来控制输出二维码样式，一个链式调用即可完成</p><p><strong>参数说明</strong></p><p>二维码图片的基本参数</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token doc-comment comment">/**
 * 内容
 */</span>
<span class="token keyword">private</span> <span class="token class-name">String</span> msg<span class="token punctuation">;</span>

<span class="token doc-comment comment">/**
 * 输出图片宽
 */</span>
<span class="token keyword">private</span> <span class="token class-name">Integer</span> w<span class="token punctuation">;</span>


<span class="token doc-comment comment">/**
 * 输出图片高
 */</span>
<span class="token keyword">private</span> <span class="token class-name">Integer</span> h<span class="token punctuation">;</span>


<span class="token doc-comment comment">/**
 * 内容编码, default UTF-8
 */</span>
<span class="token keyword">private</span> <span class="token class-name">String</span> code <span class="token operator">=</span> <span class="token string">&quot;utf-8&quot;</span><span class="token punctuation">;</span>


<span class="token doc-comment comment">/**
 * 边框 0 - 4 （0表示无边框）
 */</span>
<span class="token keyword">private</span> <span class="token class-name">Integer</span> padding<span class="token punctuation">;</span>


<span class="token doc-comment comment">/**
 * 容错级别
 */</span>
<span class="token keyword">private</span> <span class="token class-name">ErrorCorrectionLevel</span> errorCorrection <span class="token operator">=</span> <span class="token class-name">ErrorCorrectionLevel<span class="token punctuation">.</span>H</span><span class="token punctuation">;</span>


<span class="token doc-comment comment">/**
 * 输出二维码图片类型
 */</span>
<span class="token keyword">private</span> <span class="token class-name">String</span> picType <span class="token operator">=</span> <span class="token string">&quot;png&quot;</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>探测图形(二维码左上，右上，左下三个方框)的参数配置</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token doc-comment comment">/**
 * 外面的方框颜色
 */</span> 
<span class="token keyword">private</span> <span class="token class-name">Color</span> outColor<span class="token punctuation">;</span>

<span class="token doc-comment comment">/**
 * 内部方框颜色
 */</span>
<span class="token keyword">private</span> <span class="token class-name">Color</span> inColor<span class="token punctuation">;</span>

<span class="token doc-comment comment">/**
 * 探测图形，优先级高于颜色的定制（即存在图片时，用图片绘制探测图形）
 */</span>
<span class="token keyword">private</span> <span class="token class-name">BufferedImage</span> detectImg<span class="token punctuation">;</span>

<span class="token doc-comment comment">/**
 * 左上角的探测图形
 */</span>
<span class="token keyword">private</span> <span class="token class-name">BufferedImage</span> detectImgLT<span class="token punctuation">;</span>

<span class="token doc-comment comment">/**
 * 右上角的探测图形
 */</span>
<span class="token keyword">private</span> <span class="token class-name">BufferedImage</span> detectImgRT<span class="token punctuation">;</span>

<span class="token doc-comment comment">/**
 * 左下角的探测图形
 */</span>
<span class="token keyword">private</span> <span class="token class-name">BufferedImage</span> detectImgLD<span class="token punctuation">;</span>

<span class="token doc-comment comment">/**
 * true 表示探测图形单独处理
 * false 表示探测图形的样式更随二维码的主样式
 */</span>
<span class="token keyword">private</span> <span class="token class-name">Boolean</span> special<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>二维码图形(就是普通二维码中的黑点)绘制参数:</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token doc-comment comment">/**
 * 着色颜色，即二维码点阵中为1的区域绘制颜色，也就是常见二维码中的黑色小方块
 */</span>
<span class="token keyword">private</span> <span class="token class-name">Color</span> preColor<span class="token punctuation">;</span>

<span class="token doc-comment comment">/**
 * 背景颜色, 即二维码点阵中为0的区域绘制颜色，也就是常见二维码中的白色小方块
 */</span>
<span class="token keyword">private</span> <span class="token class-name">Color</span> bgColor<span class="token punctuation">;</span>

<span class="token doc-comment comment">/**
 * 透明度填充，如绘制二维码的图片中存在透明区域，若这个参数为true，则会用bgColor填充透明的区域；若为false，则透明区域依旧是透明的
 */</span>
<span class="token keyword">private</span> <span class="token keyword">boolean</span> diaphaneityFill<span class="token punctuation">;</span>

<span class="token doc-comment comment">/**
 * 背景图，即二维码点阵中为0的区域渲染图片，也就是常见二维码中的白色小方块
 */</span>
<span class="token keyword">private</span> <span class="token class-name">BufferedImage</span> bgImg<span class="token punctuation">;</span>

<span class="token doc-comment comment">/**
 * 绘制样式: 矩形，三角，原点，五边形，六边形，八边形，图片
 */</span>
<span class="token keyword">private</span> <span class="token class-name">DrawStyle</span> drawStyle<span class="token punctuation">;</span>

<span class="token doc-comment comment">/**
 * true 时表示支持对相邻的着色点进行合并处理 （即用一个大图来绘制相邻的两个着色点）
 * <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>
 * 说明： 三角形样式关闭该选项，因为留白过多，对识别有影响
 */</span>
<span class="token keyword">private</span> <span class="token keyword">boolean</span> enableScale<span class="token punctuation">;</span>

<span class="token doc-comment comment">/**
 * 渲染图
 */</span>
<span class="token keyword">private</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">DotSize</span><span class="token punctuation">,</span> <span class="token class-name">BufferedImage</span><span class="token punctuation">&gt;</span></span> imgMapper<span class="token punctuation">;</span>

<span class="token doc-comment comment">/**
 * 生成二维码的图片样式，一般来讲不推荐使用圆形，默认为normal
 */</span>
<span class="token keyword">private</span> <span class="token class-name">ImgStyle</span> qrStyle<span class="token punctuation">;</span>

<span class="token doc-comment comment">/**
 * 圆角的弧度，默认为 1 / 8
 */</span>
<span class="token keyword">private</span> <span class="token class-name">Float</span> cornerRadius<span class="token punctuation">;</span>

<span class="token doc-comment comment">/**
 * 生成文字二维码时的候字符池
 */</span>
<span class="token keyword">private</span> <span class="token class-name">String</span> text<span class="token punctuation">;</span>

<span class="token doc-comment comment">/**
 * 生成文字二维码时的字体
 */</span>
<span class="token keyword">private</span> <span class="token class-name">String</span> fontName<span class="token punctuation">;</span>

<span class="token doc-comment comment">/**
 * 字体样式
 *
 * <span class="token punctuation">{</span><span class="token keyword">@link</span> <span class="token reference"><span class="token class-name">Font</span><span class="token punctuation">#</span><span class="token field">PLAIN</span></span><span class="token punctuation">}</span> 0
 * <span class="token punctuation">{</span><span class="token keyword">@link</span> <span class="token reference"><span class="token class-name">Font</span><span class="token punctuation">#</span><span class="token field">BOLD</span></span><span class="token punctuation">}</span>  1
 * <span class="token punctuation">{</span><span class="token keyword">@link</span> <span class="token reference"><span class="token class-name">Font</span><span class="token punctuation">#</span><span class="token field">ITALIC</span></span><span class="token punctuation">}</span> 2
 */</span>
<span class="token keyword">private</span> <span class="token keyword">int</span> fontStyle<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>logo样式配置</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token doc-comment comment">/**
 * logo 图片
 */</span>
<span class="token keyword">private</span> <span class="token class-name">BufferedImage</span> logo<span class="token punctuation">;</span>

<span class="token doc-comment comment">/**
 * logo 样式 (圆角，普通，圆)
 */</span>
<span class="token keyword">private</span> <span class="token class-name">LogoStyle</span> logoStyle<span class="token punctuation">;</span>

<span class="token doc-comment comment">/**
 * logo 占二维码的比例
 */</span>
<span class="token keyword">private</span> <span class="token keyword">int</span> rate<span class="token punctuation">;</span>

<span class="token doc-comment comment">/**
 * true 表示有边框，
 * false 表示无边框
 */</span>
<span class="token keyword">private</span> <span class="token keyword">boolean</span> border<span class="token punctuation">;</span>

<span class="token doc-comment comment">/**
 * 边框颜色
 */</span>
<span class="token keyword">private</span> <span class="token class-name">Color</span> borderColor<span class="token punctuation">;</span>

<span class="token doc-comment comment">/**
 * 外围边框颜色
 */</span>
<span class="token keyword">private</span> <span class="token class-name">Color</span> outerBorderColor<span class="token punctuation">;</span>

<span class="token doc-comment comment">/**
 * 用于设置logo的透明度
 */</span>
<span class="token keyword">private</span> <span class="token class-name">Float</span> opacity<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>背景图配置</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token doc-comment comment">/**
 * 背景图样式
 */</span>
<span class="token keyword">private</span> <span class="token class-name">ImgStyle</span> imgStyle<span class="token punctuation">;</span>

<span class="token doc-comment comment">/**
 * 圆角弧度，默认为宽高中较小值的 1/8
 */</span>
<span class="token keyword">private</span> <span class="token keyword">float</span> radius<span class="token punctuation">;</span>

<span class="token doc-comment comment">/**
 * 背景图(静态二维码时使用)
 */</span>
<span class="token keyword">private</span> <span class="token class-name">BufferedImage</span> bgImg<span class="token punctuation">;</span>

<span class="token doc-comment comment">/**
 * 动态背景图(动态二维码生成时使用)
 */</span>
<span class="token keyword">private</span> <span class="token class-name">GifDecoder</span> gifDecoder<span class="token punctuation">;</span>

<span class="token doc-comment comment">/**
 * 背景图宽
 */</span>
<span class="token keyword">private</span> <span class="token keyword">int</span> bgW<span class="token punctuation">;</span>

<span class="token doc-comment comment">/**
 * 背景图高
 */</span>
<span class="token keyword">private</span> <span class="token keyword">int</span> bgH<span class="token punctuation">;</span>

<span class="token doc-comment comment">/**
 * 背景图样式（全覆盖，指定位置填充，背景图渲染）
 */</span>
<span class="token keyword">private</span> <span class="token class-name">BgImgStyle</span> bgImgStyle<span class="token punctuation">;</span>

<span class="token doc-comment comment">/**
 * if <span class="token punctuation">{</span><span class="token keyword">@link</span> <span class="token reference"><span class="token punctuation">#</span><span class="token field">bgImgStyle</span></span><span class="token punctuation">}</span> ==  QrCodeOptions.BgImgStyle.OVERRIDE，
 * 用于设置二维码的透明度
 */</span>
<span class="token keyword">private</span> <span class="token keyword">float</span> opacity<span class="token punctuation">;</span>


<span class="token doc-comment comment">/**
 * if <span class="token punctuation">{</span><span class="token keyword">@link</span> <span class="token reference"><span class="token punctuation">#</span><span class="token field">bgImgStyle</span></span><span class="token punctuation">}</span> ==  QrCodeOptions.BgImgStyle.FILL
 * <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>
 * 用于设置二维码的绘制在背景图上的x坐标
 */</span>
<span class="token keyword">private</span> <span class="token keyword">int</span> startX<span class="token punctuation">;</span>


<span class="token doc-comment comment">/**
 * if <span class="token punctuation">{</span><span class="token keyword">@link</span> <span class="token reference"><span class="token punctuation">#</span><span class="token field">bgImgStyle</span></span><span class="token punctuation">}</span> ==  QrCodeOptions.BgImgStyle.FILL
 * <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>
 * 用于设置二维码的绘制在背景图上的y坐标
 */</span>
<span class="token keyword">private</span> <span class="token keyword">int</span> startY<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>前置图配置</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token doc-comment comment">/**
 * 前置图
 */</span>
<span class="token keyword">private</span> <span class="token class-name">BufferedImage</span> ftImg<span class="token punctuation">;</span>

<span class="token doc-comment comment">/**
 * 背景图样式
 */</span>
<span class="token keyword">private</span> <span class="token class-name">ImgStyle</span> imgStyle<span class="token punctuation">;</span>

<span class="token doc-comment comment">/**
 * 圆角弧度，默认为宽高中较小值的 1/8
 */</span>
<span class="token keyword">private</span> <span class="token class-name">Float</span> radius<span class="token punctuation">;</span>

<span class="token doc-comment comment">/**
 * 动态前置图
 */</span>
<span class="token keyword">private</span> <span class="token class-name">GifDecoder</span> gifDecoder<span class="token punctuation">;</span>

<span class="token doc-comment comment">/**
 * 背景图宽
 */</span>
<span class="token keyword">private</span> <span class="token keyword">int</span> ftW<span class="token punctuation">;</span>

<span class="token doc-comment comment">/**
 * 背景图高
 */</span>
<span class="token keyword">private</span> <span class="token keyword">int</span> ftH<span class="token punctuation">;</span>

<span class="token doc-comment comment">/**
 * 用于设置二维码的绘制在前置图上的x坐标
 */</span>
<span class="token keyword">private</span> <span class="token keyword">int</span> startX<span class="token punctuation">;</span>


<span class="token doc-comment comment">/**
 * 用于设置二维码的绘制在前置图上的y坐标
 */</span>
<span class="token keyword">private</span> <span class="token keyword">int</span> startY<span class="token punctuation">;</span>

<span class="token doc-comment comment">/**
 * 填充色
 */</span>
<span class="token keyword">private</span> <span class="token class-name">Color</span> fillColor<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>接下来我们通过一系列的实例代码，来演示如何生成各种酷炫的二维码</p><h3 id="a-基本二维码" tabindex="-1"><a class="header-anchor" href="#a-基本二维码" aria-hidden="true">#</a> a. 基本二维码</h3><p>生成一个最常见的最普通的二维码，并保存到<code>qr.png</code>文件，一行代码即可</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token class-name">String</span> msg <span class="token operator">=</span> <span class="token string">&quot;http://weixin.qq.com/r/FS9waAPEg178rUcL93oH&quot;</span><span class="token punctuation">;</span>
<span class="token comment">// 生成二维码，并输出为qr.png图片</span>
<span class="token keyword">boolean</span> ans <span class="token operator">=</span> <span class="token class-name">QrCodeGenWrapper</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">asFile</span><span class="token punctuation">(</span><span class="token string">&quot;qr.png&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="https://blog.hhui.top/hexblog/imgs/quick/quick-media/dq.jpg" alt="dq" tabindex="0" loading="lazy"><figcaption>dq</figcaption></figure><p><strong>v2.5.2 新增二维码圆角设置</strong></p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token doc-comment comment">/**
 * 默认的二维码生成
 */</span>
<span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">defaultQr_corner</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
        <span class="token comment">// 生成二维码，并输出为qr.png图片</span>
        <span class="token class-name">String</span> msg <span class="token operator">=</span> <span class="token string">&quot;http://weixin.qq.com/r/FS9waAPEg178rUcL93oH&quot;</span><span class="token punctuation">;</span>
        <span class="token keyword">boolean</span> ans <span class="token operator">=</span> <span class="token class-name">QrCodeGenWrapper</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">setW</span><span class="token punctuation">(</span><span class="token number">500</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">setPadding</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span>
                <span class="token comment">// 圆角二维码, 不建议使用圆形的二维码，会导致生成的二维码不可用</span>
                <span class="token punctuation">.</span><span class="token function">setQrStyle</span><span class="token punctuation">(</span><span class="token class-name">QrCodeOptions<span class="token punctuation">.</span>ImgStyle</span><span class="token punctuation">.</span><span class="token constant">ROUND</span><span class="token punctuation">)</span>
                <span class="token comment">// 圆角弧度默认是宽高的 1/8, 可以根据需要自行设置 </span>
                <span class="token punctuation">.</span><span class="token function">setQrCornerRadiusRate</span><span class="token punctuation">(</span><span class="token number">0.125F</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">setPicType</span><span class="token punctuation">(</span><span class="token string">&quot;png&quot;</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">asFile</span><span class="token punctuation">(</span><span class="token string">&quot;/tmp/dq_corner1.png&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>输出圆角的二维码图片(建议图片右键新标签页打开，可以看到明显的四边圆角)</p><figure><img src="https://blog.hhui.top/hexblog/imgs/quick/quick-media/dq_corner1.png" alt="圆角二维码" tabindex="0" loading="lazy"><figcaption>圆角二维码</figcaption></figure><h3 id="b-颜色指定" tabindex="-1"><a class="header-anchor" href="#b-颜色指定" aria-hidden="true">#</a> b. 颜色指定</h3><p>默认的二维码为白底黑块，如果我希望生成白底蓝块（探测图形外青内红）的二维码，可以如下使用</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token class-name">String</span> msg <span class="token operator">=</span> <span class="token string">&quot;http://weixin.qq.com/r/FS9waAPEg178rUcL93oH&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">boolean</span> ans <span class="token operator">=</span> <span class="token class-name">QrCodeGenWrapper</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">setW</span><span class="token punctuation">(</span><span class="token number">300</span><span class="token punctuation">)</span>
        <span class="token comment">// 探测图形特殊处理</span>
        <span class="token punctuation">.</span><span class="token function">setDetectSpecial</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token comment">// 定位点(探测图形)外边颜色</span>
        <span class="token punctuation">.</span><span class="token function">setDetectOutColor</span><span class="token punctuation">(</span><span class="token class-name">Color</span><span class="token punctuation">.</span><span class="token constant">CYAN</span><span class="token punctuation">)</span>
        <span class="token comment">// 定位点内部颜色</span>
        <span class="token punctuation">.</span><span class="token function">setDetectInColor</span><span class="token punctuation">(</span><span class="token class-name">Color</span><span class="token punctuation">.</span><span class="token constant">RED</span><span class="token punctuation">)</span>
        <span class="token comment">// 二维码着色点</span>
        <span class="token punctuation">.</span><span class="token function">setDrawPreColor</span><span class="token punctuation">(</span><span class="token class-name">Color</span><span class="token punctuation">.</span><span class="token constant">BLUE</span><span class="token punctuation">)</span>
        <span class="token comment">// 二维码背景图</span>
        <span class="token punctuation">.</span><span class="token function">setDrawBgColor</span><span class="token punctuation">(</span><span class="token number">0xffffffff</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">asFile</span><span class="token punctuation">(</span><span class="token string">&quot;/tmp/cqr.png&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="https://blog.hhui.top/hexblog/imgs/quick/quick-media/cqr.jpg" alt="cqr.png" tabindex="0" loading="lazy"><figcaption>cqr.png</figcaption></figure><h3 id="c-带logo二维码生成" tabindex="-1"><a class="header-anchor" href="#c-带logo二维码生成" aria-hidden="true">#</a> c. 带logo二维码生成</h3><p>logo目前支持两种样式，一个是圆角logo，一个是直接原图不做处理；下面是一个简单的圆角logo，并带上边框的实例</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token class-name">String</span> msg <span class="token operator">=</span> <span class="token string">&quot;http://weixin.qq.com/r/FS9waAPEg178rUcL93oH&quot;</span><span class="token punctuation">;</span>
<span class="token comment">// 这里的图片地址，支持网络图片，本地相对路劲图片，本地绝对路径图片</span>
<span class="token class-name">String</span> logo <span class="token operator">=</span> <span class="token string">&quot;https://static.oschina.net/uploads/user/283/566591_100.jpeg&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">boolean</span> ans <span class="token operator">=</span> <span class="token class-name">QrCodeGenWrapper</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">setLogo</span><span class="token punctuation">(</span>logo<span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">setLogoStyle</span><span class="token punctuation">(</span><span class="token class-name">QrCodeOptions<span class="token punctuation">.</span>LogoStyle</span><span class="token punctuation">.</span><span class="token constant">ROUND</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">setLogoBgColor</span><span class="token punctuation">(</span><span class="token number">0xfffefefe</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">setLogoBorderBgColor</span><span class="token punctuation">(</span><span class="token number">0xffc7c7c7</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">setLogoBorder</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">asFile</span><span class="token punctuation">(</span><span class="token string">&quot;/tmp/lqr3.png&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>下图展示了四张带logo的二维码</p><ul><li>原始logo</li><li>直角带logo背景色</li><li>圆角带logo背景色</li><li>圆角带logo背景，边框</li></ul><p><strong>说明：2.4.2版本优化了logo的锯齿严重的问题</strong></p><figure><img src="https://blog.hhui.top/hexblog/imgs/quick/quick-media/logo.jpg" alt="logo" tabindex="0" loading="lazy"><figcaption>logo</figcaption></figure><p><strong>v2.4版本新增圆形logo</strong></p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token doc-comment comment">/**
 * 带外边框的圆形logo
 */</span>
<span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">logoQr4</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
        <span class="token class-name">String</span> msg <span class="token operator">=</span> <span class="token string">&quot;http://weixin.qq.com/r/FS9waAPEg178rUcL93oH&quot;</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> logo <span class="token operator">=</span> <span class="token string">&quot;logo.jpg&quot;</span><span class="token punctuation">;</span>
        <span class="token keyword">boolean</span> ans <span class="token operator">=</span> <span class="token class-name">QrCodeGenWrapper</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">setW</span><span class="token punctuation">(</span><span class="token number">400</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">setLogo</span><span class="token punctuation">(</span>logo<span class="token punctuation">)</span>
                <span class="token comment">// 圆形logo支持</span>
                <span class="token punctuation">.</span><span class="token function">setLogoStyle</span><span class="token punctuation">(</span><span class="token class-name">QrCodeOptions<span class="token punctuation">.</span>LogoStyle</span><span class="token punctuation">.</span><span class="token constant">CIRCLE</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">setLogoBgColor</span><span class="token punctuation">(</span><span class="token number">0xfffefefe</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">setLogoBorderBgColor</span><span class="token punctuation">(</span><span class="token number">0xffc7c7c7</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">setLogoBorder</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">asFile</span><span class="token punctuation">(</span><span class="token string">&quot;/tmp/lqr4.png&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="https://blog.hhui.top/hexblog/imgs/quick/quick-media/lqr4.png" alt="logo" tabindex="0" loading="lazy"><figcaption>logo</figcaption></figure><h3 id="d-指定背景图" tabindex="-1"><a class="header-anchor" href="#d-指定背景图" aria-hidden="true">#</a> d. 指定背景图</h3><p>背景图目前支持三种样式，分别是二维码全覆盖在背景图上，在背景图的自定区间进行绘制二维码，生成透明二维码但使用背景图进行渲染，下面</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token comment">// 默认属于全覆盖的背景模式，对应下图中图1</span>
<span class="token class-name">String</span> msg <span class="token operator">=</span> <span class="token string">&quot;http://weixin.qq.com/r/FS9waAPEg178rUcL93oH&quot;</span><span class="token punctuation">;</span>
<span class="token class-name">String</span> bg <span class="token operator">=</span> <span class="token string">&quot;http://ww1.sinaimg.cn/large/8154e929gy1g8vho8x6r0j20b40b43yl.jpg&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">boolean</span> ans <span class="token operator">=</span> <span class="token class-name">QrCodeGenWrapper</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">setBgImg</span><span class="token punctuation">(</span>bg<span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">setW</span><span class="token punctuation">(</span><span class="token number">500</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">setBgOpacity</span><span class="token punctuation">(</span><span class="token number">0.5f</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">asFile</span><span class="token punctuation">(</span><span class="token string">&quot;/tmp/bqr1.png&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 指定为填充模式，在背景图的坐标(startX, startY)处绘制二维码(左上角坐标为0,0); 对应下图中的图2</span>
bg <span class="token operator">=</span> <span class="token string">&quot;http://pic.51yuansu.com/pic3/cover/01/07/09/59015a0e53d83_610.jpg&quot;</span><span class="token punctuation">;</span>
ans <span class="token operator">=</span> <span class="token class-name">QrCodeGenWrapper</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">setBgImg</span><span class="token punctuation">(</span>bg<span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">setBgStyle</span><span class="token punctuation">(</span><span class="token class-name">QrCodeOptions<span class="token punctuation">.</span>BgImgStyle</span><span class="token punctuation">.</span><span class="token constant">FILL</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">setBgW</span><span class="token punctuation">(</span><span class="token number">500</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">setBgH</span><span class="token punctuation">(</span><span class="token number">500</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">setBgStartX</span><span class="token punctuation">(</span><span class="token number">130</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">setBgStartY</span><span class="token punctuation">(</span><span class="token number">120</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">setW</span><span class="token punctuation">(</span><span class="token number">260</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">setPadding</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">setDrawBgColor</span><span class="token punctuation">(</span><span class="token number">0xfff7f7f7</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">asFile</span><span class="token punctuation">(</span><span class="token string">&quot;/tmp/bqr2.png&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        
<span class="token comment">// 背景渲染方式，用背景图来填充二维码，对应下图中的图3</span>
bg <span class="token operator">=</span> <span class="token string">&quot;http://img1.juimg.com/180517/355855-1P51H3520817.jpg&quot;</span><span class="token punctuation">;</span>
ans <span class="token operator">=</span> <span class="token class-name">QrCodeGenWrapper</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">setBgImg</span><span class="token punctuation">(</span>bg<span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">setBgStyle</span><span class="token punctuation">(</span><span class="token class-name">QrCodeOptions<span class="token punctuation">.</span>BgImgStyle</span><span class="token punctuation">.</span><span class="token constant">PENETRATE</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">setBgW</span><span class="token punctuation">(</span><span class="token number">500</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">setBgH</span><span class="token punctuation">(</span><span class="token number">500</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">setW</span><span class="token punctuation">(</span><span class="token number">500</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">asFile</span><span class="token punctuation">(</span><span class="token string">&quot;/tmp/bqr3.png&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        

<span class="token comment">// 针对第一种背景方式的扩展，二维码前置、后置都可以使用图片替换</span>
<span class="token class-name">String</span> bg <span class="token operator">=</span> <span class="token string">&quot;overbg/bg.jpg&quot;</span><span class="token punctuation">;</span>
<span class="token class-name">String</span> cell <span class="token operator">=</span> <span class="token string">&quot;overbg/a.png&quot;</span><span class="token punctuation">;</span>
<span class="token class-name">String</span> bgCell <span class="token operator">=</span> <span class="token string">&quot;overbg/b.png&quot;</span><span class="token punctuation">;</span>
<span class="token class-name">Boolean</span> ans <span class="token operator">=</span> <span class="token class-name">QrCodeGenWrapper</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">setBgImg</span><span class="token punctuation">(</span>bg<span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">setW</span><span class="token punctuation">(</span><span class="token number">500</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">setErrorCorrection</span><span class="token punctuation">(</span><span class="token class-name">ErrorCorrectionLevel<span class="token punctuation">.</span>H</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">setBgStyle</span><span class="token punctuation">(</span><span class="token class-name">QrCodeOptions<span class="token punctuation">.</span>BgImgStyle</span><span class="token punctuation">.</span><span class="token constant">OVERRIDE</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">setDrawStyle</span><span class="token punctuation">(</span><span class="token class-name">QrCodeOptions<span class="token punctuation">.</span>DrawStyle</span><span class="token punctuation">.</span><span class="token constant">IMAGE</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">setDrawImg</span><span class="token punctuation">(</span>cell<span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">setDrawBgImg</span><span class="token punctuation">(</span>bgCell<span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">asFile</span><span class="token punctuation">(</span><span class="token string">&quot;/tmp/bqr4.png&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="https://blog.hhui.top/hexblog/imgs/quick/quick-media/qbg.jpg" alt="qbg.png" tabindex="0" loading="lazy"><figcaption>qbg.png</figcaption></figure><p>给出一个背景图为文字的二维码输出演示case</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">bgQrTxt</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
        <span class="token class-name">String</span> msg <span class="token operator">=</span> <span class="token string">&quot;http://weixin.qq.com/r/FS9waAPEg178rUcL93oH&quot;</span><span class="token punctuation">;</span>
        <span class="token class-name">BufferedImage</span> bgImg <span class="token operator">=</span> <span class="token class-name">GraphicUtil</span><span class="token punctuation">.</span><span class="token function">createImg</span><span class="token punctuation">(</span><span class="token number">500</span><span class="token punctuation">,</span> <span class="token number">500</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Graphics2D</span> g2d <span class="token operator">=</span> <span class="token class-name">GraphicUtil</span><span class="token punctuation">.</span><span class="token function">getG2d</span><span class="token punctuation">(</span>bgImg<span class="token punctuation">)</span><span class="token punctuation">;</span>
        g2d<span class="token punctuation">.</span><span class="token function">setColor</span><span class="token punctuation">(</span><span class="token class-name">Color</span><span class="token punctuation">.</span><span class="token constant">LIGHT_GRAY</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        g2d<span class="token punctuation">.</span><span class="token function">fillRect</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">500</span><span class="token punctuation">,</span> <span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">Font</span> font <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Font</span><span class="token punctuation">(</span><span class="token string">&quot;宋体&quot;</span><span class="token punctuation">,</span> <span class="token class-name">Font</span><span class="token punctuation">.</span><span class="token constant">BOLD</span><span class="token punctuation">,</span> <span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        g2d<span class="token punctuation">.</span><span class="token function">setFont</span><span class="token punctuation">(</span>font<span class="token punctuation">)</span><span class="token punctuation">;</span>
        g2d<span class="token punctuation">.</span><span class="token function">setColor</span><span class="token punctuation">(</span><span class="token class-name">Color</span><span class="token punctuation">.</span><span class="token constant">RED</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        g2d<span class="token punctuation">.</span><span class="token function">drawString</span><span class="token punctuation">(</span><span class="token string">&quot;码&quot;</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">500</span> <span class="token operator">-</span> g2d<span class="token punctuation">.</span><span class="token function">getFontMetrics</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getDescent</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        g2d<span class="token punctuation">.</span><span class="token function">dispose</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">boolean</span> ans <span class="token operator">=</span> <span class="token class-name">QrCodeGenWrapper</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">setBgImg</span><span class="token punctuation">(</span>bgImg<span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">setBgStyle</span><span class="token punctuation">(</span><span class="token class-name">QrCodeOptions<span class="token punctuation">.</span>BgImgStyle</span><span class="token punctuation">.</span><span class="token constant">PENETRATE</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">setBgW</span><span class="token punctuation">(</span><span class="token number">500</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">setBgH</span><span class="token punctuation">(</span><span class="token number">500</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">setW</span><span class="token punctuation">(</span><span class="token number">500</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">asFile</span><span class="token punctuation">(</span><span class="token string">&quot;/tmp/bqrTxt.png&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="https://blog.hhui.top/hexblog/imgs/quick/quick-media/bqrTxt.png" alt="bgTxt.png" tabindex="0" loading="lazy"><figcaption>bgTxt.png</figcaption></figure><p><strong>v2.5.2 支持背景图圆角、圆形设置</strong></p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">bgQr1_corner</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
        <span class="token class-name">String</span> msg <span class="token operator">=</span> <span class="token string">&quot;http://weixin.qq.com/r/FS9waAPEg178rUcL93oH&quot;</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> bg <span class="token operator">=</span> <span class="token string">&quot;https://ss0.bdstatic.com/70cFuHSh_Q1YnxGkpoWK1HF6hhy/it/u=2859744156,2204003006&amp;fm=26&amp;gp=0.jpg&quot;</span><span class="token punctuation">;</span>
        <span class="token keyword">boolean</span> ans <span class="token operator">=</span> <span class="token class-name">QrCodeGenWrapper</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">setBgImg</span><span class="token punctuation">(</span>bg<span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">setW</span><span class="token punctuation">(</span><span class="token number">500</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">setBgOpacity</span><span class="token punctuation">(</span><span class="token number">0.6f</span><span class="token punctuation">)</span>
                <span class="token comment">// 背景圆角比例</span>
                <span class="token punctuation">.</span><span class="token function">setBgCornerRadiusRate</span><span class="token punctuation">(</span><span class="token number">0.125f</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">setBgImgStyle</span><span class="token punctuation">(</span><span class="token class-name">QrCodeOptions<span class="token punctuation">.</span>ImgStyle</span><span class="token punctuation">.</span><span class="token constant">ROUND</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">asFile</span><span class="token punctuation">(</span><span class="token string">&quot;/tmp/bqr1_c1.png&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">bgQr1_circle</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
        <span class="token class-name">String</span> msg <span class="token operator">=</span> <span class="token string">&quot;http://weixin.qq.com/r/FS9waAPEg178rUcL93oH&quot;</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> bg <span class="token operator">=</span> <span class="token string">&quot;http://pic.51yuansu.com/pic3/cover/01/07/09/59015a0e53d83_610.jpg&quot;</span><span class="token punctuation">;</span>
        <span class="token keyword">boolean</span> ans <span class="token operator">=</span> <span class="token class-name">QrCodeGenWrapper</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">setBgImg</span><span class="token punctuation">(</span>bg<span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">setBgStyle</span><span class="token punctuation">(</span><span class="token class-name">QrCodeOptions<span class="token punctuation">.</span>BgImgStyle</span><span class="token punctuation">.</span><span class="token constant">FILL</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">setBgW</span><span class="token punctuation">(</span><span class="token number">500</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">setBgH</span><span class="token punctuation">(</span><span class="token number">500</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">setBgStartX</span><span class="token punctuation">(</span><span class="token number">130</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">setBgStartY</span><span class="token punctuation">(</span><span class="token number">120</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">setW</span><span class="token punctuation">(</span><span class="token number">260</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">setPadding</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">setDrawBgColor</span><span class="token punctuation">(</span><span class="token number">0xfff7f7f7</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">setBgImgStyle</span><span class="token punctuation">(</span><span class="token class-name">QrCodeOptions<span class="token punctuation">.</span>ImgStyle</span><span class="token punctuation">.</span><span class="token constant">CIRCLE</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">asFile</span><span class="token punctuation">(</span><span class="token string">&quot;/tmp/bqr2_c2.png&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="https://blog.hhui.top/hexblog/imgs/quick/quick-media/bg_style.png" alt="bg_style" tabindex="0" loading="lazy"><figcaption>bg_style</figcaption></figure><h3 id="e-探测图形样式指定" tabindex="-1"><a class="header-anchor" href="#e-探测图形样式指定" aria-hidden="true">#</a> e. 探测图形样式指定</h3><p>探测图形，指的是左上角、右上角、左下角的三个”回字“，除了上面介绍到的指定不同的颜色之外，还可以用图片替换</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token comment">// 指定探测图形为固定图片，输出如下图中图1</span>
<span class="token class-name">QrCodeGenWrapper</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">setW</span><span class="token punctuation">(</span><span class="token number">500</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">setDetectImg</span><span class="token punctuation">(</span><span class="token string">&quot;detect.png&quot;</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">asFile</span><span class="token punctuation">(</span><span class="token string">&quot;/tmp/tqr1.png&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        

<span class="token comment">// 分别制定三个探测图形，对应三个图片，输出如下图中图2</span>
<span class="token class-name">QrCodeGenWrapper</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">setW</span><span class="token punctuation">(</span><span class="token number">500</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">setLTDetectImg</span><span class="token punctuation">(</span><span class="token string">&quot;leaf/eye.png&quot;</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">setLDDetectImg</span><span class="token punctuation">(</span><span class="token string">&quot;jihe/PDP.png&quot;</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">setRTDetectImg</span><span class="token punctuation">(</span><span class="token string">&quot;love/01.png&quot;</span><span class="token punctuation">)</span>
        <span class="token comment">// 这个参数表示探测图形中的透明区域，用二维码背景色填充</span>
        <span class="token punctuation">.</span><span class="token function">setDiaphaneityFill</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">asFile</span><span class="token punctuation">(</span><span class="token string">&quot;/tmp/tqr2.png&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="https://blog.hhui.top/hexblog/imgs/quick/quick-media/tqr.jpg" alt="探测" tabindex="0" loading="lazy"><figcaption>探测</figcaption></figure><p><strong>v2.4 探测图形新增参数special</strong></p><ul><li>true: 表示探测图形独立绘制，与二维码的绘制样式不同；请注意当设置探测图形img时，这个参数默认为true</li><li>false: 探测图形的渲染和二维码一致</li></ul><p>下面两段代码生成分别为下图一二，请注意<code>setDetectSpecial()</code>设置之后探测图形并不一样了</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">detectedQr3</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">String</span> msg <span class="token operator">=</span> <span class="token string">&quot;http://weixin.qq.com/r/FS9waAPEg178rUcL93oH&quot;</span><span class="token punctuation">;</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
        <span class="token class-name">QrCodeGenWrapper</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">setDrawStyle</span><span class="token punctuation">(</span><span class="token class-name">QrCodeOptions<span class="token punctuation">.</span>DrawStyle</span><span class="token punctuation">.</span><span class="token constant">CIRCLE</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">setDrawEnableScale</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">asFile</span><span class="token punctuation">(</span><span class="token string">&quot;/tmp/tqr3.png&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">detectedQr4</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">String</span> msg <span class="token operator">=</span> <span class="token string">&quot;http://weixin.qq.com/r/FS9waAPEg178rUcL93oH&quot;</span><span class="token punctuation">;</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
        <span class="token class-name">QrCodeGenWrapper</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">setDetectSpecial</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">setDrawStyle</span><span class="token punctuation">(</span><span class="token class-name">QrCodeOptions<span class="token punctuation">.</span>DrawStyle</span><span class="token punctuation">.</span><span class="token constant">CIRCLE</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">setDrawEnableScale</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">asFile</span><span class="token punctuation">(</span><span class="token string">&quot;/tmp/tqr4.png&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="https://blog.hhui.top/hexblog/imgs/quick/quick-media/tqr3.png" alt="探测" tabindex="0" loading="lazy"><figcaption>探测</figcaption></figure><h3 id="f-几何样式二维码生成" tabindex="-1"><a class="header-anchor" href="#f-几何样式二维码生成" aria-hidden="true">#</a> f. 几何样式二维码生成</h3><p>默认的二维码的信息为黑色小方块，本插件提供了其他的几个常见的几何形式支持，如圆点，三角，钻石，六边形，八边形；通过指定DrawStyle参数即可</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token class-name">String</span> msg <span class="token operator">=</span> <span class="token string">&quot;http://weixin.qq.com/r/FS9waAPEg178rUcL93oH&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">boolean</span> ans <span class="token operator">=</span> <span class="token class-name">QrCodeGenWrapper</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">setW</span><span class="token punctuation">(</span><span class="token number">400</span><span class="token punctuation">)</span>
        <span class="token comment">// 支持将临近相同的合并成一个大的圆点</span>
        <span class="token punctuation">.</span><span class="token function">setDrawEnableScale</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">setDrawStyle</span><span class="token punctuation">(</span><span class="token class-name">QrCodeOptions<span class="token punctuation">.</span>DrawStyle</span><span class="token punctuation">.</span><span class="token constant">CIRCLE</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">asFile</span><span class="token punctuation">(</span><span class="token string">&quot;/tmp/dqr6.png&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="https://blog.hhui.top/hexblog/imgs/quick/quick-media/dqr6.jpg" alt="几何" tabindex="0" loading="lazy"><figcaption>几何</figcaption></figure><p><strong>v2.4 新增文字二维码</strong></p><ul><li>指定一串字符串，根据字符串内容生成二维码</li></ul><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">fontQr1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">String</span> msg <span class="token operator">=</span> <span class="token string">&quot;http://weixin.qq.com/r/FS9waAPEg178rUcL93oH&quot;</span><span class="token punctuation">;</span>

    <span class="token keyword">int</span> size <span class="token operator">=</span> <span class="token number">500</span><span class="token punctuation">;</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
        <span class="token keyword">boolean</span> ans <span class="token operator">=</span> <span class="token class-name">QrCodeGenWrapper</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">setW</span><span class="token punctuation">(</span>size<span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">setH</span><span class="token punctuation">(</span>size<span class="token punctuation">)</span>
                <span class="token comment">// 不指定text时，默认文本为千字文，宋体加粗</span>
                <span class="token punctuation">.</span><span class="token function">setQrText</span><span class="token punctuation">(</span><span class="token string">&quot;我是一灰灰欢迎关注&quot;</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">setDetectSpecial</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">setErrorCorrection</span><span class="token punctuation">(</span><span class="token class-name">ErrorCorrectionLevel<span class="token punctuation">.</span>H</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">setDrawStyle</span><span class="token punctuation">(</span><span class="token class-name">QrCodeOptions<span class="token punctuation">.</span>DrawStyle</span><span class="token punctuation">.</span><span class="token constant">TXT</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">setPicType</span><span class="token punctuation">(</span><span class="token string">&quot;png&quot;</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">asFile</span><span class="token punctuation">(</span><span class="token string">&quot;/tmp/fontQr1.png&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="https://blog.hhui.top/hexblog/imgs/quick/quick-media/fontQr1.png" alt="文字二维码" tabindex="0" loading="lazy"><figcaption>文字二维码</figcaption></figure><p><strong>v2.4.1 支持文字二维码渲染模式（顺序or随机）</strong></p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token doc-comment comment">/**
 * 文字二维码
 */</span>
<span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">fontQr3</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">String</span> msg <span class="token operator">=</span> <span class="token string">&quot;http://weixin.qq.com/r/FS9waAPEg178rUcL93oH&quot;</span><span class="token punctuation">;</span>

    <span class="token keyword">try</span> <span class="token punctuation">{</span>
        <span class="token keyword">boolean</span> ans <span class="token operator">=</span> <span class="token class-name">QrCodeGenWrapper</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">setQrText</span><span class="token punctuation">(</span><span class="token string">&quot;欢迎关注一灰灰&quot;</span><span class="token punctuation">)</span>
                <span class="token comment">// 指定文字随机渲染方式</span>
                <span class="token punctuation">.</span><span class="token function">setQrTxtMode</span><span class="token punctuation">(</span><span class="token class-name">QrCodeOptions<span class="token punctuation">.</span>TxtMode</span><span class="token punctuation">.</span><span class="token constant">RANDOM</span><span class="token punctuation">)</span>
                <span class="token comment">// true 则探测图形有自己的绘制规则</span>
                <span class="token punctuation">.</span><span class="token function">setDetectSpecial</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">setErrorCorrection</span><span class="token punctuation">(</span><span class="token class-name">ErrorCorrectionLevel<span class="token punctuation">.</span>H</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">setDrawStyle</span><span class="token punctuation">(</span><span class="token class-name">QrCodeOptions<span class="token punctuation">.</span>DrawStyle</span><span class="token punctuation">.</span><span class="token constant">TXT</span><span class="token punctuation">)</span>
                <span class="token comment">// 当相邻的NxN都是黑色小方块时，放大（慎用，因为部分汉子如 \`一\` 无法友好的填充2x2的方块）</span>
                <span class="token punctuation">.</span><span class="token function">setDrawEnableScale</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">setPicType</span><span class="token punctuation">(</span><span class="token string">&quot;png&quot;</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">asFile</span><span class="token punctuation">(</span><span class="token string">&quot;/tmp/fontQr3.png&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>v2.6.0 新增MINI_RECT样式</strong></p><figure><img src="https://blog.hhui.top/hexblog/imgs/quick/quick-media/dqr0_260.png" alt="MINI_RECT" tabindex="0" loading="lazy"><figcaption>MINI_RECT</figcaption></figure><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">miniRectQr</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
        <span class="token class-name">String</span> msg <span class="token operator">=</span> <span class="token string">&quot;http://weixin.qq.com/r/FS9waAPEg178rUcL93oH&quot;</span><span class="token punctuation">;</span>
        <span class="token keyword">boolean</span> ans <span class="token operator">=</span> <span class="token class-name">QrCodeGenWrapper</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">setW</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">)</span>
                <span class="token comment">// 如果希望探测图形依然是标准的，加上下面这一行</span>
<span class="token comment">//                    .setDetectSpecial()</span>
                <span class="token punctuation">.</span><span class="token function">setDrawStyle</span><span class="token punctuation">(</span><span class="token class-name">QrCodeOptions<span class="token punctuation">.</span>DrawStyle</span><span class="token punctuation">.</span><span class="token constant">MINI_RECT</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">asFile</span><span class="token punctuation">(</span>prefix <span class="token operator">+</span> <span class="token string">&quot;/dqr0_1.png&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="g-图片填充" tabindex="-1"><a class="header-anchor" href="#g-图片填充" aria-hidden="true">#</a> g. 图片填充</h3><p>如果你有一套完整的素材，那么可以考虑用这些素材来生成一个更漂亮的二维码；</p><p>比如项目的测试中，给出了两套输出，一个爱心，一个集合图形</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token class-name">String</span> msg <span class="token operator">=</span> <span class="token string">&quot;http://weixin.qq.com/r/FS9waAPEg178rUcL93oH&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> size <span class="token operator">=</span> <span class="token number">500</span><span class="token punctuation">;</span>

<span class="token comment">// 爱心素材生成的二维码图片，如下图中的图1，请注意我们的二维码背景渲染色指定为透明，最终输出的二维码也是带透明度的png图片，</span>
<span class="token keyword">boolean</span> ans <span class="token operator">=</span> <span class="token class-name">QrCodeGenWrapper</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">setW</span><span class="token punctuation">(</span>size<span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">setH</span><span class="token punctuation">(</span>size<span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">setErrorCorrection</span><span class="token punctuation">(</span><span class="token class-name">ErrorCorrectionLevel<span class="token punctuation">.</span>M</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">setDrawBgColor</span><span class="token punctuation">(</span><span class="token class-name">ColorUtil</span><span class="token punctuation">.</span><span class="token constant">OPACITY</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">setDetectImg</span><span class="token punctuation">(</span><span class="token string">&quot;love/01.png&quot;</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">setDrawStyle</span><span class="token punctuation">(</span><span class="token class-name">QrCodeOptions<span class="token punctuation">.</span>DrawStyle</span><span class="token punctuation">.</span><span class="token constant">IMAGE</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">addImg</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;love/003_01.png&quot;</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">addImg</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;love/004.png&quot;</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">addImg</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token string">&quot;love/004_02.png&quot;</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">asFile</span><span class="token punctuation">(</span><span class="token string">&quot;/tmp/imgQr1.png&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 几何素材生成的二维码图片</span>
ans <span class="token operator">=</span> <span class="token class-name">QrCodeGenWrapper</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">setW</span><span class="token punctuation">(</span>size<span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">setH</span><span class="token punctuation">(</span>size<span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">setErrorCorrection</span><span class="token punctuation">(</span><span class="token class-name">ErrorCorrectionLevel<span class="token punctuation">.</span>H</span><span class="token punctuation">)</span>
        <span class="token comment">// 因为素材为png透明图，我们这里设置二维码的背景为透明，输出更加优雅</span>
        <span class="token punctuation">.</span><span class="token function">setDrawBgColor</span><span class="token punctuation">(</span><span class="token class-name">ColorUtil</span><span class="token punctuation">.</span><span class="token constant">OPACITY</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">setDetectImg</span><span class="token punctuation">(</span><span class="token string">&quot;jihe/PDP.png&quot;</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">setDrawStyle</span><span class="token punctuation">(</span><span class="token class-name">QrCodeOptions<span class="token punctuation">.</span>DrawStyle</span><span class="token punctuation">.</span><span class="token constant">IMAGE</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">addImg</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;jihe/a.png&quot;</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">addImg</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;jihe/b.png&quot;</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">addImg</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token string">&quot;jihe/c.png&quot;</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">addImg</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">&quot;jihe/e.png&quot;</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">addImg</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token string">&quot;jihe/f.png&quot;</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">addImg</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">&quot;jihe/g.png&quot;</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">addImg</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token string">&quot;jihe/h.png&quot;</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">setPicType</span><span class="token punctuation">(</span><span class="token string">&quot;png&quot;</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">asFile</span><span class="token punctuation">(</span><span class="token string">&quot;/tmp/imgQr2.png&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 除了指定二维码的”前置图片“之外，还可以指定”后置图片“</span>
<span class="token comment">// 注意下图中的图3，其中黑色小点为素材图片，对应二维码中黑色方块;</span>
<span class="token comment">// 白色小点也是素材图片，对应二维码中的白色方块</span>
ans <span class="token operator">=</span> <span class="token class-name">QrCodeGenWrapper</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">setW</span><span class="token punctuation">(</span>size<span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">setH</span><span class="token punctuation">(</span>size<span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">setErrorCorrection</span><span class="token punctuation">(</span><span class="token class-name">ErrorCorrectionLevel<span class="token punctuation">.</span>M</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">setDrawBgColor</span><span class="token punctuation">(</span><span class="token class-name">ColorUtil</span><span class="token punctuation">.</span><span class="token constant">OPACITY</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">setDrawBgImg</span><span class="token punctuation">(</span><span class="token string">&quot;overbg/b.png&quot;</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">setDrawStyle</span><span class="token punctuation">(</span><span class="token class-name">QrCodeOptions<span class="token punctuation">.</span>DrawStyle</span><span class="token punctuation">.</span><span class="token constant">IMAGE</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">setDrawImg</span><span class="token punctuation">(</span><span class="token string">&quot;overbg/a.png&quot;</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">asFile</span><span class="token punctuation">(</span><span class="token string">&quot;/tmp/imgQr3.png&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>使用这种方式，需要稍微注意一下</p><ul><li>必须指定DrawStyle为图片模式</li><li><code>addImg(row, column, img)</code> 来声明素材对应的应用场景，这个表示当出现一个row行，column列都有信息时，用img来填充</li><li><code>setDrawImg</code>: 如果所有的二维码图片都是一个的话，可以用这个方法替代<code>addImg(1,1,img)</code></li><li><code>setDrawBgImg</code>: 设置的是二维码矩阵中为0（即白色小方块）的渲染图片，不是整个二维码的背景图哦</li><li><code>setDrawBgColor(ColorUtil.OPACITY)</code>: 设置二维码绘制背景色为透明，可以充分利用素材图片的透明区域，使显示效果更优雅</li></ul><p>下面是一个是quick-media提供的三种样式模板</p><figure><img src="https://blog.hhui.top/hexblog/imgs/quick/quick-media/imgQr.jpg" alt="imgQr" tabindex="0" loading="lazy"><figcaption>imgQr</figcaption></figure><p><strong>v2.6.0 图片二维码的支持相同位置的多图随机渲染</strong></p><figure><img src="https://blog.hhui.top/hexblog/imgs/quick/quick-media/imgQr2_260.png" alt="MINI_RECT" tabindex="0" loading="lazy"><figcaption>MINI_RECT</figcaption></figure><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">imgQr2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
        <span class="token class-name">String</span> msg <span class="token operator">=</span> <span class="token string">&quot;http://weixin.qq.com/r/FS9waAPEg178rUcL93oH&quot;</span><span class="token punctuation">;</span>
        <span class="token keyword">int</span> size <span class="token operator">=</span> <span class="token number">500</span><span class="token punctuation">;</span>
        <span class="token keyword">boolean</span> ans <span class="token operator">=</span> <span class="token class-name">QrCodeGenWrapper</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">setW</span><span class="token punctuation">(</span>size<span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">setH</span><span class="token punctuation">(</span>size<span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">setErrorCorrection</span><span class="token punctuation">(</span><span class="token class-name">ErrorCorrectionLevel<span class="token punctuation">.</span>M</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">setDrawBgColor</span><span class="token punctuation">(</span><span class="token class-name">ColorUtil</span><span class="token punctuation">.</span><span class="token constant">OPACITY</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">setDetectImg</span><span class="token punctuation">(</span><span class="token string">&quot;love/01.png&quot;</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">setDrawStyle</span><span class="token punctuation">(</span><span class="token class-name">QrCodeOptions<span class="token punctuation">.</span>DrawStyle</span><span class="token punctuation">.</span><span class="token constant">IMAGE</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">addImg</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;love/001.png&quot;</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">addImg</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">&quot;love/003_01.png&quot;</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">addImg</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">&quot;love/003_02.png&quot;</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">addImg</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">&quot;love/003_03.png&quot;</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">addImg</span><span class="token punctuation">(</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;love/004.png&quot;</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">addImg</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token string">&quot;love/004_02.png&quot;</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">asFile</span><span class="token punctuation">(</span>prefix <span class="token operator">+</span> <span class="token string">&quot;/imgQr2.png&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="h-动态二维码" tabindex="-1"><a class="header-anchor" href="#h-动态二维码" aria-hidden="true">#</a> h. 动态二维码</h3><p>接下来介绍一下动态二维码的生成，和背景图的使用姿势基本上完全以往，唯一的区别就是背景图为gif动图</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token comment">// 全覆盖模式，指定二维码的透明度（如下图左）</span>
<span class="token class-name">String</span> msg <span class="token operator">=</span> <span class="token string">&quot;http://weixin.qq.com/r/FS9waAPEg178rUcL93oH&quot;</span><span class="token punctuation">;</span>
<span class="token class-name">String</span> bg <span class="token operator">=</span> <span class="token string">&quot;http://ww1.sinaimg.cn/large/8154e929gy1g8pq78mcgrg20dw0boaja.gif&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">boolean</span> ans <span class="token operator">=</span> <span class="token class-name">QrCodeGenWrapper</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">setW</span><span class="token punctuation">(</span><span class="token number">500</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">setBgImg</span><span class="token punctuation">(</span>bg<span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">setBgOpacity</span><span class="token punctuation">(</span><span class="token number">0.6f</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">setPicType</span><span class="token punctuation">(</span><span class="token string">&quot;gif&quot;</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">asFile</span><span class="token punctuation">(</span><span class="token string">&quot;/tmp/gifQr1.gif&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    

<span class="token comment">// 填充模式，在背景图的指定位置上绘制二维码，属于常见的一种动图模式（如下图中）</span>
bg <span class="token operator">=</span> <span class="token string">&quot;http://ww1.sinaimg.cn/large/8154e929gy1g8qe2iv0evg20xc0irn68.gif&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">boolean</span> ans <span class="token operator">=</span> <span class="token class-name">QrCodeGenWrapper</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">setW</span><span class="token punctuation">(</span><span class="token number">400</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">setBgImg</span><span class="token punctuation">(</span>bg<span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">setBgStyle</span><span class="token punctuation">(</span><span class="token class-name">QrCodeOptions<span class="token punctuation">.</span>BgImgStyle</span><span class="token punctuation">.</span><span class="token constant">FILL</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">setBgStartX</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">setBgStartY</span><span class="token punctuation">(</span><span class="token number">137</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">setPicType</span><span class="token punctuation">(</span><span class="token string">&quot;gif&quot;</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">asFile</span><span class="token punctuation">(</span><span class="token string">&quot;/tmp/gifQr2.gif&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 背景渲染模式，直接用背景图来填充二维码信息，因此可以实现炫酷的二维码（如下图右）</span>
bg <span class="token operator">=</span> <span class="token string">&quot;http://ww1.sinaimg.cn/large/8154e929gy1g8w7wj6qvsg20oy0io4dt.gif&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">boolean</span> ans <span class="token operator">=</span> <span class="token class-name">QrCodeGenWrapper</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">setBgImg</span><span class="token punctuation">(</span>bg<span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">setBgW</span><span class="token punctuation">(</span><span class="token number">500</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">setBgH</span><span class="token punctuation">(</span><span class="token number">500</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">setBgStyle</span><span class="token punctuation">(</span><span class="token class-name">QrCodeOptions<span class="token punctuation">.</span>BgImgStyle</span><span class="token punctuation">.</span><span class="token constant">PENETRATE</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">setW</span><span class="token punctuation">(</span><span class="token number">500</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">asFile</span><span class="token punctuation">(</span><span class="token string">&quot;/tmp/gifQr3.gif&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="https://blog.hhui.top/hexblog/imgs/quick/quick-media/list.gif" alt="list.gif" tabindex="0" loading="lazy"><figcaption>list.gif</figcaption></figure><h3 id="i-前置图" tabindex="-1"><a class="header-anchor" href="#i-前置图" aria-hidden="true">#</a> i. 前置图</h3><p><code>qrcode v2.5.3</code> 提供前置图功能，支持在二维码上层覆盖图片，基本使用姿势如下（项目源码的test中，通过<code>QrCodeGenUserGuide#ft1</code>查看）</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token doc-comment comment">/**
 * 前置图测试，对应下图中的第一张
 */</span>
<span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">ft1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
        <span class="token class-name">String</span> msg <span class="token operator">=</span> <span class="token string">&quot;http://weixin.qq.com/r/FS9waAPEg178rUcL93oH&quot;</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> ft <span class="token operator">=</span> <span class="token string">&quot;ft/ft_1.png&quot;</span><span class="token punctuation">;</span>
        <span class="token keyword">boolean</span> ans <span class="token operator">=</span> <span class="token class-name">QrCodeGenWrapper</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">setDetectImg</span><span class="token punctuation">(</span><span class="token string">&quot;eye3.png&quot;</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">setW</span><span class="token punctuation">(</span><span class="token number">1340</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">setH</span><span class="token punctuation">(</span><span class="token number">1340</span><span class="token punctuation">)</span>
                <span class="token comment">// 下面ft开头的都是前置图设置</span>
                <span class="token punctuation">.</span><span class="token function">setFtImg</span><span class="token punctuation">(</span>ft<span class="token punctuation">)</span>
                <span class="token comment">// 二维码小于前置图，因此剩余的地方用白色填充</span>
                <span class="token punctuation">.</span><span class="token function">setFtFillColor</span><span class="token punctuation">(</span><span class="token class-name">Color</span><span class="token punctuation">.</span><span class="token constant">WHITE</span><span class="token punctuation">)</span>
                <span class="token comment">// 二维码在前置图中的x，y偏移</span>
                <span class="token punctuation">.</span><span class="token function">setFtStartX</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">setFtStartY</span><span class="token punctuation">(</span><span class="token number">130</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">asFile</span><span class="token punctuation">(</span><span class="token string">&quot;/tmp/ft1.png&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="https://blog.hhui.top/hexblog/imgs/quick/quick-media/ft.jpg" alt="list.gif" tabindex="0" loading="lazy"><figcaption>list.gif</figcaption></figure><p>借助前置图，可以实现某些小伙伴希望在二维码的周边加文字的需求，一种方法是设计一个固定文字的模板，直接作为前置图，使用上面的姿势</p><p>也可以自己来生成动态的文字前置图，下面是一个具体实现case</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token doc-comment comment">/**
 * 在二维码周边添加文字的示例，对应上图中间的那个
 */</span>
<span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">ft2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//  创建一个文字的前置图</span>
    <span class="token class-name">BufferedImage</span> ftImg <span class="token operator">=</span> <span class="token class-name">GraphicUtil</span><span class="token punctuation">.</span><span class="token function">createImg</span><span class="token punctuation">(</span><span class="token number">500</span><span class="token punctuation">,</span> <span class="token number">600</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Graphics2D</span> g2d <span class="token operator">=</span> <span class="token class-name">GraphicUtil</span><span class="token punctuation">.</span><span class="token function">getG2d</span><span class="token punctuation">(</span>ftImg<span class="token punctuation">)</span><span class="token punctuation">;</span>
    g2d<span class="token punctuation">.</span><span class="token function">setColor</span><span class="token punctuation">(</span><span class="token class-name">Color</span><span class="token punctuation">.</span><span class="token constant">WHITE</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    g2d<span class="token punctuation">.</span><span class="token function">fillRect</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">500</span><span class="token punctuation">,</span> <span class="token number">500</span><span class="token punctuation">,</span> <span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    g2d<span class="token punctuation">.</span><span class="token function">setColor</span><span class="token punctuation">(</span><span class="token class-name">Color</span><span class="token punctuation">.</span><span class="token constant">BLACK</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    g2d<span class="token punctuation">.</span><span class="token function">setFont</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Font</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token class-name">Font</span><span class="token punctuation">.</span><span class="token constant">PLAIN</span><span class="token punctuation">,</span> <span class="token number">22</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    g2d<span class="token punctuation">.</span><span class="token function">drawString</span><span class="token punctuation">(</span><span class="token string">&quot;欢迎关注《一灰灰Blog》&quot;</span><span class="token punctuation">,</span> <span class="token number">140</span><span class="token punctuation">,</span> <span class="token number">550</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


    <span class="token class-name">String</span> msg <span class="token operator">=</span> <span class="token string">&quot;http://weixin.qq.com/r/FS9waAPEg178rUcL93oH&quot;</span><span class="token punctuation">;</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
        <span class="token keyword">boolean</span> ans <span class="token operator">=</span> <span class="token class-name">QrCodeGenWrapper</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">setW</span><span class="token punctuation">(</span><span class="token number">500</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">setH</span><span class="token punctuation">(</span><span class="token number">500</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">setDetectImg</span><span class="token punctuation">(</span><span class="token string">&quot;eye3.png&quot;</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">setFtImg</span><span class="token punctuation">(</span>ftImg<span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">setFtFillColor</span><span class="token punctuation">(</span><span class="token class-name">Color</span><span class="token punctuation">.</span><span class="token constant">WHITE</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">asFile</span><span class="token punctuation">(</span><span class="token string">&quot;/tmp/ft2.png&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>如果希望文字动态，那么更推荐的是结合<code>image-plugin</code>来使用，比如我可以实现文字垂直输出</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token doc-comment comment">/**
 * 在二维码周边添加文字的实例，借助 image-plugins 来实现，能更简单的满足UI大佬的设计需求
 * 对应上图中右边的那个
 */</span>
<span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">ft3</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
        <span class="token comment">// 二维码</span>
        <span class="token keyword">int</span> qrSize <span class="token operator">=</span> <span class="token number">460</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> msg <span class="token operator">=</span> <span class="token string">&quot;http://weixin.qq.com/r/FS9waAPEg178rUcL93oH&quot;</span><span class="token punctuation">;</span>
        <span class="token class-name">BufferedImage</span> qrImg <span class="token operator">=</span> <span class="token class-name">QrCodeGenWrapper</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">setW</span><span class="token punctuation">(</span>qrSize<span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">setH</span><span class="token punctuation">(</span>qrSize<span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">setDetectImg</span><span class="token punctuation">(</span><span class="token string">&quot;eye3.png&quot;</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">setFtFillColor</span><span class="token punctuation">(</span><span class="token class-name">Color</span><span class="token punctuation">.</span><span class="token constant">WHITE</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">asBufferedImage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">ImgCell</span> qrCell <span class="token operator">=</span> <span class="token class-name">ImgCell</span><span class="token punctuation">.</span><span class="token function">builder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">img</span><span class="token punctuation">(</span>qrImg<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">x</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">y</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


        <span class="token comment">// 修饰文字</span>
        <span class="token class-name">TextCell</span> textCell <span class="token operator">=</span> <span class="token class-name">TextCell</span><span class="token punctuation">.</span><span class="token function">builder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">font</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Font</span><span class="token punctuation">(</span><span class="token string">&quot;宋体&quot;</span><span class="token punctuation">,</span> <span class="token class-name">Font</span><span class="token punctuation">.</span><span class="token constant">BOLD</span><span class="token punctuation">,</span> <span class="token number">22</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">color</span><span class="token punctuation">(</span><span class="token class-name">Color</span><span class="token punctuation">.</span><span class="token constant">BLACK</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">drawStyle</span><span class="token punctuation">(</span><span class="token class-name">ImgCreateOptions<span class="token punctuation">.</span>DrawStyle</span><span class="token punctuation">.</span><span class="token constant">VERTICAL_LEFT</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">alignStyle</span><span class="token punctuation">(</span><span class="token class-name">ImgCreateOptions<span class="token punctuation">.</span>AlignStyle</span><span class="token punctuation">.</span><span class="token constant">CENTER</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">startX</span><span class="token punctuation">(</span><span class="token number">540</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">startY</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">endX</span><span class="token punctuation">(</span><span class="token number">540</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">endY</span><span class="token punctuation">(</span><span class="token number">500</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token string">&quot;欢迎关注&lt;一灰灰Blog&gt;&quot;</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">BufferedImage</span> out <span class="token operator">=</span> <span class="token class-name">ImgMergeWrapper</span><span class="token punctuation">.</span><span class="token function">merge</span><span class="token punctuation">(</span><span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">asList</span><span class="token punctuation">(</span>qrCell<span class="token punctuation">,</span> textCell<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">600</span><span class="token punctuation">,</span> <span class="token number">500</span><span class="token punctuation">,</span> <span class="token class-name">Color</span><span class="token punctuation">.</span><span class="token constant">WHITE</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">ImageIO</span><span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>out<span class="token punctuation">,</span> <span class="token string">&quot;jpg&quot;</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span><span class="token string">&quot;/tmp/ft3.jpg&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>前置渲染模板还支持动态gif，如添加一个动态的logo</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">preGif</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">String</span> pre <span class="token operator">=</span> <span class="token string">&quot;https://iknow-pic.cdn.bcebos.com/f9dcd100baa1cd11dec1529bbd12c8fcc3ce2d11&quot;</span><span class="token punctuation">;</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
        <span class="token comment">// 二维码</span>
        <span class="token keyword">int</span> qrSize <span class="token operator">=</span> <span class="token number">320</span><span class="token punctuation">;</span>
        <span class="token class-name">String</span> msg <span class="token operator">=</span> <span class="token string">&quot;http://weixin.qq.com/r/FS9waAPEg178rUcL93oH&quot;</span><span class="token punctuation">;</span>
        <span class="token class-name">QrCodeGenWrapper</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">setW</span><span class="token punctuation">(</span>qrSize<span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">setH</span><span class="token punctuation">(</span>qrSize<span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">setDrawPreColor</span><span class="token punctuation">(</span><span class="token number">0xff73a7f5</span><span class="token punctuation">)</span>
    <span class="token comment">//                    .setDrawStyle(QrCodeOptions.DrawStyle.CIRCLE)</span>
                <span class="token punctuation">.</span><span class="token function">setDrawEnableScale</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">setFtImg</span><span class="token punctuation">(</span>pre<span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">setFtStartX</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">setFtStartY</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">25</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">setFtFillColor</span><span class="token punctuation">(</span><span class="token class-name">Color</span><span class="token punctuation">.</span><span class="token constant">WHITE</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">asFile</span><span class="token punctuation">(</span><span class="token string">&quot;/tmp/ft_1.gif&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>对应的二维码如下:</p><figure><img src="https://blog.hhui.top/hexblog/imgs/210123/05.gif" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><h3 id="j-综合" tabindex="-1"><a class="header-anchor" href="#j-综合" aria-hidden="true">#</a> j. 综合</h3><p>上面的几种case，是可以组合使用的，最后给一个综合的&quot;求关注&quot;动态二维码的生成实例</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token class-name">String</span> msg <span class="token operator">=</span> <span class="token string">&quot;http://weixin.qq.com/r/FS9waAPEg178rUcL93oH&quot;</span><span class="token punctuation">;</span>
<span class="token comment">// 网络动图背景</span>
<span class="token class-name">String</span> bg <span class="token operator">=</span> <span class="token string">&quot;http://ww1.sinaimg.cn/large/8154e929gy1g8w9jsxwtdg20pz08zwr8.gif&quot;</span><span class="token punctuation">;</span>
<span class="token comment">// 本地logo</span>
<span class="token class-name">String</span> logo <span class="token operator">=</span> <span class="token string">&quot;logo.jpg&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">boolean</span> ans <span class="token operator">=</span> <span class="token class-name">QrCodeGenWrapper</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span>msg<span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">setW</span><span class="token punctuation">(</span><span class="token number">500</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">setDrawBgColor</span><span class="token punctuation">(</span><span class="token class-name">ColorUtil</span><span class="token punctuation">.</span><span class="token constant">OPACITY</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">setDrawStyle</span><span class="token punctuation">(</span><span class="token class-name">QrCodeOptions<span class="token punctuation">.</span>DrawStyle</span><span class="token punctuation">.</span><span class="token constant">IMAGE</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">setDetectImg</span><span class="token punctuation">(</span><span class="token string">&quot;jihe/PDP.png&quot;</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">addImg</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;jihe/a.png&quot;</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">addImg</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token string">&quot;jihe/b.png&quot;</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">addImg</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token string">&quot;jihe/c.png&quot;</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">addImg</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">&quot;jihe/e.png&quot;</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">addImg</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token string">&quot;jihe/f.png&quot;</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">addImg</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">&quot;jihe/g.png&quot;</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">addImg</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token string">&quot;jihe/h.png&quot;</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">setPadding</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">setErrorCorrection</span><span class="token punctuation">(</span><span class="token class-name">ErrorCorrectionLevel<span class="token punctuation">.</span>H</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">setLogo</span><span class="token punctuation">(</span>logo<span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">setLogoBorder</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">setLogoStyle</span><span class="token punctuation">(</span><span class="token class-name">QrCodeOptions<span class="token punctuation">.</span>LogoStyle</span><span class="token punctuation">.</span><span class="token constant">ROUND</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">setLogoBgColor</span><span class="token punctuation">(</span><span class="token number">0xfffefefe</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">setLogoBorderBgColor</span><span class="token punctuation">(</span><span class="token number">0xffc7c7c7</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">setBgImg</span><span class="token punctuation">(</span>bg<span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">setBgW</span><span class="token punctuation">(</span><span class="token number">1870</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">setBgH</span><span class="token punctuation">(</span><span class="token number">646</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">setBgStyle</span><span class="token punctuation">(</span><span class="token class-name">QrCodeOptions<span class="token punctuation">.</span>BgImgStyle</span><span class="token punctuation">.</span><span class="token constant">FILL</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">setBgStartX</span><span class="token punctuation">(</span><span class="token number">690</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">setBgStartY</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">setBgOpacity</span><span class="token punctuation">(</span><span class="token number">0.9f</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">setPicType</span><span class="token punctuation">(</span><span class="token string">&quot;gif&quot;</span><span class="token punctuation">)</span>
        <span class="token punctuation">.</span><span class="token function">asFile</span><span class="token punctuation">(</span><span class="token string">&quot;/tmp/gifQr4.gif&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="https://blog.hhui.top/hexblog/imgs/quick/quick-media/star.gif" alt="求关注" tabindex="0" loading="lazy"><figcaption>求关注</figcaption></figure>`,103);function m(b,g){const a=i("ExternalLinkIcon");return c(),o("div",null,[n("blockquote",null,[u,n("p",null,[s("本文中所有示例case，均可在测试用例中获取： "),n("a",k,[s("QrCodeGenUserGuide.java"),t(a)])])]),d,n("ul",null,[n("li",null,[n("a",r,[s("https://mvnrepository.com/artifact/com.github.liuyueyi.media/qrcode-plugin"),t(a)])])]),v])}const q=e(l,[["render",m],["__file","2.x使用实例.html.vue"]]);export{q as default};
