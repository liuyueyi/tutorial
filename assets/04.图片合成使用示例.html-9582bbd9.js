import{_ as e,V as o,W as c,Y as n,Z as s,$ as t,a1 as p,F as l}from"./framework-094145d2.js";const i="/tutorial/imgs/column/quick-media/image/2out.png",u="/tutorial/imgs/column/quick-media/image/v2out.png",k="/tutorial/imgs/column/quick-media/image/more2out.png",r="/tutorial/imgs/column/quick-media/image/line.gif",d="/tutorial/imgs/column/quick-media/image/word.gif",m="/tutorial/imgs/column/quick-media/image/cover.png",v="/tutorial/imgs/column/quick-media/image/cover2.png",b="/tutorial/imgs/column/quick-media/image/qrcode.jpg",g={},f={href:"https://github.com/liuyueyi/quick-media/tree/master/plugins/image-plugin",target:"_blank",rel:"noopener noreferrer"},C=p(`<h2 id="_1-项目依赖" tabindex="-1"><a class="header-anchor" href="#_1-项目依赖" aria-hidden="true">#</a> 1. 项目依赖</h2><p>直接从中央仓库，导入最新依赖</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token comment">&lt;!-- https://mvnrepository.com/artifact/com.github.liuyueyi.media/image-plugin --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>com.github.liuyueyi.media<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>image-plugin<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- 请使用最新版本号替换下面的版本 --&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>version</span><span class="token punctuation">&gt;</span></span>3.1.0<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>version</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="_2-参数说明" tabindex="-1"><a class="header-anchor" href="#_2-参数说明" aria-hidden="true">#</a> 2. 参数说明</h2><p>相关参数配置由<code>com.github.hui.quick.plugin.image.wrapper.create.ImgCreateOptions</code>实体类进行装载，对应的参数说明如下</p><table><thead><tr><th>参数名</th><th>类型</th><th>说明</th></tr></thead><tbody><tr><td>bgImg</td><td>BufferedImage</td><td>绘制的背景图</td></tr><tr><td>imgW</td><td>Integer</td><td>生成图片的宽</td></tr><tr><td>imgH</td><td>Integer</td><td>生成图片的高</td></tr><tr><td>font</td><td>Font</td><td>字体，默认值为 DEFAULT_FONT</td></tr><tr><td>fontColor</td><td>Color</td><td>字体色，默认值为黑色</td></tr><tr><td>leftPadding</td><td>int</td><td>左边距</td></tr><tr><td>rightPadding</td><td>int</td><td>右边距</td></tr><tr><td>topPadding</td><td>int</td><td>上边距</td></tr><tr><td>bottomPadding</td><td>int</td><td>底边距</td></tr><tr><td>linePadding</td><td>int</td><td>行距</td></tr><tr><td>alignStyle</td><td>AlignStyle</td><td>对齐方式，水平绘制时为左对齐、居中、右对齐；垂直绘制时为上对齐、居中、下对齐</td></tr><tr><td>drawStyle</td><td>DrawStyle</td><td>文本绘制方式，水平或垂直</td></tr></tbody></table><h2 id="_3-使用示例" tabindex="-1"><a class="header-anchor" href="#_3-使用示例" aria-hidden="true">#</a> 3. 使用示例</h2>`,7),y=n("p",null,"所有的使用姿势，可以在源码对应的test工程中获取",-1),w={href:"https://github.com/liuyueyi/quick-media/blob/master/plugins/image-plugin/src/test/java/com/github/hui/quick/plugin/test/ImgCreateWrapperTest.java",target:"_blank",rel:"noopener noreferrer"},h=p(`<h3 id="_3-1-基本使用示例" tabindex="-1"><a class="header-anchor" href="#_3-1-基本使用示例" aria-hidden="true">#</a> 3.1 基本使用示例</h3><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testLocalGenImg</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
    <span class="token keyword">int</span> w <span class="token operator">=</span> <span class="token number">400</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> leftPadding <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> topPadding <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> bottomPadding <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> linePadding <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
    <span class="token class-name">Font</span> font <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Font</span><span class="token punctuation">(</span><span class="token string">&quot;手札体&quot;</span><span class="token punctuation">,</span> <span class="token class-name">Font</span><span class="token punctuation">.</span><span class="token constant">PLAIN</span><span class="token punctuation">,</span> <span class="token number">18</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 需要操作系统有手札字体，否则用默认的</span>

    <span class="token class-name">ImgCreateWrapper<span class="token punctuation">.</span>Builder</span> build <span class="token operator">=</span> <span class="token class-name">ImgCreateWrapper</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">setImgW</span><span class="token punctuation">(</span>w<span class="token punctuation">)</span> <span class="token comment">// 设置图片宽</span>
            <span class="token punctuation">.</span><span class="token function">setLeftPadding</span><span class="token punctuation">(</span>leftPadding<span class="token punctuation">)</span> <span class="token comment">// 左边距</span>
            <span class="token punctuation">.</span><span class="token function">setRightPadding</span><span class="token punctuation">(</span>leftPadding<span class="token punctuation">)</span> <span class="token comment">// 右边距</span>
            <span class="token punctuation">.</span><span class="token function">setTopPadding</span><span class="token punctuation">(</span>topPadding<span class="token punctuation">)</span> <span class="token comment">// 上边距</span>
            <span class="token punctuation">.</span><span class="token function">setBottomPadding</span><span class="token punctuation">(</span>bottomPadding<span class="token punctuation">)</span> <span class="token comment">// 下边距</span>
            <span class="token punctuation">.</span><span class="token function">setLinePadding</span><span class="token punctuation">(</span>linePadding<span class="token punctuation">)</span> <span class="token comment">// 行间距</span>
            <span class="token punctuation">.</span><span class="token function">setFont</span><span class="token punctuation">(</span>font<span class="token punctuation">)</span> <span class="token comment">// 字体</span>
            <span class="token punctuation">.</span><span class="token function">setAlignStyle</span><span class="token punctuation">(</span><span class="token class-name">ImgCreateOptions<span class="token punctuation">.</span>AlignStyle</span><span class="token punctuation">.</span><span class="token constant">CENTER</span><span class="token punctuation">)</span> <span class="token comment">// 文字对齐方式</span>
            <span class="token punctuation">.</span><span class="token function">setDrawStyle</span><span class="token punctuation">(</span><span class="token class-name">ImgCreateOptions<span class="token punctuation">.</span>DrawStyle</span><span class="token punctuation">.</span><span class="token constant">HORIZONTAL</span><span class="token punctuation">)</span> <span class="token comment">// 绘制样式，水平绘制</span>
            <span class="token punctuation">.</span><span class="token function">setBgColor</span><span class="token punctuation">(</span><span class="token class-name">Color</span><span class="token punctuation">.</span><span class="token constant">WHITE</span><span class="token punctuation">)</span> <span class="token comment">// 背景色为白色</span>
            <span class="token punctuation">.</span><span class="token function">setBorder</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token comment">// 输出图片有边框</span>
            <span class="token punctuation">.</span><span class="token function">setBorderColor</span><span class="token punctuation">(</span><span class="token number">0xFFF7EED6</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 边框颜色</span>


    <span class="token class-name">BufferedReader</span> reader <span class="token operator">=</span> <span class="token class-name">FileReadUtil</span><span class="token punctuation">.</span><span class="token function">createLineRead</span><span class="token punctuation">(</span><span class="token string">&quot;text/poem.txt&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 读取文字样本</span>
    <span class="token class-name">String</span> line<span class="token punctuation">;</span>
    <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>line <span class="token operator">=</span> reader<span class="token punctuation">.</span><span class="token function">readLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        build<span class="token punctuation">.</span><span class="token function">drawContent</span><span class="token punctuation">(</span>line<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    build<span class="token punctuation">.</span><span class="token function">setAlignStyle</span><span class="token punctuation">(</span><span class="token class-name">ImgCreateOptions<span class="token punctuation">.</span>AlignStyle</span><span class="token punctuation">.</span><span class="token constant">RIGHT</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">drawImage</span><span class="token punctuation">(</span><span class="token string">&quot;https://spring.hhui.top/spring-blog/imgs/info/info.png&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token class-name">BufferedImage</span> img <span class="token operator">=</span> build<span class="token punctuation">.</span><span class="token function">asImage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">ImageIO</span><span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>img<span class="token punctuation">,</span> <span class="token string">&quot;png&quot;</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span><span class="token string">&quot;/tmp/2out.png&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="`+i+`" alt="输出图" tabindex="0" loading="lazy"><figcaption>输出图</figcaption></figure><p>如我们希望生成竖排输出的图文，可以在上面的基础上做一个微调即可快速实现，如下</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testLocalGenVerticalImg</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span><span class="token punctuation">,</span> <span class="token class-name">FontFormatException</span> <span class="token punctuation">{</span>
    <span class="token keyword">int</span> h <span class="token operator">=</span> <span class="token number">400</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> leftPadding <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> topPadding <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> bottomPadding <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> linePadding <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
    <span class="token class-name">Font</span> font <span class="token operator">=</span> <span class="token class-name">FontUtil</span><span class="token punctuation">.</span><span class="token function">getFont</span><span class="token punctuation">(</span><span class="token string">&quot;font/txlove.ttf&quot;</span><span class="token punctuation">,</span> <span class="token class-name">Font</span><span class="token punctuation">.</span><span class="token constant">PLAIN</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token class-name">ImgCreateWrapper<span class="token punctuation">.</span>Builder</span> build <span class="token operator">=</span> <span class="token class-name">ImgCreateWrapper</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">setImgH</span><span class="token punctuation">(</span>h<span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">setDrawStyle</span><span class="token punctuation">(</span><span class="token class-name">ImgCreateOptions<span class="token punctuation">.</span>DrawStyle</span><span class="token punctuation">.</span><span class="token constant">VERTICAL_RIGHT</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">setAlignStyle</span><span class="token punctuation">(</span><span class="token class-name">ImgCreateOptions<span class="token punctuation">.</span>AlignStyle</span><span class="token punctuation">.</span><span class="token constant">CENTER</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">setLeftPadding</span><span class="token punctuation">(</span>leftPadding<span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">setTopPadding</span><span class="token punctuation">(</span>topPadding<span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">setBottomPadding</span><span class="token punctuation">(</span>bottomPadding<span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">setLinePadding</span><span class="token punctuation">(</span>linePadding<span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">setFont</span><span class="token punctuation">(</span>font<span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">setBgColor</span><span class="token punctuation">(</span><span class="token class-name">Color</span><span class="token punctuation">.</span><span class="token constant">WHITE</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">setBorder</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">setBorderBottomPadding</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">setBorderLeftPadding</span><span class="token punctuation">(</span><span class="token number">6</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">setBorderTopPadding</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">setBorderColor</span><span class="token punctuation">(</span><span class="token number">0xFFF7EED6</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


    <span class="token class-name">BufferedReader</span> reader <span class="token operator">=</span> <span class="token class-name">FileReadUtil</span><span class="token punctuation">.</span><span class="token function">createLineRead</span><span class="token punctuation">(</span><span class="token string">&quot;text/poem.txt&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">String</span> line<span class="token punctuation">;</span>
    <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>line <span class="token operator">=</span> reader<span class="token punctuation">.</span><span class="token function">readLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        build<span class="token punctuation">.</span><span class="token function">drawContent</span><span class="token punctuation">(</span>line<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    build<span class="token punctuation">.</span><span class="token function">setFont</span><span class="token punctuation">(</span><span class="token class-name">FontUtil</span><span class="token punctuation">.</span><span class="token function">getFontOrDefault</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token class-name">Font</span><span class="token punctuation">.</span><span class="token constant">ITALIC</span><span class="token punctuation">,</span> <span class="token number">18</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">setAlignStyle</span><span class="token punctuation">(</span><span class="token class-name">ImgCreateOptions<span class="token punctuation">.</span>AlignStyle</span><span class="token punctuation">.</span><span class="token constant">BOTTOM</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    build<span class="token punctuation">.</span><span class="token function">drawContent</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">SimpleDateFormat</span><span class="token punctuation">(</span><span class="token string">&quot;yyyy-MM-dd&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    build<span class="token punctuation">.</span><span class="token function">drawContent</span><span class="token punctuation">(</span><span class="token string">&quot; &quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    build<span class="token punctuation">.</span><span class="token function">setAlignStyle</span><span class="token punctuation">(</span><span class="token class-name">ImgCreateOptions<span class="token punctuation">.</span>AlignStyle</span><span class="token punctuation">.</span><span class="token constant">CENTER</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">drawImage</span><span class="token punctuation">(</span><span class="token string">&quot;https://spring.hhui.top/spring-blog/imgs/info/info.png&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    build<span class="token punctuation">.</span><span class="token function">setFontColor</span><span class="token punctuation">(</span><span class="token class-name">Color</span><span class="token punctuation">.</span><span class="token constant">BLUE</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">drawContent</span><span class="token punctuation">(</span><span class="token string">&quot;后缀签名&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">drawContent</span><span class="token punctuation">(</span><span class="token string">&quot;一灰灰&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token class-name">BufferedImage</span> img <span class="token operator">=</span> build<span class="token punctuation">.</span><span class="token function">asImage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">ImageIO</span><span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>img<span class="token punctuation">,</span> <span class="token string">&quot;png&quot;</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span><span class="token string">&quot;/tmp/v2out.png&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="`+u+`" alt="输出图" tabindex="0" loading="lazy"><figcaption>输出图</figcaption></figure><p>若我们希望在文字中间穿插图片，并设置对文字设置不同的颜色、字体、样式时，可以参照下面的实现方式</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testGenImg</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
    <span class="token keyword">int</span> w <span class="token operator">=</span> <span class="token number">400</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> leftPadding <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> topPadding <span class="token operator">=</span> <span class="token number">40</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> bottomPadding <span class="token operator">=</span> <span class="token number">40</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> linePadding <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
    <span class="token class-name">Font</span> font <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Font</span><span class="token punctuation">(</span><span class="token string">&quot;宋体&quot;</span><span class="token punctuation">,</span> <span class="token class-name">Font</span><span class="token punctuation">.</span><span class="token constant">PLAIN</span><span class="token punctuation">,</span> <span class="token number">18</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token class-name">ImgCreateWrapper<span class="token punctuation">.</span>Builder</span> build <span class="token operator">=</span> <span class="token class-name">ImgCreateWrapper</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">setImgW</span><span class="token punctuation">(</span>w<span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">setLeftPadding</span><span class="token punctuation">(</span>leftPadding<span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">setTopPadding</span><span class="token punctuation">(</span>topPadding<span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">setBottomPadding</span><span class="token punctuation">(</span>bottomPadding<span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">setLinePadding</span><span class="token punctuation">(</span>linePadding<span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">setFont</span><span class="token punctuation">(</span>font<span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">setAlignStyle</span><span class="token punctuation">(</span><span class="token class-name">ImgCreateOptions<span class="token punctuation">.</span>AlignStyle</span><span class="token punctuation">.</span><span class="token constant">CENTER</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">setDrawStyle</span><span class="token punctuation">(</span><span class="token class-name">ImgCreateOptions<span class="token punctuation">.</span>DrawStyle</span><span class="token punctuation">.</span><span class="token constant">HORIZONTAL</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">setBgImg</span><span class="token punctuation">(</span><span class="token class-name">ImageLoadUtil</span><span class="token punctuation">.</span><span class="token function">getImageByPath</span><span class="token punctuation">(</span><span class="token string">&quot;createImg/bg.jpeg&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">setBgColor</span><span class="token punctuation">(</span><span class="token class-name">Color</span><span class="token punctuation">.</span><span class="token constant">WHITE</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">setBorder</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">setBorderColor</span><span class="token punctuation">(</span><span class="token number">0xFFF7EED6</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


    <span class="token class-name">BufferedReader</span> reader <span class="token operator">=</span> <span class="token class-name">FileReadUtil</span><span class="token punctuation">.</span><span class="token function">createLineRead</span><span class="token punctuation">(</span><span class="token string">&quot;text/poem2.txt&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">String</span> line<span class="token punctuation">;</span>
    <span class="token keyword">int</span> index <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>line <span class="token operator">=</span> reader<span class="token punctuation">.</span><span class="token function">readLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        build<span class="token punctuation">.</span><span class="token function">drawContent</span><span class="token punctuation">(</span>line<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">++</span>index <span class="token operator">==</span> <span class="token number">5</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            build<span class="token punctuation">.</span><span class="token function">drawImage</span><span class="token punctuation">(</span><span class="token class-name">ImageLoadUtil</span><span class="token punctuation">.</span><span class="token function">getImageByPath</span><span class="token punctuation">(</span><span class="token string">&quot;https://static.oschina.net/uploads/img/201708/12175633_sOfz.png&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">if</span> <span class="token punctuation">(</span>index <span class="token operator">==</span> <span class="token number">7</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            build<span class="token punctuation">.</span><span class="token function">setFontSize</span><span class="token punctuation">(</span><span class="token number">25</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">if</span> <span class="token punctuation">(</span>index <span class="token operator">==</span> <span class="token number">10</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            build<span class="token punctuation">.</span><span class="token function">setFontSize</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            build<span class="token punctuation">.</span><span class="token function">setFontColor</span><span class="token punctuation">(</span><span class="token class-name">Color</span><span class="token punctuation">.</span><span class="token constant">RED</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token class-name">BufferedImage</span> img <span class="token operator">=</span> build<span class="token punctuation">.</span><span class="token function">asImage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">ImageIO</span><span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>img<span class="token punctuation">,</span> <span class="token string">&quot;png&quot;</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span><span class="token string">&quot;/tmp/more2out.png&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="`+k+'" alt="输出图" tabindex="0" loading="lazy"><figcaption>输出图</figcaption></figure><h3 id="_3-2-逐行打印文本-生成gif动画" tabindex="-1"><a class="header-anchor" href="#_3-2-逐行打印文本-生成gif动画" aria-hidden="true">#</a> 3.2 逐行打印文本，生成gif动画</h3>',10),x={href:"https://github.com/liuyueyi/quick-media/blob/master/plugins/image-plugin/src/test/java/com/github/hui/quick/plugin/test/LineCreateWrapperTest.java",target:"_blank",rel:"noopener noreferrer"},_=p(`<p>具体的使用示例与上面基本没有什么区别，无非是输出的图是gif动图</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">String</span> sign <span class="token operator">=</span> <span class="token string">&quot;https://spring.hhui.top/spring-blog/imgs/info/info.png&quot;</span><span class="token punctuation">;</span>

<span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">genVerticalImg</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span><span class="token punctuation">,</span> <span class="token class-name">FontFormatException</span> <span class="token punctuation">{</span>
    <span class="token keyword">int</span> h <span class="token operator">=</span> <span class="token number">500</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> leftPadding <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> topPadding <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> bottomPadding <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> linePadding <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>

    <span class="token class-name">LineGifCreateWrapper<span class="token punctuation">.</span>Builder</span> build <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">LineGifCreateWrapper<span class="token punctuation">.</span>Builder</span><span class="token punctuation">)</span> <span class="token class-name">LineGifCreateWrapper</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">setImgH</span><span class="token punctuation">(</span>h<span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">setDrawStyle</span><span class="token punctuation">(</span><span class="token class-name">ImgCreateOptions<span class="token punctuation">.</span>DrawStyle</span><span class="token punctuation">.</span><span class="token constant">VERTICAL_RIGHT</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">setLeftPadding</span><span class="token punctuation">(</span>leftPadding<span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">setTopPadding</span><span class="token punctuation">(</span>topPadding<span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">setBottomPadding</span><span class="token punctuation">(</span>bottomPadding<span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">setLinePadding</span><span class="token punctuation">(</span>linePadding<span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">setFont</span><span class="token punctuation">(</span><span class="token class-name">FontUtil</span><span class="token punctuation">.</span><span class="token constant">DEFAULT_FONT</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">setFontColor</span><span class="token punctuation">(</span><span class="token class-name">Color</span><span class="token punctuation">.</span><span class="token constant">BLUE</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">setAlignStyle</span><span class="token punctuation">(</span><span class="token class-name">ImgCreateOptions<span class="token punctuation">.</span>AlignStyle</span><span class="token punctuation">.</span><span class="token constant">CENTER</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">setBgColor</span><span class="token punctuation">(</span><span class="token class-name">Color</span><span class="token punctuation">.</span><span class="token constant">WHITE</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">setBorder</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">setBorderColor</span><span class="token punctuation">(</span><span class="token number">0xFFF7EED6</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


    <span class="token class-name">BufferedReader</span> reader <span class="token operator">=</span> <span class="token class-name">FileReadUtil</span><span class="token punctuation">.</span><span class="token function">createLineRead</span><span class="token punctuation">(</span><span class="token string">&quot;text/poem.txt&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">String</span> line<span class="token punctuation">;</span>
    <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>line <span class="token operator">=</span> reader<span class="token punctuation">.</span><span class="token function">readLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        build<span class="token punctuation">.</span><span class="token function">drawContent</span><span class="token punctuation">(</span>line<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    build<span class="token punctuation">.</span><span class="token function">setAlignStyle</span><span class="token punctuation">(</span><span class="token class-name">ImgCreateOptions<span class="token punctuation">.</span>AlignStyle</span><span class="token punctuation">.</span><span class="token constant">BOTTOM</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">drawImage</span><span class="token punctuation">(</span>sign<span class="token punctuation">)</span><span class="token punctuation">;</span>

    build<span class="token punctuation">.</span><span class="token function">asGif</span><span class="token punctuation">(</span><span class="token string">&quot;/tmp/line.gif&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="`+r+'" alt="输出图" tabindex="0" loading="lazy"><figcaption>输出图</figcaption></figure><h3 id="_3-3-逐字输出-生成gif动画" tabindex="-1"><a class="header-anchor" href="#_3-3-逐字输出-生成gif动画" aria-hidden="true">#</a> 3.3 逐字输出，生成gif动画</h3>',4),T={href:"https://github.com/liuyueyi/quick-media/blob/master/plugins/image-plugin/src/test/java/com/github/hui/quick/plugin/test/LineCreateWrapperTest.java",target:"_blank",rel:"noopener noreferrer"},I=p(`<div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code>
<span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">String</span> sign <span class="token operator">=</span> <span class="token string">&quot;https://spring.hhui.top/spring-blog/imgs/info/info.png&quot;</span><span class="token punctuation">;</span>
<span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testWordGif</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
    <span class="token keyword">int</span> h <span class="token operator">=</span> <span class="token number">300</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> leftPadding <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> topPadding <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> bottomPadding <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> linePadding <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>

    <span class="token class-name">WordGifCreateWrapper<span class="token punctuation">.</span>Builder</span> build <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token class-name">WordGifCreateWrapper<span class="token punctuation">.</span>Builder</span><span class="token punctuation">)</span> <span class="token class-name">WordGifCreateWrapper</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">setDelay</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">setImgH</span><span class="token punctuation">(</span>h<span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">setImgW</span><span class="token punctuation">(</span>h<span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">setDrawStyle</span><span class="token punctuation">(</span><span class="token class-name">ImgCreateOptions<span class="token punctuation">.</span>DrawStyle</span><span class="token punctuation">.</span><span class="token constant">VERTICAL_RIGHT</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">setLeftPadding</span><span class="token punctuation">(</span>leftPadding<span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">setTopPadding</span><span class="token punctuation">(</span>topPadding<span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">setBottomPadding</span><span class="token punctuation">(</span>bottomPadding<span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">setLinePadding</span><span class="token punctuation">(</span>linePadding<span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">setFont</span><span class="token punctuation">(</span><span class="token class-name">FontUtil</span><span class="token punctuation">.</span><span class="token constant">DEFAULT_FONT</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">setAlignStyle</span><span class="token punctuation">(</span><span class="token class-name">ImgCreateOptions<span class="token punctuation">.</span>AlignStyle</span><span class="token punctuation">.</span><span class="token constant">CENTER</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">setBgColor</span><span class="token punctuation">(</span><span class="token class-name">Color</span><span class="token punctuation">.</span><span class="token constant">WHITE</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">setBorder</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">setBorderColor</span><span class="token punctuation">(</span><span class="token number">0xFFF7EED6</span><span class="token punctuation">)</span>
            <span class="token punctuation">;</span>


    <span class="token class-name">BufferedReader</span> reader <span class="token operator">=</span> <span class="token class-name">FileReadUtil</span><span class="token punctuation">.</span><span class="token function">createLineRead</span><span class="token punctuation">(</span><span class="token string">&quot;text/poem.txt&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">String</span> line<span class="token punctuation">;</span>
    <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>line <span class="token operator">=</span> reader<span class="token punctuation">.</span><span class="token function">readLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        build<span class="token punctuation">.</span><span class="token function">drawContent</span><span class="token punctuation">(</span>line<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    build<span class="token punctuation">.</span><span class="token function">drawContent</span><span class="token punctuation">(</span><span class="token string">&quot; &quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    build<span class="token punctuation">.</span><span class="token function">setAlignStyle</span><span class="token punctuation">(</span><span class="token class-name">ImgCreateOptions<span class="token punctuation">.</span>AlignStyle</span><span class="token punctuation">.</span><span class="token constant">CENTER</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">drawImage</span><span class="token punctuation">(</span>sign<span class="token punctuation">)</span><span class="token punctuation">;</span>

    build<span class="token punctuation">.</span><span class="token function">asGif</span><span class="token punctuation">(</span><span class="token string">&quot;/tmp/line.gif&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="`+d+`" alt="输出图" tabindex="0" loading="lazy"><figcaption>输出图</figcaption></figure><h2 id="_4-进阶使用" tabindex="-1"><a class="header-anchor" href="#_4-进阶使用" aria-hidden="true">#</a> 4. 进阶使用</h2><p>上面介绍的使用姿势适用于简单的图文合成，当我们有一些相对复杂的图片需要合成时，可以考虑一下基于模板的图文合成方式</p><p>这里主要使用的是 <code>ImgMergeWrapper</code> 提供的能力，其内部提供了五个基本单元（也支持扩展自己的基本绘制单元）</p><h3 id="_4-1-基础绘制单元" tabindex="-1"><a class="header-anchor" href="#_4-1-基础绘制单元" aria-hidden="true">#</a> 4.1 基础绘制单元</h3><p>如需要实现自定义的绘制单元，则可以通过实现下面的接口</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">interface</span> <span class="token class-name">IMergeCell</span> <span class="token punctuation">{</span>


    <span class="token keyword">void</span> <span class="token function">draw</span><span class="token punctuation">(</span><span class="token class-name">Graphics2D</span> g2d<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>image-plugin原生提供的几个实现如下</p><ul><li>TextCell: 文字绘制，支持超出最终输出图片的宽高时，自动换行</li><li>LineCell: 线条绘制，原生提供实线和虚线两种样式，也可以自定义线条样式</li><li>RectCell: 矩形框绘制</li><li>RectFillCell: 矩形区域绘制</li><li>ImgCell: 图片绘制</li></ul><h3 id="_4-2-基本使用" tabindex="-1"><a class="header-anchor" href="#_4-2-基本使用" aria-hidden="true">#</a> 4.2 基本使用</h3>`,11),q={href:"https://github.com/liuyueyi/quick-media/blob/master/plugins/image-plugin/src/test/java/com/github/hui/quick/plugin/test/ImgMergeWrapperTest.java",target:"_blank",rel:"noopener noreferrer"},F=p(`<p>下面是一个简单的示例，生成书籍封面图，一张底图，一个矩形框，一个矩形区域，然后再矩形区域内填充书名</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">gen</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
        <span class="token function">testCover</span><span class="token punctuation">(</span><span class="token string">&quot;我师兄实在太稳健了&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;cover&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">testCover</span><span class="token punctuation">(</span><span class="token string">&quot;射雕英雄传&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;cover2&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testCover</span><span class="token punctuation">(</span><span class="token class-name">String</span> text<span class="token punctuation">,</span> <span class="token class-name">String</span> out<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
    <span class="token keyword">int</span> w <span class="token operator">=</span> <span class="token number">276</span><span class="token punctuation">,</span> h <span class="token operator">=</span> <span class="token number">402</span><span class="token punctuation">;</span>
    <span class="token class-name">BufferedImage</span> bg <span class="token operator">=</span> <span class="token class-name">ImageLoadUtil</span><span class="token punctuation">.</span><span class="token function">getImageByPath</span><span class="token punctuation">(</span><span class="token string">&quot;cover.jpg&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


    <span class="token class-name">TextCell</span> textCell <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TextCell</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    textCell<span class="token punctuation">.</span><span class="token function">setColor</span><span class="token punctuation">(</span><span class="token class-name">Color</span><span class="token punctuation">.</span><span class="token constant">BLACK</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    textCell<span class="token punctuation">.</span><span class="token function">addText</span><span class="token punctuation">(</span>text<span class="token punctuation">)</span><span class="token punctuation">;</span>
    textCell<span class="token punctuation">.</span><span class="token function">setFont</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Font</span><span class="token punctuation">(</span><span class="token string">&quot;苹方&quot;</span><span class="token punctuation">,</span> <span class="token class-name">Font</span><span class="token punctuation">.</span><span class="token constant">PLAIN</span><span class="token punctuation">,</span> <span class="token number">32</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> textX <span class="token operator">=</span> <span class="token number">13</span> <span class="token operator">*</span> w <span class="token operator">/</span> <span class="token punctuation">(</span><span class="token number">13</span> <span class="token operator">+</span> <span class="token number">12</span> <span class="token operator">+</span> <span class="token number">67</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    textCell<span class="token punctuation">.</span><span class="token function">setStartX</span><span class="token punctuation">(</span>textX<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> textY <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token number">23.5</span> <span class="token operator">*</span> h <span class="token operator">/</span> <span class="token punctuation">(</span><span class="token number">23.5</span> <span class="token operator">+</span> <span class="token number">13</span> <span class="token operator">+</span> <span class="token number">86</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">28</span><span class="token punctuation">;</span>
    textCell<span class="token punctuation">.</span><span class="token function">setStartY</span><span class="token punctuation">(</span>textY<span class="token punctuation">)</span><span class="token punctuation">;</span>
    textCell<span class="token punctuation">.</span><span class="token function">setEndX</span><span class="token punctuation">(</span>w <span class="token operator">-</span> textX<span class="token punctuation">)</span><span class="token punctuation">;</span>
    textCell<span class="token punctuation">.</span><span class="token function">setEndY</span><span class="token punctuation">(</span>textY<span class="token punctuation">)</span><span class="token punctuation">;</span>
    textCell<span class="token punctuation">.</span><span class="token function">setDrawStyle</span><span class="token punctuation">(</span><span class="token class-name">ImgCreateOptions<span class="token punctuation">.</span>DrawStyle</span><span class="token punctuation">.</span><span class="token constant">HORIZONTAL</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    textCell<span class="token punctuation">.</span><span class="token function">setAlignStyle</span><span class="token punctuation">(</span><span class="token class-name">ImgCreateOptions<span class="token punctuation">.</span>AlignStyle</span><span class="token punctuation">.</span><span class="token constant">CENTER</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> textHeight <span class="token operator">=</span> textCell<span class="token punctuation">.</span><span class="token function">getDrawHeight</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


    <span class="token class-name">RectFillCell</span> fillCell <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RectFillCell</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    textY <span class="token operator">=</span> textY <span class="token operator">-</span> <span class="token number">32</span><span class="token punctuation">;</span>
    fillCell<span class="token punctuation">.</span><span class="token function">setX</span><span class="token punctuation">(</span>textX <span class="token operator">-</span> <span class="token number">15</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    fillCell<span class="token punctuation">.</span><span class="token function">setY</span><span class="token punctuation">(</span>textY <span class="token operator">-</span> <span class="token number">15</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    fillCell<span class="token punctuation">.</span><span class="token function">setW</span><span class="token punctuation">(</span>w <span class="token operator">-</span> <span class="token number">2</span> <span class="token operator">*</span> textX <span class="token operator">+</span> <span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    fillCell<span class="token punctuation">.</span><span class="token function">setH</span><span class="token punctuation">(</span>textHeight <span class="token operator">+</span> <span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    fillCell<span class="token punctuation">.</span><span class="token function">setRadius</span><span class="token punctuation">(</span><span class="token number">8</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    fillCell<span class="token punctuation">.</span><span class="token function">setColor</span><span class="token punctuation">(</span><span class="token class-name">Color</span><span class="token punctuation">.</span><span class="token constant">LIGHT_GRAY</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


    <span class="token class-name">RectCell</span> rectCell <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RectCell</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    rectCell<span class="token punctuation">.</span><span class="token function">setX</span><span class="token punctuation">(</span>textX <span class="token operator">-</span> <span class="token number">21</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    rectCell<span class="token punctuation">.</span><span class="token function">setY</span><span class="token punctuation">(</span>textY <span class="token operator">-</span> <span class="token number">21</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    rectCell<span class="token punctuation">.</span><span class="token function">setW</span><span class="token punctuation">(</span>w <span class="token operator">-</span> <span class="token number">2</span> <span class="token operator">*</span> textX <span class="token operator">+</span> <span class="token number">42</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    rectCell<span class="token punctuation">.</span><span class="token function">setH</span><span class="token punctuation">(</span>textHeight <span class="token operator">+</span> <span class="token number">42</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    rectCell<span class="token punctuation">.</span><span class="token function">setColor</span><span class="token punctuation">(</span><span class="token class-name">Color</span><span class="token punctuation">.</span><span class="token constant">LIGHT_GRAY</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    rectCell<span class="token punctuation">.</span><span class="token function">setRadius</span><span class="token punctuation">(</span><span class="token number">12</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    rectCell<span class="token punctuation">.</span><span class="token function">setStroke</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">BasicStroke</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


    <span class="token class-name">Graphics2D</span> g2d <span class="token operator">=</span> <span class="token class-name">GraphicUtil</span><span class="token punctuation">.</span><span class="token function">getG2d</span><span class="token punctuation">(</span>bg<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">IMergeCell</span><span class="token punctuation">&gt;</span></span> list <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>rectCell<span class="token punctuation">)</span><span class="token punctuation">;</span>
    list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>fillCell<span class="token punctuation">)</span><span class="token punctuation">;</span>
    list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>textCell<span class="token punctuation">)</span><span class="token punctuation">;</span>
    list<span class="token punctuation">.</span><span class="token function">stream</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>s <span class="token operator">-&gt;</span> s<span class="token punctuation">.</span><span class="token function">draw</span><span class="token punctuation">(</span>g2d<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;---绘制完成---&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
        <span class="token class-name">ImageIO</span><span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>bg<span class="token punctuation">,</span> <span class="token string">&quot;png&quot;</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span><span class="token string">&quot;/tmp/cover/&quot;</span> <span class="token operator">+</span> out <span class="token operator">+</span> <span class="token string">&quot;.png&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><table><thead><tr><th>输出1</th><th>输出2</th></tr></thead><tbody><tr><td><img src="`+m+'" alt="" loading="lazy"></td><td><img src="'+v+`" alt="" loading="lazy"></td></tr></tbody></table><h3 id="_4-3-模板复用" tabindex="-1"><a class="header-anchor" href="#_4-3-模板复用" aria-hidden="true">#</a> 4.3 模板复用</h3><p>我们可以定义自己的合成模板，然后通过传入不同的参数来生成不同的图片；比如原生提供了一个二维码签名的模板</p><p>关键点在于 <code>QrCodeCardTemplateBuilder</code> 的实现</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">QrCodeCardTemplateBuilder</span> <span class="token punctuation">{</span>


    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">IMergeCell</span><span class="token punctuation">&gt;</span></span> <span class="token function">build</span><span class="token punctuation">(</span><span class="token class-name">BufferedImage</span> logo<span class="token punctuation">,</span>
                                         <span class="token class-name">String</span> name<span class="token punctuation">,</span>
                                         <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> desc<span class="token punctuation">,</span>
                                         <span class="token class-name">BufferedImage</span> qrcode<span class="token punctuation">,</span>
                                         <span class="token class-name">String</span> title<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">IMergeCell</span><span class="token punctuation">&gt;</span></span> list <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token function">buildBg</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token function">buildTextLogo</span><span class="token punctuation">(</span>logo<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        list<span class="token punctuation">.</span><span class="token function">addAll</span><span class="token punctuation">(</span><span class="token function">buildTextInfo</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> desc<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token function">buildLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token function">buildQrCode</span><span class="token punctuation">(</span>qrcode<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token function">buildQrCodeInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        list<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token function">buildRectInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        list<span class="token punctuation">.</span><span class="token function">addAll</span><span class="token punctuation">(</span><span class="token function">buildTitle</span><span class="token punctuation">(</span>title<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


        <span class="token keyword">return</span> list<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">RectFillCell</span> <span class="token function">buildBg</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">RectFillCell</span> rectFillCell <span class="token operator">=</span> <span class="token class-name">RectFillCell</span><span class="token punctuation">.</span><span class="token function">builder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">w</span><span class="token punctuation">(</span><span class="token class-name">QrCodeCardTemplate</span><span class="token punctuation">.</span>w<span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">h</span><span class="token punctuation">(</span><span class="token class-name">QrCodeCardTemplate</span><span class="token punctuation">.</span>h<span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">x</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">y</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">color</span><span class="token punctuation">(</span><span class="token class-name">QrCodeCardTemplate</span><span class="token punctuation">.</span>bg_color<span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> rectFillCell<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>


    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">ImgCell</span> <span class="token function">buildTextLogo</span><span class="token punctuation">(</span><span class="token class-name">BufferedImage</span> logo<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// logo</span>
        logo <span class="token operator">=</span> <span class="token class-name">ImageOperateUtil</span><span class="token punctuation">.</span><span class="token function">makeRoundImg</span><span class="token punctuation">(</span>logo<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token class-name">ImgCell</span><span class="token punctuation">.</span><span class="token function">builder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">img</span><span class="token punctuation">(</span>logo<span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">x</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">QrCodeCardTemplate</span><span class="token punctuation">.</span>text_size <span class="token operator">-</span> <span class="token class-name">QrCodeCardTemplate</span><span class="token punctuation">.</span>text_logo_size<span class="token punctuation">)</span> <span class="token operator">&gt;&gt;&gt;</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token class-name">QrCodeCardTemplate</span><span class="token punctuation">.</span>text_x<span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">y</span><span class="token punctuation">(</span><span class="token class-name">QrCodeCardTemplate</span><span class="token punctuation">.</span>text_y<span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">w</span><span class="token punctuation">(</span><span class="token class-name">QrCodeCardTemplate</span><span class="token punctuation">.</span>text_logo_size<span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">h</span><span class="token punctuation">(</span><span class="token class-name">QrCodeCardTemplate</span><span class="token punctuation">.</span>text_logo_size<span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>


    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">TextCell</span><span class="token punctuation">&gt;</span></span> <span class="token function">buildTextInfo</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">,</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> desc<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 文案</span>
        <span class="token class-name">FontMetrics</span> nameFontMetrics <span class="token operator">=</span> <span class="token class-name">FontUtil</span><span class="token punctuation">.</span><span class="token function">getFontMetric</span><span class="token punctuation">(</span><span class="token class-name">QrCodeCardTemplate</span><span class="token punctuation">.</span>text_nameFont<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">int</span> nameY <span class="token operator">=</span> <span class="token class-name">QrCodeCardTemplate</span><span class="token punctuation">.</span>text_y <span class="token operator">+</span> <span class="token class-name">QrCodeCardTemplate</span><span class="token punctuation">.</span>text_logo_size
                <span class="token operator">+</span> <span class="token class-name">QrCodeCardTemplate</span><span class="token punctuation">.</span>text_line_space
                <span class="token operator">+</span> nameFontMetrics<span class="token punctuation">.</span><span class="token function">getHeight</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token operator">+</span> nameFontMetrics<span class="token punctuation">.</span><span class="token function">getDescent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">TextCell</span> nameCell <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TextCell</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        nameCell<span class="token punctuation">.</span><span class="token function">setFont</span><span class="token punctuation">(</span><span class="token class-name">QrCodeCardTemplate</span><span class="token punctuation">.</span>text_nameFont<span class="token punctuation">)</span><span class="token punctuation">;</span>
        nameCell<span class="token punctuation">.</span><span class="token function">setColor</span><span class="token punctuation">(</span><span class="token class-name">QrCodeCardTemplate</span><span class="token punctuation">.</span>text_nameFont_color<span class="token punctuation">)</span><span class="token punctuation">;</span>
        nameCell<span class="token punctuation">.</span><span class="token function">setStartX</span><span class="token punctuation">(</span><span class="token class-name">QrCodeCardTemplate</span><span class="token punctuation">.</span>text_x<span class="token punctuation">)</span><span class="token punctuation">;</span>
        nameCell<span class="token punctuation">.</span><span class="token function">setStartY</span><span class="token punctuation">(</span>nameY<span class="token punctuation">)</span><span class="token punctuation">;</span>
        nameCell<span class="token punctuation">.</span><span class="token function">setEndX</span><span class="token punctuation">(</span><span class="token class-name">QrCodeCardTemplate</span><span class="token punctuation">.</span>text_x <span class="token operator">+</span> <span class="token class-name">QrCodeCardTemplate</span><span class="token punctuation">.</span>text_size<span class="token punctuation">)</span><span class="token punctuation">;</span>
        nameCell<span class="token punctuation">.</span><span class="token function">setEndY</span><span class="token punctuation">(</span>nameY <span class="token operator">+</span> nameFontMetrics<span class="token punctuation">.</span><span class="token function">getHeight</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        nameCell<span class="token punctuation">.</span><span class="token function">addText</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
        nameCell<span class="token punctuation">.</span><span class="token function">setDrawStyle</span><span class="token punctuation">(</span><span class="token class-name">ImgCreateOptions<span class="token punctuation">.</span>DrawStyle</span><span class="token punctuation">.</span><span class="token constant">HORIZONTAL</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        nameCell<span class="token punctuation">.</span><span class="token function">setAlignStyle</span><span class="token punctuation">(</span><span class="token class-name">ImgCreateOptions<span class="token punctuation">.</span>AlignStyle</span><span class="token punctuation">.</span><span class="token constant">CENTER</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


        <span class="token comment">// 说明文案</span>
        <span class="token class-name">FontMetrics</span> descFontMetrics <span class="token operator">=</span> <span class="token class-name">FontUtil</span><span class="token punctuation">.</span><span class="token function">getFontMetric</span><span class="token punctuation">(</span><span class="token class-name">QrCodeCardTemplate</span><span class="token punctuation">.</span>text_descFont<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">int</span> descY <span class="token operator">=</span> nameY <span class="token operator">+</span> nameFontMetrics<span class="token punctuation">.</span><span class="token function">getHeight</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token class-name">QrCodeCardTemplate</span><span class="token punctuation">.</span>text_line_space<span class="token punctuation">;</span>
        <span class="token class-name">TextCell</span> descCell <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TextCell</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        descCell<span class="token punctuation">.</span><span class="token function">setFont</span><span class="token punctuation">(</span><span class="token class-name">QrCodeCardTemplate</span><span class="token punctuation">.</span>text_descFont<span class="token punctuation">)</span><span class="token punctuation">;</span>
        descCell<span class="token punctuation">.</span><span class="token function">setColor</span><span class="token punctuation">(</span><span class="token class-name">QrCodeCardTemplate</span><span class="token punctuation">.</span>text_descFont_color<span class="token punctuation">)</span><span class="token punctuation">;</span>
        descCell<span class="token punctuation">.</span><span class="token function">setStartX</span><span class="token punctuation">(</span><span class="token class-name">QrCodeCardTemplate</span><span class="token punctuation">.</span>text_x<span class="token punctuation">)</span><span class="token punctuation">;</span>
        descCell<span class="token punctuation">.</span><span class="token function">setStartY</span><span class="token punctuation">(</span>descY<span class="token punctuation">)</span><span class="token punctuation">;</span>
        descCell<span class="token punctuation">.</span><span class="token function">setEndX</span><span class="token punctuation">(</span><span class="token class-name">QrCodeCardTemplate</span><span class="token punctuation">.</span>text_x <span class="token operator">+</span> <span class="token class-name">QrCodeCardTemplate</span><span class="token punctuation">.</span>text_size<span class="token punctuation">)</span><span class="token punctuation">;</span>
        descCell<span class="token punctuation">.</span><span class="token function">setEndY</span><span class="token punctuation">(</span>descY <span class="token operator">+</span> desc<span class="token punctuation">.</span><span class="token function">size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> descFontMetrics<span class="token punctuation">.</span><span class="token function">getHeight</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 单行超过限制的需要分割</span>
        descCell<span class="token punctuation">.</span><span class="token function">setTexts</span><span class="token punctuation">(</span>desc<span class="token punctuation">)</span><span class="token punctuation">;</span>
        descCell<span class="token punctuation">.</span><span class="token function">setDrawStyle</span><span class="token punctuation">(</span><span class="token class-name">ImgCreateOptions<span class="token punctuation">.</span>DrawStyle</span><span class="token punctuation">.</span><span class="token constant">HORIZONTAL</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        descCell<span class="token punctuation">.</span><span class="token function">setAlignStyle</span><span class="token punctuation">(</span><span class="token class-name">ImgCreateOptions<span class="token punctuation">.</span>AlignStyle</span><span class="token punctuation">.</span><span class="token constant">CENTER</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


        <span class="token keyword">return</span> <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">asList</span><span class="token punctuation">(</span>nameCell<span class="token punctuation">,</span> descCell<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>


    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">LineCell</span> <span class="token function">buildLine</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// line</span>
        <span class="token keyword">return</span> <span class="token class-name">LineCell</span><span class="token punctuation">.</span><span class="token function">builder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">x1</span><span class="token punctuation">(</span><span class="token class-name">QrCodeCardTemplate</span><span class="token punctuation">.</span>line_x<span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">y1</span><span class="token punctuation">(</span><span class="token class-name">QrCodeCardTemplate</span><span class="token punctuation">.</span>line_y <span class="token operator">+</span> <span class="token class-name">QrCodeCardTemplate</span><span class="token punctuation">.</span>line_h<span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">x2</span><span class="token punctuation">(</span><span class="token class-name">QrCodeCardTemplate</span><span class="token punctuation">.</span>line_x <span class="token operator">+</span> <span class="token class-name">QrCodeCardTemplate</span><span class="token punctuation">.</span>line_w<span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">y2</span><span class="token punctuation">(</span><span class="token class-name">QrCodeCardTemplate</span><span class="token punctuation">.</span>line_y<span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">color</span><span class="token punctuation">(</span><span class="token class-name">QrCodeCardTemplate</span><span class="token punctuation">.</span>line_color<span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>



    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">ImgCell</span> <span class="token function">buildQrCode</span><span class="token punctuation">(</span><span class="token class-name">BufferedImage</span> qrcode<span class="token punctuation">)</span> <span class="token punctuation">{</span>

        <span class="token keyword">int</span> qrCodeX <span class="token operator">=</span> <span class="token class-name">QrCodeCardTemplate</span><span class="token punctuation">.</span>qrcode_x <span class="token operator">+</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token class-name">QrCodeCardTemplate</span><span class="token punctuation">.</span>qrcode_info_w <span class="token operator">-</span> <span class="token class-name">QrCodeCardTemplate</span><span class="token punctuation">.</span>qrcode_size<span class="token punctuation">)</span> <span class="token operator">&gt;&gt;&gt;</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">return</span> <span class="token class-name">ImgCell</span><span class="token punctuation">.</span><span class="token function">builder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">img</span><span class="token punctuation">(</span>qrcode<span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">x</span><span class="token punctuation">(</span>qrCodeX<span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">y</span><span class="token punctuation">(</span><span class="token class-name">QrCodeCardTemplate</span><span class="token punctuation">.</span>qrcode_y<span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">w</span><span class="token punctuation">(</span><span class="token class-name">QrCodeCardTemplate</span><span class="token punctuation">.</span>qrcode_size<span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">h</span><span class="token punctuation">(</span><span class="token class-name">QrCodeCardTemplate</span><span class="token punctuation">.</span>qrcode_size<span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>



    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">TextCell</span> <span class="token function">buildQrCodeInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Font</span> font <span class="token operator">=</span> <span class="token class-name">QrCodeCardTemplate</span><span class="token punctuation">.</span>qrcode_info_font<span class="token punctuation">;</span>
        <span class="token class-name">FontMetrics</span> fontMetrics <span class="token operator">=</span> <span class="token class-name">FontUtil</span><span class="token punctuation">.</span><span class="token function">getFontMetric</span><span class="token punctuation">(</span>font<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">int</span> startY <span class="token operator">=</span> <span class="token class-name">QrCodeCardTemplate</span><span class="token punctuation">.</span>qrcode_y
                <span class="token operator">+</span> <span class="token class-name">QrCodeCardTemplate</span><span class="token punctuation">.</span>qrcode_size
                <span class="token operator">+</span> <span class="token class-name">QrCodeCardTemplate</span><span class="token punctuation">.</span>qrcode_info_padding
                <span class="token operator">+</span> fontMetrics<span class="token punctuation">.</span><span class="token function">getHeight</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">TextCell</span> textCell <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TextCell</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        textCell<span class="token punctuation">.</span><span class="token function">setStartX</span><span class="token punctuation">(</span><span class="token class-name">QrCodeCardTemplate</span><span class="token punctuation">.</span>qrcode_x<span class="token punctuation">)</span><span class="token punctuation">;</span>
        textCell<span class="token punctuation">.</span><span class="token function">setEndX</span><span class="token punctuation">(</span><span class="token class-name">QrCodeCardTemplate</span><span class="token punctuation">.</span>w <span class="token operator">-</span> <span class="token class-name">QrCodeCardTemplate</span><span class="token punctuation">.</span>border_space<span class="token punctuation">)</span><span class="token punctuation">;</span>
        textCell<span class="token punctuation">.</span><span class="token function">setStartY</span><span class="token punctuation">(</span>startY<span class="token punctuation">)</span><span class="token punctuation">;</span>
        textCell<span class="token punctuation">.</span><span class="token function">setEndY</span><span class="token punctuation">(</span>startY <span class="token operator">+</span> fontMetrics<span class="token punctuation">.</span><span class="token function">getHeight</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        textCell<span class="token punctuation">.</span><span class="token function">setFont</span><span class="token punctuation">(</span>font<span class="token punctuation">)</span><span class="token punctuation">;</span>
        textCell<span class="token punctuation">.</span><span class="token function">setColor</span><span class="token punctuation">(</span><span class="token class-name">QrCodeCardTemplate</span><span class="token punctuation">.</span>qrcode_info_color<span class="token punctuation">)</span><span class="token punctuation">;</span>
        textCell<span class="token punctuation">.</span><span class="token function">setAlignStyle</span><span class="token punctuation">(</span><span class="token class-name">ImgCreateOptions<span class="token punctuation">.</span>AlignStyle</span><span class="token punctuation">.</span><span class="token constant">CENTER</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        textCell<span class="token punctuation">.</span><span class="token function">addText</span><span class="token punctuation">(</span><span class="token string">&quot;点击或长按关注&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> textCell<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>



    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">RectCell</span> <span class="token function">buildRectInfo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">RectCell</span> rectCell <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">RectCell</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        rectCell<span class="token punctuation">.</span><span class="token function">setColor</span><span class="token punctuation">(</span><span class="token class-name">Color</span><span class="token punctuation">.</span><span class="token constant">LIGHT_GRAY</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        rectCell<span class="token punctuation">.</span><span class="token function">setX</span><span class="token punctuation">(</span><span class="token class-name">QrCodeCardTemplate</span><span class="token punctuation">.</span>border_space <span class="token operator">&gt;&gt;&gt;</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        rectCell<span class="token punctuation">.</span><span class="token function">setY</span><span class="token punctuation">(</span><span class="token class-name">QrCodeCardTemplate</span><span class="token punctuation">.</span>border_space <span class="token operator">&gt;&gt;&gt;</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        rectCell<span class="token punctuation">.</span><span class="token function">setW</span><span class="token punctuation">(</span><span class="token class-name">QrCodeCardTemplate</span><span class="token punctuation">.</span>w <span class="token operator">-</span> <span class="token class-name">QrCodeCardTemplate</span><span class="token punctuation">.</span>border_space<span class="token punctuation">)</span><span class="token punctuation">;</span>
        rectCell<span class="token punctuation">.</span><span class="token function">setH</span><span class="token punctuation">(</span><span class="token class-name">QrCodeCardTemplate</span><span class="token punctuation">.</span>h <span class="token operator">-</span> <span class="token class-name">QrCodeCardTemplate</span><span class="token punctuation">.</span>border_space<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">return</span> rectCell<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>


    <span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">IMergeCell</span><span class="token punctuation">&gt;</span></span> <span class="token function">buildTitle</span><span class="token punctuation">(</span><span class="token class-name">String</span> title<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Font</span> titleFont <span class="token operator">=</span> <span class="token class-name">QrCodeCardTemplate</span><span class="token punctuation">.</span>title_font<span class="token punctuation">;</span>
        <span class="token class-name">FontMetrics</span> metrics <span class="token operator">=</span> <span class="token class-name">FontUtil</span><span class="token punctuation">.</span><span class="token function">getFontMetric</span><span class="token punctuation">(</span>titleFont<span class="token punctuation">)</span><span class="token punctuation">;</span>


        <span class="token keyword">int</span> w <span class="token operator">=</span> <span class="token class-name">QrCodeCardTemplate</span><span class="token punctuation">.</span>w<span class="token punctuation">;</span>
        <span class="token keyword">int</span> spacing <span class="token operator">=</span> <span class="token class-name">QrCodeCardTemplate</span><span class="token punctuation">.</span>title_padding<span class="token punctuation">;</span>


        <span class="token keyword">int</span> tw <span class="token operator">=</span> metrics<span class="token punctuation">.</span><span class="token function">stringWidth</span><span class="token punctuation">(</span>title<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token class-name">RectFillCell</span> rectFillCell <span class="token operator">=</span> <span class="token class-name">RectFillCell</span><span class="token punctuation">.</span><span class="token function">builder</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">x</span><span class="token punctuation">(</span><span class="token punctuation">(</span>w <span class="token operator">-</span> tw <span class="token operator">-</span> metrics<span class="token punctuation">.</span><span class="token function">getHeight</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> metrics<span class="token punctuation">.</span><span class="token function">getHeight</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">&gt;&gt;&gt;</span> <span class="token number">1</span> <span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">y</span><span class="token punctuation">(</span>spacing <span class="token operator">&gt;&gt;&gt;</span> <span class="token number">1</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">w</span><span class="token punctuation">(</span>tw <span class="token operator">+</span> metrics<span class="token punctuation">.</span><span class="token function">getHeight</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">h</span><span class="token punctuation">(</span>spacing<span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">font</span><span class="token punctuation">(</span>titleFont<span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">color</span><span class="token punctuation">(</span><span class="token class-name">QrCodeCardTemplate</span><span class="token punctuation">.</span>title_font_bg_color<span class="token punctuation">)</span>
                <span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


        <span class="token class-name">TextCell</span> textCell <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">TextCell</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        textCell<span class="token punctuation">.</span><span class="token function">setStartX</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        textCell<span class="token punctuation">.</span><span class="token function">setEndX</span><span class="token punctuation">(</span>w<span class="token punctuation">)</span><span class="token punctuation">;</span>
        textCell<span class="token punctuation">.</span><span class="token function">setStartY</span><span class="token punctuation">(</span>spacing <span class="token operator">+</span> titleFont<span class="token punctuation">.</span><span class="token function">getSize</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">2</span> <span class="token operator">-</span> metrics<span class="token punctuation">.</span><span class="token function">getDescent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        textCell<span class="token punctuation">.</span><span class="token function">setEndY</span><span class="token punctuation">(</span>textCell<span class="token punctuation">.</span><span class="token function">getStartY</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        textCell<span class="token punctuation">.</span><span class="token function">setAlignStyle</span><span class="token punctuation">(</span><span class="token class-name">ImgCreateOptions<span class="token punctuation">.</span>AlignStyle</span><span class="token punctuation">.</span><span class="token constant">CENTER</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        textCell<span class="token punctuation">.</span><span class="token function">setDrawStyle</span><span class="token punctuation">(</span><span class="token class-name">ImgCreateOptions<span class="token punctuation">.</span>DrawStyle</span><span class="token punctuation">.</span><span class="token constant">HORIZONTAL</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        textCell<span class="token punctuation">.</span><span class="token function">addText</span><span class="token punctuation">(</span>title<span class="token punctuation">)</span><span class="token punctuation">;</span>
        textCell<span class="token punctuation">.</span><span class="token function">setFont</span><span class="token punctuation">(</span>titleFont<span class="token punctuation">)</span><span class="token punctuation">;</span>
        textCell<span class="token punctuation">.</span><span class="token function">setColor</span><span class="token punctuation">(</span><span class="token class-name">QrCodeCardTemplate</span><span class="token punctuation">.</span>title_font_color<span class="token punctuation">)</span><span class="token punctuation">;</span>


        <span class="token keyword">return</span> <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">asList</span><span class="token punctuation">(</span>rectFillCell<span class="token punctuation">,</span> textCell<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>然后对应的使用姿势就非常简单了</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testTemplate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
    <span class="token class-name">BufferedImage</span> logo <span class="token operator">=</span> <span class="token class-name">ImageLoadUtil</span><span class="token punctuation">.</span><span class="token function">getImageByPath</span><span class="token punctuation">(</span><span class="token string">&quot;logo.jpg&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">BufferedImage</span> qrCode <span class="token operator">=</span> <span class="token class-name">ImageLoadUtil</span><span class="token punctuation">.</span><span class="token function">getImageByPath</span><span class="token punctuation">(</span><span class="token string">&quot;QrCode.jpg&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">String</span> name <span class="token operator">=</span> <span class="token string">&quot;小灰灰Blog&quot;</span><span class="token punctuation">;</span>
    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> desc <span class="token operator">=</span> <span class="token class-name">Arrays</span><span class="token punctuation">.</span><span class="token function">asList</span><span class="token punctuation">(</span><span class="token string">&quot; 无聊的码农，不定时分享各种博文 &quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">int</span> w <span class="token operator">=</span> <span class="token class-name">QrCodeCardTemplate</span><span class="token punctuation">.</span>w<span class="token punctuation">,</span> h <span class="token operator">=</span> <span class="token class-name">QrCodeCardTemplate</span><span class="token punctuation">.</span>h<span class="token punctuation">;</span>
    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">IMergeCell</span><span class="token punctuation">&gt;</span></span> list <span class="token operator">=</span> <span class="token class-name">QrCodeCardTemplateBuilder</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span>logo<span class="token punctuation">,</span> name<span class="token punctuation">,</span> desc<span class="token punctuation">,</span> qrCode<span class="token punctuation">,</span> <span class="token string">&quot;微 信 公 众 号&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token class-name">BufferedImage</span> bg <span class="token operator">=</span> <span class="token class-name">ImgMergeWrapper</span><span class="token punctuation">.</span><span class="token function">merge</span><span class="token punctuation">(</span>list<span class="token punctuation">,</span> w<span class="token punctuation">,</span> h<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">try</span> <span class="token punctuation">{</span>
        <span class="token class-name">ImageIO</span><span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>bg<span class="token punctuation">,</span> <span class="token string">&quot;jpg&quot;</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span><span class="token string">&quot;/tmp/merge.jpg&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>上面的输出图，实际上就是我的个人推介名片</p><figure><img src="`+b+'" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure>',11);function S(L,P){const a=l("ExternalLinkIcon");return o(),c("div",null,[n("blockquote",null,[n("p",null,[s("本文为 "),n("a",f,[s("image-plugin"),t(a)]),s(" 图片合成的使用参考示例")])]),C,n("blockquote",null,[y,n("p",null,[s("下文对应的示例，详情查看: "),n("a",w,[s("ImgCreateWrapperTest.java"),t(a)])])]),h,n("p",null,[s("主要参数同上，使用姿势可以参考: "),n("a",x,[s("LineCreateWrapperTest"),t(a)])]),_,n("p",null,[s("主要参数同上，使用姿势可以参考: "),n("a",T,[s("LineCreateWrapperTest"),t(a)])]),I,n("blockquote",null,[n("p",null,[s("源码： "),n("a",q,[s("ImgMergeWrapperTest"),t(a)])])]),F])}const B=e(g,[["render",S],["__file","04.图片合成使用示例.html.vue"]]);export{B as default};
