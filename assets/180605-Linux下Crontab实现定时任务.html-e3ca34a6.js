import{_ as s,V as d,W as r,X as t,Y as e,Z as a,$ as n,a1 as l,F as o}from"./framework-094145d2.js";const c={},h=e("h1",{id:"linux下crontab实现定时任务",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#linux下crontab实现定时任务","aria-hidden":"true"},"#"),a(" Linux下Crontab实现定时任务")],-1),u=e("p",null,"基于Hexo搭建的个人博客，是一种静态博客页面，每次新增博文或者修改，都需要重新的编译并发布到Github，这样操作就有点蛋疼了，一个想法就自然而然的来了，能不能每天2点，自动的build一下，然后上传",-1),b=e("p",null,"linux的Crontab正好可以支持，下面简单的记录下相关知识点",-1),p=l(`<p>进入Crontab编辑</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>crontabl <span class="token parameter variable">-e</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>然后开始类vim方式的编辑，一个写法如下</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token number">30</span> 02 * * * /bin/bash /home/yihui/hexblog/build.sh
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>上面的含义表示每天2:30分，执行一下脚本 <code>/home/yihui/hexblog/build.sh</code></p><h3 id="_1-语法分析" tabindex="-1"><a class="header-anchor" href="#_1-语法分析" aria-hidden="true">#</a> 1. 语法分析</h3><p>针对上面的case进行语法简单说明</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>minute   hour   day   month   week   <span class="token builtin class-name">command</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ul><li>minute： 表示分钟，可以是从0到59之间的任何整数。</li><li>hour：表示小时，可以是从0到23之间的任何整数。</li><li>day：表示日期，可以是从1到31之间的任何整数。</li><li>month：表示月份，可以是从1到12之间的任何整数。</li><li>week：表示星期几，可以是从0到7之间的任何整数，这里的0或7代表星期日。</li><li>command：要执行的命令，可以是系统命令，也可以是自己编写的脚本文件。</li></ul><h3 id="_2-取值分析" tabindex="-1"><a class="header-anchor" href="#_2-取值分析" aria-hidden="true">#</a> 2. 取值分析</h3><p>上面的时间，可以用具体的数字，也可以用一些符号表示，对应的含义如下</p><ul><li>星号（*）：代表所有可能的值，例如month字段如果是星号，则表示在满足其它字段的制约条件后每月都执行该命令操作。</li><li>逗号（,）：可以用逗号隔开的值指定一个列表范围，例如，“1,2,5,7,8,9”</li><li>中杠（-）：可以用整数之间的中杠表示一个整数范围，例如“2-6”表示“2,3,4,5,6”</li><li>正斜线（/）：可以用正斜线指定时间的间隔频率，例如“0-23/2”表示每两小时执行一次，同时正斜线可以和星号一起使用，例如*/10，如果用在minute字段，表示每十分钟执行一次。</li></ul><h3 id="_3-服务操作" tabindex="-1"><a class="header-anchor" href="#_3-服务操作" aria-hidden="true">#</a> 3. 服务操作</h3><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>/sbin/service crond start //启动服务
/sbin/service crond stop //关闭服务
/sbin/service crond restart //重启服务
/sbin/service crond reload //重新载入配置
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_4-常用命令" tabindex="-1"><a class="header-anchor" href="#_4-常用命令" aria-hidden="true">#</a> 4. 常用命令</h3><p><strong>编辑Crontab</strong></p><p><code>crontab -e</code></p><p><strong>查看Crontab</strong></p><p><code>crontab -l</code></p><p><strong>删除Crontab</strong></p><p><code>crontab -r</code></p><p>添加Crontab之后，可能并没有预期那样生效，有可能是Crontab服务没有启动</p><h3 id="_5-实例case" tabindex="-1"><a class="header-anchor" href="#_5-实例case" aria-hidden="true">#</a> 5. 实例case</h3><p>每个月第一天执行一次</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>* * 1 * * /bin/bash xxx.sh
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>每分钟执行一次</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>* * * * * /bin/bash xxx.sh
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>每小时的第15,30,45分钟执行</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>15,30,45 * * * * /bin/bash xxx.sh
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>每周五19:30执行发周报</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>30 19 * * 5 command
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>每小时清一下日志</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>* */1 * * * command
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h2 id="ii-其他" tabindex="-1"><a class="header-anchor" href="#ii-其他" aria-hidden="true">#</a> II. 其他</h2>`,34),m={id:"一灰灰blog-https-liuyueyi-github-io-hexblog",tabindex:"-1"},g=e("a",{class:"header-anchor",href:"#一灰灰blog-https-liuyueyi-github-io-hexblog","aria-hidden":"true"},"#",-1),v={href:"https://liuyueyi.github.io/hexblog",target:"_blank",rel:"noopener noreferrer"},_={href:"https://liuyueyi.github.io/hexblog",target:"_blank",rel:"noopener noreferrer"},x=e("p",null,"一灰灰的个人博客，记录所有学习和工作中的博文，欢迎大家前去逛逛",-1),f=e("h3",{id:"声明",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#声明","aria-hidden":"true"},"#"),a(" 声明")],-1),y=e("p",null,"尽信书则不如，已上内容，纯属一家之言，因个人能力有限，难免有疏漏和错误之处，如发现bug或者有更好的建议，欢迎批评指正，不吝感激",-1),C={href:"https://weibo.com/p/1005052169825577/home",target:"_blank",rel:"noopener noreferrer"},k=e("li",null,"QQ： 一灰灰/3302797840",-1),V=e("h3",{id:"扫描关注",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#扫描关注","aria-hidden":"true"},"#"),a(" 扫描关注")],-1),B=e("figure",null,[e("img",{src:"https://raw.githubusercontent.com/liuyueyi/Source/master/img/info/blogInfoV2.png",alt:"QrCode",tabindex:"0",loading:"lazy"}),e("figcaption",null,"QrCode")],-1);function I(L,N){const i=o("ExternalLinkIcon");return d(),r("div",null,[h,u,b,t(" more "),p,e("h3",m,[g,a(),e("a",v,[a("一灰灰Blog"),n(i)]),a("： "),e("a",_,[a("https://liuyueyi.github.io/hexblog"),n(i)])]),x,f,y,e("ul",null,[e("li",null,[a("微博地址: "),e("a",C,[a("小灰灰Blog"),n(i)])]),k]),V,B])}const Q=s(c,[["render",I],["__file","180605-Linux下Crontab实现定时任务.html.vue"]]);export{Q as default};
