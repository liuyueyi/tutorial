import{_ as p,V as o,W as c,a1 as i,Y as n,Z as s,$ as e,X as t,F as l}from"./framework-eef79181.js";const u="/tutorial/imgs/210610/00.gif",r="/tutorial/imgs/210610/01.gif",d="/tutorial/imgs/210610/02.jpg",k="/tutorial/imgs/210610/03.gif",m={},v=n("p",null,[s("å‰é¢ä¸€ç¯‡åšæ–‡ä»‹ç»äº†ä¸€ä¸ª"),n("code",null,"@Value"),s("çš„ä¸€äº›çŸ¥è¯†ç‚¹ï¼Œå…¶ä¸­æäº†ä¸€ä¸ªç‚¹ï¼Œ"),n("code",null,"@Value"),s("å¯¹åº”çš„é…ç½®ï¼Œé™¤äº†æ˜¯é…ç½®æ–‡ä»¶ä¸­ä¹‹å¤–ï¼Œå¯ä»¥ä»å…¶ä»–çš„æ•°æ®æºä¸­è·å–ä¹ˆï¼Œå¦‚ä»redisï¼Œdbï¼Œhttpä¸­è·å–é…ç½®ï¼Ÿ")],-1),b=n("p",null,"äº†è§£è¿‡SpringCloud Configçš„å¯ä»¥ç»™å‡ºç¡®åˆ‡çš„ç­”æ¡ˆï¼Œå¯ä»¥ï¼Œè€Œä¸”ç”¨èµ·æ¥è¿˜è€çˆ½äº†ï¼Œè¿œç¨‹é…ç½®ï¼Œæ”¯æŒé…ç½®åŠ¨æ€åˆ·æ–°ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹ï¼Œåœ¨SpringBootä¸­ï¼Œå¦‚ä½•é…ç½®è‡ªå®šä¹‰çš„æ•°æ®æº",-1),g=t(`<h2 id="i-é¡¹ç›®ç¯å¢ƒ" tabindex="-1"><a class="header-anchor" href="#i-é¡¹ç›®ç¯å¢ƒ" aria-hidden="true">#</a> I. é¡¹ç›®ç¯å¢ƒ</h2><h3 id="_1-é¡¹ç›®ä¾èµ–" tabindex="-1"><a class="header-anchor" href="#_1-é¡¹ç›®ä¾èµ–" aria-hidden="true">#</a> 1. é¡¹ç›®ä¾èµ–</h3><p>æœ¬é¡¹ç›®å€ŸåŠ©<code>SpringBoot 2.2.1.RELEASE</code> + <code>maven 3.5.3</code> + <code>IDEA</code>è¿›è¡Œå¼€å‘</p><p>å¼€ä¸€ä¸ªwebæœåŠ¡ç”¨äºæµ‹è¯•</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-web<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="ii-è‡ªå®šä¹‰é…ç½®æº" tabindex="-1"><a class="header-anchor" href="#ii-è‡ªå®šä¹‰é…ç½®æº" aria-hidden="true">#</a> II. è‡ªå®šä¹‰é…ç½®æº</h2><p><code>@Value</code>ä¿®é¥°çš„æˆå‘˜ï¼Œç»‘å®šé…ç½®æ—¶ï¼Œæ˜¯ä»<code>Envrionment</code>ä¸­è¯»å–é…ç½®çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦åšçš„å°±æ˜¯æ³¨å†Œä¸€ä¸ªè‡ªå®šä¹‰çš„é…ç½®æºï¼Œå€ŸåŠ©<code>MapPropertySource</code>å¯ä»¥æ¥å®ç°æˆ‘ä»¬éœ€æ±‚åœºæ™¯</p><h3 id="_1-è‡ªå®šä¹‰æ•°æ®æº" tabindex="-1"><a class="header-anchor" href="#_1-è‡ªå®šä¹‰æ•°æ®æº" aria-hidden="true">#</a> 1. è‡ªå®šä¹‰æ•°æ®æº</h3><p>æ¼”ç¤ºä¸€ä¸ªæœ€ç®€å•è‡ªå®šä¹‰çš„é…ç½®æ•°æ®æºï¼Œé‡å†™<code>MapPropertySource</code>çš„<code>getProperties</code>æ–¹æ³•</p><p>å®ç°å¦‚ä¸‹</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">SimplePropertiesSource</span> <span class="token keyword">extends</span> <span class="token class-name">MapPropertySource</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token class-name">SimplePropertiesSource</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">,</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> source<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> source<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">SimplePropertiesSource</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">(</span><span class="token string">&quot;filePropertiesSource&quot;</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token doc-comment comment">/**
     * è¦†ç›–è¿™ä¸ªæ–¹æ³•ï¼Œé€‚ç”¨äºå®æ—¶è·å–é…ç½®
     *
     * <span class="token keyword">@param</span> <span class="token parameter">name</span>
     * <span class="token keyword">@return</span>
     */</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">Object</span> <span class="token function">getProperty</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// æ³¨æ„ï¼Œåªé’ˆå¯¹è‡ªå®šä¹‰å¼€å¤´çš„é…ç½®æ‰æ‰§è¡Œè¿™ä¸ªé€»è¾‘</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>name<span class="token punctuation">.</span><span class="token function">startsWith</span><span class="token punctuation">(</span><span class="token string">&quot;selfdefine.&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> name <span class="token operator">+</span> <span class="token string">&quot;_&quot;</span> <span class="token operator">+</span> <span class="token constant">UUID</span><span class="token punctuation">.</span><span class="token function">randomUUID</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">getProperty</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2-æ•°æ®æºæ³¨å†Œ" tabindex="-1"><a class="header-anchor" href="#_2-æ•°æ®æºæ³¨å†Œ" aria-hidden="true">#</a> 2. æ•°æ®æºæ³¨å†Œ</h3><p>ä¸Šé¢åªæ˜¯å£°æ˜äº†é…ç½®æºï¼Œæ¥ä¸‹æ¥æŠŠå®ƒæ³¨å†Œåˆ°Environmentä¸­ï¼Œè¿™æ ·å°±å¯ä»¥ä¾›åº”ç”¨ä½¿ç”¨äº†</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@RestController</span>
<span class="token annotation punctuation">@SpringBootApplication</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Application</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">Environment</span> environment<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Bean</span>
    <span class="token keyword">public</span> <span class="token class-name">SimplePropertiesSource</span> <span class="token function">simplePropertiesSource</span><span class="token punctuation">(</span><span class="token class-name">ConfigurableEnvironment</span> environment<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>environment <span class="token operator">=</span> environment<span class="token punctuation">;</span>
        <span class="token class-name">SimplePropertiesSource</span> ropertiesSource <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SimplePropertiesSource</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        environment<span class="token punctuation">.</span><span class="token function">getPropertySources</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addLast</span><span class="token punctuation">(</span>ropertiesSource<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> ropertiesSource<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// è·å–é…ç½®</span>
    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span>path <span class="token operator">=</span> <span class="token string">&quot;get&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getProperty</span><span class="token punctuation">(</span><span class="token class-name">String</span> key<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> environment<span class="token punctuation">.</span><span class="token function">getProperty</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">SpringApplication</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">Application</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="`+u+`" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>ä»ä¸Šé¢çš„è¾“å‡ºå¯ä»¥çœ‹å‡ºï¼Œè‡ªå®šä¹‰é…ç½®å¼€å¤´çš„ä¼šè·å–åˆ°éšæœºçš„é…ç½®å€¼ï¼›é<code>selfdefine</code>å¼€å¤´çš„ï¼Œæ²¡æœ‰ç›¸åº”çš„é…ç½®ï¼Œè¿”å›ç©º</p><h3 id="_3-åŸºäºæ–‡ä»¶çš„è‡ªå®šä¹‰é…ç½®æº" tabindex="-1"><a class="header-anchor" href="#_3-åŸºäºæ–‡ä»¶çš„è‡ªå®šä¹‰é…ç½®æº" aria-hidden="true">#</a> 3. åŸºäºæ–‡ä»¶çš„è‡ªå®šä¹‰é…ç½®æº</h3><p>ä¸Šé¢è¿™ä¸ªå¯èƒ½æœ‰ç‚¹è¿‡äºå„¿æˆäº†ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å°†é…ç½®æºæ”¾åœ¨è‡ªå®šä¹‰çš„æ–‡ä»¶ä¸­ï¼Œå¹¶æ”¯æŒæ–‡ä»¶é…ç½®ä¿®æ”¹</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">FilePropertiesSource</span> <span class="token keyword">extends</span> <span class="token class-name">MapPropertySource</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token class-name">FilePropertiesSource</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">,</span> <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> source<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">(</span>name<span class="token punctuation">,</span> source<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token class-name">FilePropertiesSource</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">(</span><span class="token string">&quot;filePropertiesSource&quot;</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// è¿™ç§æ–¹å¼ï¼Œé€‚ç”¨äºä¸€æ¬¡æå–æ‰€æœ‰çš„é…ç½®ï¼Œç„¶åä»å†…å­˜ä¸­æŸ¥è¯¢å¯¹åº”çš„é…ç½®ï¼Œæé«˜æœåŠ¡æ€§èƒ½</span>
    <span class="token comment">// 10s æ›´æ–°ä¸€æ¬¡</span>
    <span class="token annotation punctuation">@PostConstruct</span>
    <span class="token annotation punctuation">@Scheduled</span><span class="token punctuation">(</span>fixedRate <span class="token operator">=</span> <span class="token number">10_000</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">refreshSource</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        <span class="token class-name">String</span> ans <span class="token operator">=</span>
                <span class="token class-name">FileCopyUtils</span><span class="token punctuation">.</span><span class="token function">copyToString</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">InputStreamReader</span><span class="token punctuation">(</span><span class="token class-name">FilePropertiesSource</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">.</span><span class="token function">getClassLoader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getResourceAsStream</span><span class="token punctuation">(</span><span class="token string">&quot;kv.properties&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Map</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Object</span><span class="token punctuation">&gt;</span></span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">HashMap</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">String</span> sub <span class="token operator">:</span> ans<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">&quot;\\n&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>sub<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">continue</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> kv <span class="token operator">=</span> <span class="token class-name">StringUtils</span><span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span>sub<span class="token punctuation">,</span> <span class="token string">&quot;=&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>kv<span class="token punctuation">.</span>length <span class="token operator">!=</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">continue</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>

            map<span class="token punctuation">.</span><span class="token function">put</span><span class="token punctuation">(</span>kv<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">trim</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> kv<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">trim</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        source<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        source<span class="token punctuation">.</span><span class="token function">putAll</span><span class="token punctuation">(</span>map<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,19),f={href:"http://mp.weixin.qq.com/s?__biz=MzU3MTAzNTMzMQ==&mid=2247483855&idx=1&sn=918528761a188b664823dbf442ab681b&chksm=fce71a63cb909375a46cd1ec966881ce075f2b98ac0a84aaf2eaa33f65063c6be11378676039&token=73054292&lang=zh_CN#rd",target:"_blank",rel:"noopener noreferrer"},h=t(`<p>å¯¹åº”çš„é…ç½®æ–‡ä»¶</p><div class="language-properties line-numbers-mode" data-ext="properties"><pre class="language-properties"><code><span class="token key attr-name">user</span><span class="token punctuation">=</span><span class="token value attr-value">xhh</span>
<span class="token key attr-name">name</span><span class="token punctuation">=</span><span class="token value attr-value">ä¸€ç°ç°</span>
<span class="token key attr-name">age</span><span class="token punctuation">=</span><span class="token value attr-value">18</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æ³¨å†Œçš„å§¿åŠ¿ä¸ä¸Šé¢ä¸€è‡´ï¼Œå°±ä¸å•ç‹¬è¯´æ˜äº†ï¼Œæ¥ä¸‹æ¥æ¼”ç¤ºä¸€ä¸‹ä½¿ç”¨</p><figure><img src="`+r+`" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>ä»ä¸Šå¯ä»¥çœ‹åˆ°æ–‡ä»¶ä¸­çš„é…ç½®ä¿®æ”¹ä¹‹åï¼Œè¿‡ä¸€æ®µæ—¶é—´ä¼šåˆ·æ–°</p><h3 id="_4-valueç»‘å®šè‡ªå®šä¹‰é…ç½®" tabindex="-1"><a class="header-anchor" href="#_4-valueç»‘å®šè‡ªå®šä¹‰é…ç½®" aria-hidden="true">#</a> 4. <code>@Value</code>ç»‘å®šè‡ªå®šä¹‰é…ç½®</h3><p>æ¥ä¸‹æ¥æˆ‘ä»¬çœ‹ä¸€ä¸‹ï¼Œå°†<code>@Value</code>ç»‘å®šè‡ªå®šä¹‰çš„é…ç½®ï¼Œæ˜¯å¦å¯ä»¥æˆåŠŸ</p><p>è°ƒæ•´ä¸€ä¸‹ä¸Šé¢çš„Application, æ·»åŠ ä¸€ä¸ªæˆå‘˜å±æ€§</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Value</span><span class="token punctuation">(</span><span class="token string">&quot;\${name}&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>

<span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span>path <span class="token operator">=</span> <span class="token string">&quot;get&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getProperty</span><span class="token punctuation">(</span><span class="token class-name">String</span> key<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> name <span class="token operator">+</span> <span class="token string">&quot;|&quot;</span> <span class="token operator">+</span> environment<span class="token punctuation">.</span><span class="token function">getProperty</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å†æ¬¡æµ‹è¯•å‘ç°æŠ›å¼‚å¸¸äº†ï¼Œè¯´æ˜¯è¿™ä¸ªé…ç½®ä¸å­˜åœ¨ï¼ï¼ï¼</p><figure><img src="`+d+'" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>ï¼ˆè¿™å°±è¿‡åˆ†äº†å•Šï¼Œçœ‹äº†åŠå¤©ï¼Œç»“æœå‘Šè¯‰æˆ‘ä¸è¡Œï¼Œè¿™è¿˜ä¸å¾—èµ¶ç´§æä¸ªå·®è¯„ä¹ˆğŸ˜¡ğŸ˜¡ğŸ˜¡ï¼‰</p><p>å·²ç»å†™åˆ°è¿™é‡Œäº†ï¼Œå½“ç„¶æˆ‘ä¹Ÿå¾—ç»§ç»­å°è¯•æŒ½æ•‘ä¸€ä¸‹ï¼Œä¸ºå•¥å‰é¢ç›´æ¥é€šè¿‡<code>Environment</code>å¯ä»¥æ‹¿åˆ°é…ç½®ï¼Œä½†æ˜¯<code>@Value</code>æ³¨è§£ç»‘å®šå°±ä¸è¡Œå‘¢ï¼Ÿ</p><p>â€ç½ªé­ç¥¸é¦–â€œå°±åœ¨äºåˆå§‹åŒ–é¡ºåºï¼Œæˆ‘è‡ªå®šä¹‰çš„é…ç½®æºï¼Œè¿˜æ²¡æœ‰å¡åˆ°<code>Envrionment</code>ï¼Œä½ å°±å¼€ä¼šç€æ‰‹ç»‘å®šäº†ï¼Œå°±åƒå‡†å¤‡ç»™â€ä¸€ç°ç°blogâ€œä¸€ä¸ªå·®è¯„ï¼Œç»“æœå‘ç°è¿˜æ²¡å…³æ³¨...ï¼ˆå¥½å§ï¼Œæˆ‘æ‰¿è®¤æ²¡å…³æ³¨ä¹Ÿå¯ä»¥è¯„è®ºğŸ˜­ï¼‰</p><p>æ ¹æ®æ—¢å¾€çš„çŸ¥è¯†ç‚¹ï¼ˆè‡³äºæ˜¯å“ªäº›çŸ¥è¯†ç‚¹ï¼Œé‚£å°±é•¿è¯çŸ­è¯´ä¸äº†äº†ï¼Œçœ‹ä¸‹é¢å‡ ç¯‡ç²¾é€‰çš„åšæ–‡å§ï¼‰</p>',15),_={href:"http://mp.weixin.qq.com/s?__biz=MzU3MTAzNTMzMQ==&mid=2247484553&idx=1&sn=f2d20abf3f3d409c53d0ee2675f7ab00&chksm=fce71f25cb9096338452312fb211776dee65fabbbe35908b9b00b43631c62a0f397a5b4aecf7&token=73054292&lang=zh_CN#rd",target:"_blank",rel:"noopener noreferrer"},y={href:"http://mp.weixin.qq.com/s?__biz=MzU3MTAzNTMzMQ==&mid=2247484364&idx=1&sn=35eb49543198b283ec505139b0f7af6f&chksm=fce71860cb909176b27ef22074970e3ac1746182b86b2a31d67fe5dcdedc59f99dc92eefa06a&token=73054292&lang=zh_CN#rd",target:"_blank",rel:"noopener noreferrer"},w={href:"http://mp.weixin.qq.com/s?__biz=MzU3MTAzNTMzMQ==&mid=2247484360&idx=1&sn=97188fc2e5595b1ba67db2e2634262c3&chksm=fce71864cb9091721af0288a0a4c9a4145b62dd63c927db6f0a14ceb8f13faa23183499f06e4&token=73054292&lang=zh_CN#rd",target:"_blank",rel:"noopener noreferrer"},S=t(`<p>è¦è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œä¸€ä¸ªæœ€ç®€å•çš„æ–¹å¼å¦‚ä¸‹</p><p>åˆ›å»ºä¸€ä¸ªç‹¬ç«‹çš„é…ç½®ç±»ï¼Œå®ç°è‡ªå®šä¹‰æ•°æ®æºçš„æ³¨å†Œ</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@Configuration</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AutoConfig</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Bean</span>
    <span class="token keyword">public</span> <span class="token class-name">FilePropertiesSource</span> <span class="token function">filePropertiesSource</span><span class="token punctuation">(</span><span class="token class-name">ConfigurableEnvironment</span> environment<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">FilePropertiesSource</span> filePropertiesSource <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FilePropertiesSource</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        environment<span class="token punctuation">.</span><span class="token function">getPropertySources</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addLast</span><span class="token punctuation">(</span>filePropertiesSource<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> filePropertiesSource<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>æµ‹è¯•ç±»ä¸ŠæŒ‡å®šbeanä¾èµ–</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@DependsOn</span><span class="token punctuation">(</span><span class="token string">&quot;filePropertiesSource&quot;</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@EnableScheduling</span>
<span class="token annotation punctuation">@RestController</span>
<span class="token annotation punctuation">@SpringBootApplication</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Application</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">private</span> <span class="token class-name">Environment</span> environment<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Value</span><span class="token punctuation">(</span><span class="token string">&quot;\${name}&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> name<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span>path <span class="token operator">=</span> <span class="token string">&quot;get&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getProperty</span><span class="token punctuation">(</span><span class="token class-name">String</span> key<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> name <span class="token operator">+</span> <span class="token string">&quot;|&quot;</span> <span class="token operator">+</span> environment<span class="token punctuation">.</span><span class="token function">getProperty</span><span class="token punctuation">(</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">SpringApplication</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">Application</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å†æ¬¡æµ‹è¯•ï¼Œç»“æœå¦‚ä¸‹</p><figure><img src="`+k+'" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>ä»ä¸Šé¢çš„æ¼”ç¤ºåŠ¨å›¾å¯ä»¥çœ‹åˆ°ï¼Œç»‘å®šè‡ªå®šä¹‰çš„æ•°æ®æºé…ç½®ï¼Œæ²¡æœ‰é—®é¢˜ï¼Œä½†æ˜¯ï¼Œå½“é…ç½®å˜æ›´æ—¶ï¼Œç»‘å®šçš„nameå­—æ®µï¼Œæ²¡æœ‰éšä¹‹æ›´æ–°</p><p>ç®€å•æ¥è®²å°±æ˜¯ä¸æ”¯æŒåŠ¨æ€åˆ·æ–°ï¼Œè¿™å°±éš¾å—äº†å•Šï¼Œæˆ‘å°±æƒ³è¦åŠ¨æ€åˆ·æ–°ï¼Œé‚£è¯¥æ€ä¹ˆæï¼Ÿ</p><ul><li>ä¸è¦æ€¥ï¼Œæ–°çš„åšæ–‡å·²ç»å®‰æ’ä¸Šäº†ï¼Œä¸‹ç¯‡å¥‰ä¸Šï¼ˆæ€•è¿·è·¯çš„å°ä¼™ä¼´ï¼Œä¸å¦¨å…³æ³¨ä¸€ä¸‹â€ä¸€ç°ç°blogâ€œğŸºï¼‰</li></ul><h3 id="_5-å°ç»“" tabindex="-1"><a class="header-anchor" href="#_5-å°ç»“" aria-hidden="true">#</a> 5. å°ç»“</h3><p>æœ€åæŒ‰ç…§æƒ¯ä¾‹å°ç»“ä¸€ä¸‹ï¼Œæœ¬æ–‡ç¯‡å¹…è™½é•¿ï¼Œä½†çŸ¥è¯†ç‚¹æ¯”è¾ƒé›†ä¸­ï¼Œæ€»ç»“ä¸‹æ¥ï¼Œä¸¤å¥è¯æå®š</p><ul><li>é€šè¿‡ç»§æ‰¿<code>MapPropertySource</code>æ¥å®ç°è‡ªå®šä¹‰é…ç½®æºï¼Œæ³¨å†Œåˆ°<code>Envrionment</code>å¯ä¾›<code>@Value</code>ä½¿ç”¨</li><li>ä½¿ç”¨<code>@Value</code>ç»‘å®šè‡ªå®šä¹‰é…ç½®æºæ—¶ï¼Œæ³¨æ„æ³¨å†Œçš„é¡ºåºè¦æ—©äºbeançš„åˆå§‹åŒ–</li></ul><p>å¥½çš„ï¼Œåˆ°è¿™é‡Œæ­£æ–‡ç»“æŸï¼Œ æˆ‘æ˜¯ä¸€ç°ç°ï¼Œæ¬¢è¿å„ä½å¤§ä½¬æ¥è¸©ä¸€è¸©é•¿è‰çš„å…¬ä¼—å·&quot;ä¸€ç°ç°blog&quot;</p><h2 id="iii-ä¸èƒ½é”™è¿‡çš„æºç å’Œç›¸å…³çŸ¥è¯†ç‚¹" tabindex="-1"><a class="header-anchor" href="#iii-ä¸èƒ½é”™è¿‡çš„æºç å’Œç›¸å…³çŸ¥è¯†ç‚¹" aria-hidden="true">#</a> III. ä¸èƒ½é”™è¿‡çš„æºç å’Œç›¸å…³çŸ¥è¯†ç‚¹</h2><h3 id="_0-é¡¹ç›®" tabindex="-1"><a class="header-anchor" href="#_0-é¡¹ç›®" aria-hidden="true">#</a> 0. é¡¹ç›®</h3>',16),M={href:"https://github.com/liuyueyi/spring-boot-demo",target:"_blank",rel:"noopener noreferrer"},x={href:"https://github.com/liuyueyi/spring-boot-demo/tree/master/spring-boot/002-dynamic-envronment",target:"_blank",rel:"noopener noreferrer"},q=n("p",null,[n("strong",null,"é…ç½®ç³»åˆ—åšæ–‡")],-1),z={href:"http://mp.weixin.qq.com/s?__biz=MzU3MTAzNTMzMQ==&mid=2247486297&idx=1&sn=9c9014eb80987f8c6ef842b1ae02b155&chksm=fce710f5cb9099e31047b01b9d4f1e454cf31c6b11fdd85f7f896d5392e9db2f519af65fd5d2&scene=21#wechat_redirect",target:"_blank",rel:"noopener noreferrer"},P={href:"http://mp.weixin.qq.com/s?__biz=MzU3MTAzNTMzMQ==&mid=2247485872&idx=1&sn=cb565e467d2d2dc9d69ad80a1f936813&chksm=fce7121ccb909b0a0efe89c94d5eba504cf490e0f0bdd15502def81be8c23b96ea76b5f247c4&scene=21#wechat_redirect",target:"_blank",rel:"noopener noreferrer"},A={href:"http://mp.weixin.qq.com/s?__biz=MzU3MTAzNTMzMQ==&mid=2247485754&idx=1&sn=724f1a314f64faaaff580dfac0b58e73&chksm=fce71296cb909b8086442a6ebc982b5ed16b1a7252da2b8af27434c3dd6c757537867433efeb&scene=21#wechat_redirect",target:"_blank",rel:"noopener noreferrer"},T={href:"http://mp.weixin.qq.com/s?__biz=MzU3MTAzNTMzMQ==&mid=2247484640&idx=1&sn=5ac20b68d7b539295dabc0c2aaf81314&chksm=fce71f4ccb90965afb626b437cc618172b2a34d8ff72b2ec30eba71e85ff9330503e0ead9e9a&scene=21#wechat_redirect",target:"_blank",rel:"noopener noreferrer"},B={href:"http://mp.weixin.qq.com/s?__biz=MzU3MTAzNTMzMQ==&mid=2247484056&idx=1&sn=90f705d698b2613bcc269fea98dc993e&chksm=fce71934cb90902264f260b15977fc9bf7e19a3ebf3f779acec2f5842c9a8ff6ac514beebf60&scene=21#wechat_redirect",target:"_blank",rel:"noopener noreferrer"},j={href:"http://mp.weixin.qq.com/s?__biz=MzU3MTAzNTMzMQ==&mid=2247484054&idx=1&sn=954d2bb34b5ce288dcfc2451cbcd2830&chksm=fce7193acb90902cf2ba829362da0e327d7849f3339e4d61188a03cabeb07af0590056f755d5&scene=21#wechat_redirect",target:"_blank",rel:"noopener noreferrer"},N={href:"http://mp.weixin.qq.com/s?__biz=MzU3MTAzNTMzMQ==&mid=2247484053&idx=1&sn=3fc32d8a21a5cadc7b33b11681f272ae&chksm=fce71939cb90902fdc5b352e0d135b395248aa9ef40acd5e145bdd05a62185ff538c66f4fe26&scene=21#wechat_redirect",target:"_blank",rel:"noopener noreferrer"},E={href:"http://mp.weixin.qq.com/s?__biz=MzU3MTAzNTMzMQ==&mid=2247484040&idx=1&sn=0b984bc76954f9214ed32ada38bc82d2&chksm=fce71924cb909032ad7a06a12aa71c23afe5698d552f182cc96bb5486b54e5a7332d7ab0736d&scene=21#wechat_redirect",target:"_blank",rel:"noopener noreferrer"};function C(U,I){const a=l("ExternalLinkIcon");return o(),c("div",null,[v,b,i(" more "),g,n("p",null,[s("ä¸Šé¢å†™äº†ä¸€ä¸ªå®šæ—¶å™¨ï¼Œæ¯10såˆ·æ–°ä¸€ä¸‹å†…å­˜ä¸­çš„é…ç½®ä¿¡æ¯ï¼Œå½“ç„¶è¿™é‡Œä¹Ÿæ˜¯å¯ä»¥é…ç½®ä¸€ä¸ªæ–‡ä»¶å˜åŠ¨ç›‘å¬å™¨ï¼Œç›¸å…³æœ‰å…´è¶£çš„è¯ï¼Œå¯ä»¥çœ‹ä¸‹"),n("a",f,[s("Javaå®ç°æ–‡ä»¶å˜åŠ¨çš„ç›‘å¬å¯ä»¥æ€ä¹ˆç©"),e(a)])]),h,n("ul",null,[n("li",null,[n("a",_,[s("ã€SpringBootåŸºç¡€ç³»åˆ—-å®æˆ˜ã€‘å¦‚ä½•æŒ‡å®š bean æœ€å…ˆåŠ è½½(åº”ç”¨ç¯‡)"),e(a)])]),n("li",null,[n("a",y,[s("SpringBootç³»åˆ—æ•™ç¨‹ä¹‹Beanä¹‹æŒ‡å®šåˆå§‹åŒ–é¡ºåºçš„è‹¥å¹²å§¿åŠ¿"),e(a)])]),n("li",null,[n("a",w,[s("SpringBootç³»åˆ—æ•™ç¨‹ä¹‹BeanåŠ è½½é¡ºåºä¹‹é”™è¯¯ä½¿ç”¨å§¿åŠ¿è¾Ÿè°£"),e(a)])])]),S,n("ul",null,[n("li",null,[s("å·¥ç¨‹ï¼š"),n("a",M,[s("https://github.com/liuyueyi/spring-boot-demo"),e(a)])]),n("li",null,[s("æºç : "),n("a",x,[s("https://github.com/liuyueyi/spring-boot-demo/tree/master/spring-boot/002-dynamic-envronment"),e(a)])])]),q,n("ul",null,[n("li",null,[n("a",z,[s("ã€SpringBoot åŸºç¡€ç³»åˆ—ã€‘@Value ä¸­å“ªäº›ä½ ä¸çŸ¥é“çš„çŸ¥è¯†ç‚¹"),e(a)])]),n("li",null,[n("a",P,[s("ã€SpringBoot åŸºç¡€ç³»åˆ—ã€‘ConfigurationProperties é…ç½®ç»‘å®šä¸­é‚£äº›ä½ ä¸çŸ¥é“çš„äº‹æƒ…"),e(a)])]),n("li",null,[n("a",A,[s("ã€SpringBoot åŸºç¡€ç³»åˆ—ã€‘SpringBoot é…ç½®ç¯‡ä¹‹ PropertySource åŠ è½½ Yaml é…ç½®æ–‡ä»¶å®ä¾‹æ¼”ç¤º"),e(a)])]),n("li",null,[n("a",T,[s("ã€SpringBoot åŸºç¡€ç³»åˆ—ã€‘å®ç°ä¸€ä¸ªè‡ªå®šä¹‰é…ç½®åŠ è½½å™¨ï¼ˆåº”ç”¨ç¯‡ï¼‰"),e(a)])]),n("li",null,[n("a",B,[s("SpringBootåŸºç¡€ç¯‡é…ç½®ä¿¡æ¯ä¹‹é…ç½®åˆ·æ–°"),e(a)])]),n("li",null,[n("a",j,[s("SpringBootåŸºç¡€ç¯‡é…ç½®ä¿¡æ¯ä¹‹è‡ªå®šä¹‰é…ç½®æŒ‡å®šä¸é…ç½®å†…å¼•ç”¨"),e(a)])]),n("li",null,[n("a",N,[s("SpringBootåŸºç¡€ç¯‡é…ç½®ä¿¡æ¯ä¹‹å¤šç¯å¢ƒé…ç½®ä¿¡æ¯"),e(a)])]),n("li",null,[n("a",E,[s("SpringBootåŸºç¡€ç¯‡é…ç½®ä¿¡æ¯ä¹‹å¦‚ä½•è¯»å–é…ç½®ä¿¡æ¯"),e(a)])])])])}const Q=p(m,[["render",C],["__file","10.210610-SpringBootåŸºç¡€ç¯‡ä¹‹è‡ªå®šä¹‰é…ç½®æºçš„ä½¿ç”¨å§¿åŠ¿.html.vue"]]);export{Q as default};
