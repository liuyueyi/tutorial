import{_ as t,V as p,W as o,X as i,Y as n,Z as a,$ as e,a1 as c,F as l}from"./framework-094145d2.js";const r={},u=n("p",null,"前面两篇文章，分别介绍了如何获取配置信息，区分多环境的配置支持，配置信息的优先级问题，那么掌握这些是否就足够了呢？",-1),d=n("ul",null,[n("li",null,[a("如何获取指定文件（即非"),n("code",null,"application-xxx.properties"),a("）中的配置信息呢？")]),n("li",null,"配置文件中依赖其他配置文件的参数如何表示？")],-1),k=c(`<h2 id="i-加载自定义配置文件" tabindex="-1"><a class="header-anchor" href="#i-加载自定义配置文件" aria-hidden="true">#</a> I. 加载自定义配置文件</h2><p>前面在使用多环境的配置时，通过设置 <code>spring.profiles.active</code> 来选择加载具体的配置文件，如果没有精神洁癖的话，就把自定义的配置文件加上<code>application-</code>前缀，然后用这种方式来加载，当然是可行的</p><p>除此之外呢?</p><h3 id="_1-propertysource注解" tabindex="-1"><a class="header-anchor" href="#_1-propertysource注解" aria-hidden="true">#</a> 1. <code>PropertySource</code>注解</h3><p>这个注解可以指定你想加载的配置文件，然后读取其中的配置信息, 使用姿势也相对简单</p><p>如在根目录下有配置文件 <code>biz.properties</code></p><div class="language-properties line-numbers-mode" data-ext="properties"><pre class="language-properties"><code><span class="token key attr-name">biz.token</span><span class="token punctuation">=</span><span class="token value attr-value">mytoken</span>
<span class="token key attr-name">biz.appKey</span><span class="token punctuation">=</span><span class="token value attr-value">asdf</span>
<span class="token key attr-name">biz.appVersion</span><span class="token punctuation">=</span><span class="token value attr-value">1</span>
<span class="token key attr-name">biz.source</span><span class="token punctuation">=</span><span class="token value attr-value">xxx.yyy</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>对应的加载配置的bean为</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>git<span class="token punctuation">.</span>hui<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>properties<span class="token punctuation">.</span>config</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">lombok<span class="token punctuation">.</span></span><span class="token class-name">Data</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>boot<span class="token punctuation">.</span>context<span class="token punctuation">.</span>properties<span class="token punctuation">.</span></span><span class="token class-name">ConfigurationProperties</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Configuration</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>context<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">PropertySource</span></span><span class="token punctuation">;</span>

<span class="token doc-comment comment">/**
 * Created by @author yihui in 15:08 18/9/19.
 */</span>
<span class="token annotation punctuation">@Data</span>
<span class="token annotation punctuation">@Configuration</span>
<span class="token annotation punctuation">@PropertySource</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">&quot;classpath:biz.properties&quot;</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@ConfigurationProperties</span><span class="token punctuation">(</span>prefix <span class="token operator">=</span> <span class="token string">&quot;biz&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">OtherProperBean</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> token<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> appKey<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Integer</span> appVersion<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">String</span> source<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>说明</strong></p><ul><li><code>@PropertySource({&quot;classpath:biz.properties&quot;})</code> : 从根目录下，加载配置文件biz.properties</li><li><code>@ConfigurationProperties(prefix = &quot;biz&quot;)</code>: 获取配置文件中，前缀为biz的配置</li></ul><p>测试相关就不写了，有兴趣的直接自己尝试即可</p><h3 id="_2-propertysource-注解不生效问题" tabindex="-1"><a class="header-anchor" href="#_2-propertysource-注解不生效问题" aria-hidden="true">#</a> 2. <code>PropertySource</code> 注解不生效问题</h3><p>接下来需要重点说一下的是，在我自己的测试中，最开始我的配置文件都是yml格式，然后发现上面的配置始终不生效，也不知道啥原因；然后把配置文件换成properties文件之后，就可以了；</p><p>至于为什么会有这个问题，先留着，后续有时间深入研究一下</p><h2 id="ii-配置内引用" tabindex="-1"><a class="header-anchor" href="#ii-配置内引用" aria-hidden="true">#</a> II. 配置内引用</h2><p>前面的配置中，使用<code>\${random.int}</code>这种东西，啥意思？</p><h3 id="_1-random随机数" tabindex="-1"><a class="header-anchor" href="#_1-random随机数" aria-hidden="true">#</a> 1. random随机数</h3><p>在配置文件中，支持通过 \${random} 来生成一些随机值</p><p>常见的几种用法如下</p><div class="language-properties line-numbers-mode" data-ext="properties"><pre class="language-properties"><code><span class="token comment"># 随机字符串</span>
<span class="token key attr-name">com.kfit.blog.value</span><span class="token punctuation">=</span><span class="token value attr-value">\${random.value} </span>

<span class="token comment"># 随机int</span>
<span class="token key attr-name">com.kfit.blog.number</span><span class="token punctuation">=</span><span class="token value attr-value">\${random.int} </span>

<span class="token comment"># 随机long</span>
<span class="token key attr-name">com.kfit.blog.bignumber</span><span class="token punctuation">=</span><span class="token value attr-value">\${random.long} </span>

<span class="token comment"># 10以内的随机数</span>
<span class="token key attr-name">com.kfit.blog.test1</span><span class="token punctuation">=</span><span class="token value attr-value">\${random.int(10)} </span>

<span class="token comment"># 10-20的随机数</span>
<span class="token key attr-name">com.kfit.blog.test2</span><span class="token punctuation">=</span><span class="token value attr-value">\${random.int[10,20]} </span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2-配置引用" tabindex="-1"><a class="header-anchor" href="#_2-配置引用" aria-hidden="true">#</a> 2. 配置引用</h3><p>在配置中，一个参数需要引用另一个配置参数，可以怎么处理？</p><ul><li>使用 <code>\${xxx}</code> 来表示引用配置 xxx的值</li></ul><p>如</p><div class="language-properties line-numbers-mode" data-ext="properties"><pre class="language-properties"><code><span class="token key attr-name">biz.token</span><span class="token punctuation">=</span><span class="token value attr-value">mytoken</span>
<span class="token key attr-name">biz.appKey</span><span class="token punctuation">=</span><span class="token value attr-value">asdf</span>
<span class="token key attr-name">biz.appVersion</span><span class="token punctuation">=</span><span class="token value attr-value">1</span>
<span class="token key attr-name">biz.source</span><span class="token punctuation">=</span><span class="token value attr-value">xxx.yyy</span>
<span class="token comment"># uuid的值为 mytoken#asdf</span>
<span class="token key attr-name">biz.uuid</span><span class="token punctuation">=</span><span class="token value attr-value">\${biz.token}#\${biz.appKey}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="ii-其他" tabindex="-1"><a class="header-anchor" href="#ii-其他" aria-hidden="true">#</a> II. 其他</h2><h3 id="_0-项目" tabindex="-1"><a class="header-anchor" href="#_0-项目" aria-hidden="true">#</a> 0. 项目</h3>`,28),m={href:"https://github.com/liuyueyi/spring-boot-demo",target:"_blank",rel:"noopener noreferrer"},v={href:"https://github.com/liuyueyi/spring-boot-demo/tree/master/spring-boot/000-properties",target:"_blank",rel:"noopener noreferrer"};function b(h,_){const s=l("ExternalLinkIcon");return p(),o("div",null,[u,d,i(" more "),k,n("ul",null,[n("li",null,[a("工程："),n("a",m,[a("spring-boot-demo"),e(s)])]),n("li",null,[a("modal： "),n("a",v,[a("spring-boot-demo#000-properties"),e(s)])])])])}const y=t(r,[["render",b],["__file","03.180921-SpringBoot基础篇配置信息之自定义配置指定与配置内引用.html.vue"]]);export{y as default};
