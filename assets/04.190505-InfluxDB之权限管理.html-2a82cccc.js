import{_ as a,V as s,W as e,X as n,Y as i,a1 as r}from"./framework-094145d2.js";const d="/tutorial/imgs/190505/00.jpg",l="/tutorial/imgs/190505/01.jpg",t={},o=i("p",null,"influxdb安装完毕之后，默认属于裸奔状态，为了安全起见，当然是需要加上权限管理，下面介绍下如何设置权限",-1),c=r(`<h2 id="i-简单使用篇" tabindex="-1"><a class="header-anchor" href="#i-简单使用篇" aria-hidden="true">#</a> I. 简单使用篇</h2><p>不考虑细节的情况下，我只希望可以添加一个用户/密码，然后只有输入用户/密码验证准确之后，就可以愉快的进行后续的编码逻辑；至于更多的用户权限管理，不想太了解的，可以直接看这一小节即可</p><h3 id="_1-设置用户并赋权" tabindex="-1"><a class="header-anchor" href="#_1-设置用户并赋权" aria-hidden="true">#</a> 1. 设置用户并赋权</h3><p>安装完毕之后，默认没有开启权限，因此可以直接连接</p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># 首先通过cli 连上influxdb</span>
influx

<span class="token comment"># 创建用户，密码，并赋予所有的权限</span>
create user admin with password <span class="token string">&#39;admin&#39;</span> with all privileges
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>如下图，需要注意的是密码必须使用引号括起来，否则会出现下图中的报错</p><figure><img src="`+d+`" alt="show" tabindex="0" loading="lazy"><figcaption>show</figcaption></figure><h3 id="_2-开启权限校验" tabindex="-1"><a class="header-anchor" href="#_2-开启权限校验" aria-hidden="true">#</a> 2. 开启权限校验</h3><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">vim</span> /etc/influxdb/influxdb.conf

<span class="token comment"># 开启配置</span>
auth-enabled <span class="token operator">=</span> <span class="token boolean">true</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-重启并测试" tabindex="-1"><a class="header-anchor" href="#_3-重启并测试" aria-hidden="true">#</a> 3. 重启并测试</h3><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token comment"># 重启db</span>
<span class="token function">service</span> influxdb restart

<span class="token comment"># 连接测试</span>
influx <span class="token parameter variable">-username</span> admin <span class="token parameter variable">-password</span> admin
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="`+l+`" alt="show" tabindex="0" loading="lazy"><figcaption>show</figcaption></figure><h2 id="ii-权限管理" tabindex="-1"><a class="header-anchor" href="#ii-权限管理" aria-hidden="true">#</a> II. 权限管理</h2><p>前面介绍的基本上可以满足简单的db使用姿势了，接下来介绍下更多的使用说明</p><h3 id="_1-用户管理" tabindex="-1"><a class="header-anchor" href="#_1-用户管理" aria-hidden="true">#</a> 1. 用户管理</h3><p><strong>创建用户</strong></p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>create user xxx with password <span class="token string">&#39;pwd&#39;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><strong>重设密码</strong></p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token builtin class-name">set</span> password <span class="token keyword">for</span> <span class="token assign-left variable">xxx</span><span class="token operator">=</span><span class="token string">&#39;newpwd&#39;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><strong>删除用户</strong></p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>drop user xxx
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><strong>查看用户</strong></p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>show <span class="token function">users</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="_2-权限管理" tabindex="-1"><a class="header-anchor" href="#_2-权限管理" aria-hidden="true">#</a> 2. 权限管理</h3><p>针对用户进行授权和回收</p><p><strong>授权</strong></p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>GRANT ALL PRIVILEGES TO <span class="token operator">&lt;</span>username<span class="token operator">&gt;</span>
GRANT <span class="token punctuation">[</span>READ,WRITE,ALL<span class="token punctuation">]</span> ON <span class="token operator">&lt;</span>database_name<span class="token operator">&gt;</span> TO <span class="token operator">&lt;</span>username<span class="token operator">&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>回收</strong></p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>REVOKE ALL PRIVILEGES FROM <span class="token operator">&lt;</span>username<span class="token operator">&gt;</span>
REVOKE <span class="token punctuation">[</span>READ,WRITE,ALL<span class="token punctuation">]</span> ON <span class="token operator">&lt;</span>database_name<span class="token operator">&gt;</span> FROM <span class="token operator">&lt;</span>username<span class="token operator">&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>权限查询</strong></p><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code>show grants <span class="token keyword">for</span> <span class="token operator">&lt;</span>username<span class="token operator">&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div>`,31);function p(u,h){return s(),e("div",null,[o,n(" more "),c])}const v=a(t,[["render",p],["__file","04.190505-InfluxDB之权限管理.html.vue"]]);export{v as default};
