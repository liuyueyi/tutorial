---
title: 2. æ•°ç»„ä¸listäº’è½¬
order: 2
tag:
  - JDK
  - ç¼–ç¨‹æŠ€å·§
category:
  - Java
  - ç¼–ç¨‹æŠ€å·§
date: 2021-08-10 08:42:44
keywords: jdk string list collection java å®æˆ˜ ç¼–ç¨‹
---

# å®æˆ˜2ï¼šæ•°ç»„ä¸listäº’è½¬

è¿™ä¸ªè€ƒé¢˜æ¯”è¾ƒå¸¸è§ï¼Œä¹Ÿæ¯”è¾ƒç®€å•ï¼Œéš¾é“å°±è¿™ä¹Ÿæœ‰ä»€ä¹ˆå¯ä»¥è¯´åˆ°çš„é—¨è·¯ä¸æˆï¼Ÿ

æ¥ä¸‹æ¥æœ¬æ–‡å¥½å¥½çš„è¯´ä¸€è¯´å®ƒçš„å‡ ç§å®ç°å§¿åŠ¿ï¼Œæ€»æœ‰ä¸€æ¬¾ä½ å–œæ¬¢çš„

## 1.æ•°ç»„è½¬List

### 1.1. Array.asList

è¿™ä¸ªè€ƒé¢˜å¤ªç®€å•äº†ï¼Œç›´æ¥ä½¿ç”¨`Array.asList`ä¸å°±å®Œäº‹äº†ä¹ˆï¼Œæ¯”å¦‚

```java
@Test
public void ary2list() {
    String[] ary = new String[]{ "1", "a"};
    List<String> list = Arrays.asList((ary);
    System.out.println(list);
}
```

æ•°ç»„è½¬listï¼Œso easy!!!

çœŸçš„å°±è¿™ä¹ˆç®€å•ä¹ˆï¼Ÿï¼Ÿï¼Ÿ

ä¸”çœ‹ä¸‹é¢è¿™ä¸€æ®µä»£ç 

```java
public void ary2list() {
    String[] ary = new String[]{ "1", "a"};
    List<String> list = Arrays.asList((ary);
    System.out.println(list);

    list.add("c");
    System.out.println(list);
}
```

ç›´æ¥æŠ›å‡ºäº†å¼‚å¸¸`java.lang.UnsupportedOperationException`

æœ‰å…´è¶£çš„å°ä¼™ä¼´å¯ä»¥çœ‹ä¸€ä¸‹æºç å®ç°æ–¹å¼ï¼Œé€šè¿‡`Arrays.asList`åˆ›å»ºçš„Listï¼Œè™½è¯´ä¹Ÿå‘½åæ˜¯`ArrayList`ï¼Œä½†æ˜¯å®ƒçš„å…¨è·¯å¾„ä¸º `java.util.Arrays.ArrayList`ï¼Œ ä¸æ”¯æŒ`add`, `remove`ç­‰æ“ä½œï¼ˆæ‰€ä»¥ä¸‹æ¬¡å†æœ‰é¢è¯•å®˜é—®ArrayListçš„çŸ¥è¯†ç‚¹æ—¶ï¼Œå°±å¯ä»¥åé—®ä¸€å¥ï¼Œè€å“¥ä½ æŒ‡çš„æ˜¯å“ªä¸ªArrayListğŸ˜ï¼Œé€¼æ ¼æ˜¯ä¸æ˜¯ç«‹é©¬æ‹‰èµ·æ¥ï¼‰

**çŸ¥è¯†ç‚¹**

- é€šè¿‡`Arrays.asList`åˆ›å»ºçš„åˆ—è¡¨ï¼Œä¸å…è®¸æ–°å¢ï¼Œåˆ é™¤å…ƒç´ ï¼›ä½†æ˜¯å¯ä»¥æ›´æ–°åˆ—è¡¨ä¸­å…ƒç´ çš„å€¼

### 1.2. new ArrayList

ä¸Šé¢çš„æ•°ç»„è½¬listæ–¹å¼è™½ç„¶æ˜¯æœ€ç®€å•çš„ï¼Œä½†ä¸ä¸€å®šæ˜¯åˆé€‚çš„ï¼Œç‰¹åˆ«æ˜¯å½“æˆ‘ä»¬å¯èƒ½å¯¹è½¬æ¢åçš„listè¿›è¡Œæ“ä½œæ—¶ï¼Œå¯èƒ½åŸ‹å‘ï¼ˆè€Œä¸”è¿™ç§å‘è¿˜éå¸¸éšæ™¦ï¼Œä»£ç å±‚é¢ä¸Šå¾ˆéš¾å‘ç°ï¼‰

ä¸ºäº†å‡å°‘åœ¨ä»£ç é‡Œé¢ä¸‹æ¯’çš„å¯èƒ½æ€§ï¼Œä¸å¦¨ä½¿ç”¨ä¸‹é¢è¿™ç§æ–¹å¼`new ArrayList<>(Arrays.asList(ary))`

```java
String[] ary = new String[]{ "1", "a"};
List<String> out = new ArrayList<>(Arrays.asList(ary));
out.add("hello");
System.out.println(out);
```

é€šè¿‡ä¸Šé¢è¿™ç§æ–¹å¼åˆ›å»ºçš„Listï¼Œå°±æ˜¯æˆ‘ä»¬ç†ŸçŸ¥çš„`ArrayList`äº†

**é¿é›·é¢„è­¦**

çœ‹åˆ°ä¸Šé¢è¿™ä¸ªä½¿ç”¨å§¿åŠ¿ï¼Œå°±å¾ˆå®¹æ˜“æƒ³åˆ°ä¸€ä¸ªå¸¸è§çš„è¸©é›·ç‚¹ï¼Œæ¯”å¦‚æˆ‘ä»¬çš„åº”ç”¨ä¸­ï¼Œæœ‰ä¸€ä¸ªå…¨å±€å…±äº«çš„é…ç½®åˆ—è¡¨ï¼Œå¼ ä¸‰éœ€è¦æ‹¿idä¸ºå¥‡æ•°çš„é…ç½®ï¼Œæå››æ‹¿idä¸ºå¶æ•°çš„é…ç½®ï¼Œç„¶åä»–ä»¬éƒ½æ˜¯è¿™ä¹ˆåšçš„

```java
list.removeIf(s -> s.id % 2 == 0);
```

ç„¶åè·‘äº†ä¸€æ¬¡ä¹‹åå‘ç°è¿™ä¸ªå…¨å±€çš„åˆ—è¡¨æ¸…ç©ºäº†ï¼Œè¿™å°±æ˜¯å…¸å‹çš„æ²¡æœ‰åšå¥½èµ„æºéš”ç¦»çš„caseäº†ï¼Œé’ˆå¯¹è¿™ç§åœºæ™¯ï¼Œè¦ä¹ˆæ˜¯é™åˆ¶ä½¿ç”¨æ–¹ï¼Œç›´æ¥é’ˆå¯¹å…¨å±€çš„èµ„æºè¿›è¡Œä¿®æ”¹ï¼Œè¦ä¹ˆå°±æ˜¯ä½¿ç”¨æ–¹æ‹¿åˆ°çš„æ˜¯ä¸€ä¸ªéš”ç¦»çš„å¤‡ä»½

**ç¦æ­¢ä¿®æ”¹ï¼š**

- ä½¿ç”¨ä¸å¯å˜çš„å®¹å™¨ï¼Œå¦‚å‰é¢æåˆ°çš„`java.util.Arrays.ArrayList` ()
- ä½¿ç”¨`Collections.unmodifiableList`åˆ›å»º

```java
List<String> unModifyList = Collections.unmodifiableList(out);
```

**åˆ—è¡¨æ‹·è´**

```java
new ArrayList<>(Arrays.asList(ary));
```

ï¼ˆä¸Šé¢è¿™ç§å±äºæ·±æ‹·è´çš„å®ç°ï¼Œå…·ä½“å¯ä»¥çœ‹ä¸€ä¸‹jdkçš„æºç å®ç°ï¼‰

### 1.3. Collections.addAll

ç¬¬ä¸‰ç§æ–¹å¼å€ŸåŠ©jdkæä¾›çš„å®¹å™¨å·¥å…·ç±»`Collections`æ¥å®ç°

```java
@Test
public void ary2listV3() {
    String[] ary = new String[]{ "1", "a"};
    // åˆ›å»ºåˆ—è¡¨ï¼Œå¹¶æŒ‡å®šé•¿åº¦ï¼Œé¿å…å¯èƒ½äº§ç”Ÿçš„æ‰©å®¹
    List<String> out = new ArrayList<>(ary.length);
    // å®ç°æ•°ç»„æ·»åŠ åˆ°åˆ—è¡¨ä¸­
    Collections.addAll(out, ary);

    // å› ä¸ºåˆ—è¡¨ä¸ºæˆ‘ä»¬å®šä¹‰çš„ArrayListï¼Œå› æ­¤å¯ä»¥å¯¹å®ƒè¿›è¡Œå¢åˆ æ”¹
    out.add("hello");
    System.out.println(out);
}
```

åŸåˆ™ä¸Šæ˜¯æ¯”è¾ƒæ¨èè¿™ç§æ–¹å¼æ¥å®ç°çš„ï¼Œè‡³äºä¸ºå•¥ï¼Ÿçœ‹ä¸‹æºç å®ç°

```java
public static <T> boolean addAll(Collection<? super T> c, T... elements) {
    boolean result = false;
    for (T element : elements)
        result |= c.add(element);
    return result;
}
```

è¿™æ®µä»£ç çš„å®ç°æ˜¯ä¸æ˜¯éå¸¸çœ¼ç†Ÿï¼Œå¦‚æœè®©æˆ‘ä»¬è‡ªå·±æ¥å†™ï¼Œä¹Ÿå·®ä¸å¤šä¼šå†™æˆè¿™æ ·å§ï¼Œç®€å•ç›´è§‚é«˜æ•ˆï¼Œå®Œç¾

## 2. åˆ—è¡¨è½¬æ•°ç»„

ä¸åŒäºæ•°ç»„è½¬åˆ—è¡¨çš„å‡ ç§ç©æ³•ï¼Œåˆ—è¡¨è½¬æ•°ç»„å°±ç®€å•å¤šäº†ï¼Œç›´æ¥è°ƒç”¨`List.toArray`

```java
List<String> list = Arrays.asList("a", "b", "c");
// è¿”å›çš„æ˜¯Object[] æ•°ç»„
Object[] cell = list.toArray();

// å¦‚æœéœ€è¦æŒ‡å®šæ•°ç»„ç±»å‹ï¼Œå¯ä»¥ä¼ ä¸€ä¸ªæŒ‡å®šå„ç±»å‹çš„ç©ºçš„æ•°ç»„
// ä¹Ÿå¯ä»¥ä¼ ä¸€ä¸ªä¸ç›®æ ‡åˆ—è¡¨é•¿åº¦ç›¸ç­‰çš„æ•°ç»„ï¼Œè¿™æ ·ä¼šå°†åˆ—è¡¨ä¸­çš„å…ƒç´ æ‹·è´åˆ°è¿™ä¸ªæ•°ç»„ä¸­
String[] strCell = list.toArray(new String[]{});
```

## 3. å°ç»“

ä»Šå¤©çš„åšæ–‡ä¸»é¢˜æ˜¯æ•°ç»„ä¸åˆ—è¡¨çš„äº’è½¬ï¼Œè™½è¯´é¢˜ç›®ç®€å•ï¼Œä½†æ˜¯å®ç°æ–¹å¼ä¹Ÿæ˜¯å¤šç§ï¼Œéœ€è¦ææ¸…æ¥šå®ƒä»¬ä¹‹é—´çš„æœ¬è´¨åŒºåˆ«ï¼Œä¸€ä¸å°å¿ƒå°±å¯èƒ½é‡‡å‘ï¼Œè€Œæœ€ç®€å•çš„åœ°æ–¹æ‰å‘é‡Œï¼Œå¾€å¾€æ˜¯æœ€éš¾å‘ç°å’Œçˆ¬å‡ºæ¥çš„

æ ¸å¿ƒçŸ¥è¯†ç‚¹å°ç»“å¦‚ä¸‹

**æ•°ç»„è½¬listï¼š**

- `Arrays.asList(xxx)`ï¼šåˆ›å»ºçš„æ˜¯ä¸å¯å˜åˆ—è¡¨ï¼Œä¸èƒ½åˆ é™¤å’Œæ–°å¢å…ƒç´ 
- `new ArrayList<>(Arrays.asList(xxx)`: ç›¸å½“äºç”¨åˆ—è¡¨åˆ›å»ºåˆ—è¡¨ï¼Œå±äºæ·±æ‹·è´çš„ä¸€ç§è¡¨ç°ï¼Œè·å–åˆ°çš„åˆ—è¡¨æ”¯æŒæ–°å¢ã€åˆ é™¤
- æ¨èå†™æ³• `Collections.addAll()`

**åˆ—è¡¨è½¬æ•°ç»„**

- `list.toArray`: å¦‚æœéœ€è¦æŒ‡å®šæ•°ç»„ç±»å‹ï¼Œåˆ™ä¼ å‚æŒ‡å®š


