---
order: 1
title: 01.Java 9新集合工厂方法：开启高效编程新时代
tag:
  - jdk
  - AIGen
category:
  - Java
date: 2025-02-14 08:58:09
keywords: 
  - Java 
  - JDK9
  - 结合工厂
---

嘿，各位Java开发者！是不是每次看到代码里那些冗长的集合初始化，就感觉像是在做“体力活”？别担心，Java 9带着它的集合工厂方法来拯救我们啦！这就好比是给你配了一把“魔法棒”，轻轻一挥，集合就创建好了，再也不用写那些繁琐的代码了。接下来，就让我们一起探索Java 9集合工厂方法的神奇之处吧！

## Java 9之前的集合创建方式：累觉不爱

在Java 9出现之前，创建集合简直就像是一场“苦力之旅”。比如，创建一个`List`，你得先创建一个`ArrayList`对象，然后一个接一个地往里加元素。看看下面这串代码，是不是感觉有点“眼熟”？

```java
List<String> list = new ArrayList<>();
list.add("苹果");
list.add("香蕉");
list.add("橘子");
```

这还不算完，要是创建一个`Set`，你也得先实例化一个`HashSet`，再逐个添加元素。而`Map`就更麻烦了，得先创建一个`HashMap`，然后用`put`方法一个一个塞进去。这就好比是让你用勺子一勺一勺地往桶里装水，效率低得可怜！

而且，这种方式创建的集合，一旦初始化完成，要是想改点东西，还得小心翼翼，生怕出错。这就好比是用橡皮泥捏了个小雕塑，稍微一动，可能就变形了。Java 9的集合工厂方法，就是来解决这些问题的！

## Java 9集合工厂方法闪亮登场：魔法棒上线！

### （一）List集合的of方法：一键搞定

Java 9的`List.of`方法，简直就是给`List`集合插上了“翅膀”。只需要一行代码，就能创建一个不可变的`List`集合。看看下面这串代码，是不是感觉眼前一亮？

```java
List<String> fruits = List.of("苹果", "香蕉", "橘子");
```

这就好比是用魔法棒一挥，一个装满水果的篮子就出现了！而且，这个方法还能创建空的集合，就像变出一个空篮子一样简单：

```java
List<Integer> emptyList = List.of();
```

要是你想创建一个超大的集合，`List.of`也完全没问题！你可以直接传入一堆参数，或者把多个`List.of`组合起来，再用`Stream`拼成一个大集合。这就好比是把几个小篮子合并成一个大篮子，超方便！

### （二）Set集合的of方法：拒绝“撞衫”

`Set.of`方法也超级厉害！它不仅能让你快速创建一个不可变的`Set`集合，还能自动帮你检查重复元素。要是你不小心传了重复的元素，它就会直接“抗议”，抛出一个`IllegalArgumentException`异常。看看下面这串代码：

```java
Set<String> colors = Set.of("红色", "蓝色", "绿色");
```

要是你写成这样：

```java
Set<String> duplicateSet = Set.of("红色", "蓝色", "绿色", "红色");
```

它就会直接“炸毛”，告诉你不能有重复元素。这就好比是去参加派对，坚决不允许“撞衫”，保证了集合的“独一无二”。

### （三）Map集合的of和ofEntries方法：键值对的“完美搭档”

对于`Map`集合，Java 9提供了两个超厉害的方法：`of`和`ofEntries`。`Map.of`方法适合创建包含少量键值对的不可变`Map`，而且键值对必须成对出现。看看下面这串代码：

```java
Map<String, Integer> scores = Map.of("小明", 95, "小红", 88, "小刚", 92);
```

这就好比是把名字和分数一一对应起来，超直观！不过，要是你传了重复的键，它也会直接“抗议”，抛出`IllegalArgumentException`异常。

要是你想创建一个超大的`Map`，`Map.ofEntries`方法就派上用场了。你可以传入一堆`Map.Entry`对象，轻松搞定。看看下面这串代码：

```java
Map<String, String> cities = Map.ofEntries(
    new AbstractMap.SimpleEntry<>("北京", "中国"),
    new AbstractMap.SimpleEntry<>("东京", "日本"),
    new AbstractMap.SimpleEntry<>("巴黎", "法国")
);
```
这就好比是把一堆“名字 - 国籍”的卡片整齐地排列起来，超方便！

## 对比：新老方法的差异与优势

### （一）代码简洁性与可读性：从“长篇大论”到“一句话搞定”

Java 9的集合工厂方法，简直是把代码简洁性提升到了一个新的高度。以前创建一个`List`，得写一大堆代码；现在只需要一行代码。这就好比是从写一篇长篇大论，变成了只说一句话就能搞定。比如：

```java
List<String> list = List.of("苹果", "香蕉", "橘子");
```

这种简洁的写法，不仅减少了代码量，还让代码结构更加清晰，一眼就能看出集合里有什么东西。这就好比是把一堆杂物整齐地摆放在柜子里，一目了然。

### （二）性能与不可变性：多线程的“守护神”

Java 9的集合工厂方法创建的集合是不可变的，这意味着一旦创建，就不能再修改。这在多线程环境中简直是“神器”！因为不可变集合不需要额外的同步机制来保证线程安全。比如，在一个多线程读取集合的场景中，使用不可变集合就不用担心数据不一致的问题。

而且，不可变集合在内存管理上也更有优势。JVM可以对它们进行优化，比如缓存哈希码。这就好比是给集合穿上了一件“保护衣”，让它们在运行时更加高效。

### （三）开发效率提升：从“搬砖”到“魔法”

使用Java 9的集合工厂方法，开发效率简直提升了一个档次！以前创建集合，得像搬砖一样，一个一个往里加元素；现在只需要“魔法棒”一挥，集合就创建好了。这就好比是从“人力运输”升级到了“传送门”，效率提升可不是一点半点。

而且，简洁的代码也减少了出错的概率，调试起来也更轻松。这就好比是少走了很多弯路，直接到达目的地。

## 使用注意事项：别踩“雷区”

### （一）不可变性：别试图“逆天改命”

使用`List.of`、`Set.of`和`Map.of`方法创建的集合是不可变的，这意味着一旦创建，就不能再添加、删除或修改元素。要是你试图这么做，就会直接“触雷”，抛出`UnsupportedOperationException`异常。比如：

```java
List<String> list = List.of("苹果", "香蕉");
list.add("橘子"); // 这行代码会直接“炸掉”
```

所以，使用这些方法时，一定要想清楚集合的内容是否还会变化。如果还会变，那就老老实实使用传统的集合创建方式。

### （二）元素的唯一性：别“撞车”

对于`Set`和`Map`集合，Java 9的工厂方法会严格检查元素的唯一性。如果传入了重复的元素或键，就会直接“抗议”，抛出`IllegalArgumentException`异常。比如：
```java
Set<String> set = Set.of("红色", "蓝色", "红色"); // 这行代码会“炸掉”
Map<String, Integer> map = Map.of("小明", 95, "小红", 88, "小明", 90); // 这行代码也会“炸掉”
```
这就好比是开车时不能“撞车”，否则就会直接“报废”。

### （三）空值的处理：别“放空炮”

在使用集合工厂方法时，`List.of`和`Set.of`都不允许传入`null`元素，`Map.of`的键和值也不允许是`null`。要是你传了`null`，就会直接“放空炮”，抛出`NullPointerException`异常。比如：
```java
List<String> list = List.of("苹果", null, "香蕉"); // 这行代码会“炸掉”
Map<String, Integer> map = Map.of("小明", 95, null, 88); // 这行代码也会“炸掉”
```
所以，使用这些方法时，一定要确保传入的元素都是有效的，别让`null`来“搅局”。

## 实际应用场景举例：魔法棒的“实战演练”

### （一）数据初始化：轻松搞定

在很多业务场景中，我们需要初始化一些固定的数据集合。比如在一个电商系统中，商品分类是固定的。使用Java 9的集合工厂方法，就可以轻松搞定：

```java
List<String> productCategories = List.of("电子产品", "服装", "食品", "家居用品");
```
这就好比是用魔法棒一挥，一个装满商品分类的“宝箱”就出现了，而且保证了这些分类不会被误改，超安全！

### （二）配置文件读取：清晰明了

在读取配置文件时，我们常常需要把配置信息存储在集合中。比如一个数据库连接配置，使用`Map.of`方法就可以清晰地搞定：

```java
Map<String, String> dbConfig = Map.of(
    "url", "jdbc:mysql://localhost:3306/mydb",
    "username", "root",
    "password", "123456"
);
```
这就好比是把配置信息整齐地摆放在一个“展示柜”里，一目了然，再也不用担心配置错误了。

### （三）常量定义：稳如泰山

在定义常量集合时，Java 9的集合工厂方法也超有用。比如在一个游戏开发项目中，定义游戏角色的属性集合：

```java
public static final Set<String> CHARACTER_ATTRIBUTES = Set.of("生命值", "魔法值", "攻击力", "防御力");
```
这就好比是给游戏角色的属性加上了一层“保护罩”，保证了它们的“独一无二”和“不可篡改”，让游戏运行得更稳定。

## 总结与展望：魔法棒的“未来篇章”

Java 9的集合工厂方法，无疑是Java集合框架发展历程中的一个重要里程碑。它就像是一把“魔法棒”，让集合的创建变得简洁、高效，还自带“保护罩”，让数据更安全。无论是代码的可读性、性能，还是开发效率，都提升了一个档次。

通过实际应用场景的举例，我们可以看到，Java 9的集合工厂方法在各个领域都能轻松应对，无论是数据初始化、配置文件读取还是常量定义，都能发挥出强大的作用。

展望未来，随着Java版本的不断更新，我们有理由期待它会带来更多“魔法”功能，让集合操作更加简单高效。也许有一天，我们真的可以用魔法棒一挥，就能搞定一切！让我们一起期待吧！ 